{"version":3,"file":"main-DvwAzL84.js","sources":["../../src/js/core/resourceManager.js","../../src/js/core/particleSystem.js","../../src/js/config/constants.js","../../src/js/config/audioConfig.js","../../src/js/core/soundManager.js","../../src/js/core/renderer.js","../../src/js/gameLoop.js","../../src/js/managers/hudManager.js","../../src/js/managers/checkpointManager.js","../../src/js/managers/flamethrowerManager.js","../../src/js/managers/centerPieceManager.js","../../src/js/managers/multiTouchManager.js","../../src/js/managers/glassShatterManager.js","../../src/js/managers/progressManager.js","../../src/js/levels/baseLevel.js","../../src/js/config/gameSettings.js","../../src/js/levels/colorsLevel.js","../../src/js/levels/shapesLevel.js","../../src/js/levels/alphabetLevel.js","../../src/js/levels/numbersLevel.js","../../src/js/levels/clCaseLevel.js","../../src/js/levels/phonics/PhonicsConfig.js","../../src/js/levels/phonics/BubbleSystem.js","../../src/js/levels/phonics/PhonicsLevel.js","../../src/js/ui/levelMenu.js","../../src/js/inputHandler.js","../../src/js/config/displayModes.js","../../src/js/ui/welcomeScreen.js","../../src/js/utils/errorTracker.js","../../src/js/core/main.js"],"sourcesContent":["export default class ResourceManager {\n  constructor() {\n    this.fonts = {};\n    this.images = {};\n    this.audio = {};\n  }\n\n  async loadFont(name, url) {\n    const font = new FontFace(name, `url(${url})`);\n    await font.load();\n    document.fonts.add(font);\n    this.fonts[name] = font;\n  }\n\n  async loadImage(name, url) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => { this.images[name] = img; resolve(img); };\n      img.onerror = reject;\n      img.src = url;\n    });\n  }\n\n  async loadAudio(name, url) {\n    return new Promise((resolve, reject) => {\n      const audio = new Audio();\n      audio.oncanplaythrough = () => { this.audio[name] = audio; resolve(audio); };\n      audio.onerror = reject;\n      audio.src = url;\n    });\n  }\n\n  async initializeGameResources() {\n    // Try to load resources, but don't fail if they're not available\n    try {\n      await this.loadFont('TitleFont', 'assets/fonts/title.ttf');\n    } catch (e) {\n      console.warn('Could not load title font, using fallback');\n    }\n    \n    try {\n      await this.loadFont('SubtitleFont', 'assets/fonts/subtitle.ttf');\n    } catch (e) {\n      console.warn('Could not load subtitle font, using fallback');\n    }\n    \n    try {\n      await this.loadFont('BodyFont', 'assets/fonts/body.ttf');\n    } catch (e) {\n      console.warn('Could not load body font, using fallback');\n    }\n    \n    try {\n      await this.loadImage('placeholder', 'assets/images/placeholder.svg');\n    } catch (e) {\n      console.warn('Could not load placeholder image');\n    }\n    \n    try {\n      await this.loadAudio('laser', 'assets/sounds/laser.mp3');\n    } catch (e) {\n      console.warn('Could not load laser sound');\n    }\n    try {\n      await this.loadAudio('completion', 'assets/sounds/completion.mp3');\n    } catch (e) {\n      console.warn('Could not load completion sound');\n    }\n    try {\n      await this.loadAudio('ambient_space', 'assets/sounds/ambient_space.mp3');\n    } catch (e) {\n      console.warn('Could not load ambient space sound');\n    }\n    \n    return { fonts: this.fonts, images: this.images, audio: this.audio };\n  }\n\n  setDisplayMode(mode) {\n    localStorage.setItem('displayMode', mode);\n  }\n\n  getDisplayMode() {\n    return localStorage.getItem('displayMode') || 'DEFAULT';\n  }\n\n  // Test method to verify resource loading functionality\n  testResourceLoading() {\n    console.log('Testing resource loading...');\n    console.log('Loaded fonts:', Object.keys(this.fonts));\n    console.log('Loaded images:', Object.keys(this.images));\n    console.log('Loaded audio:', Object.keys(this.audio));\n    \n    // Test if placeholder image is loaded and accessible\n    if (this.images.placeholder) {\n      console.log('‚úì Placeholder image loaded successfully');\n      console.log('  - Width:', this.images.placeholder.width || 'Not loaded yet');\n      console.log('  - Height:', this.images.placeholder.height || 'Not loaded yet');\n    } else {\n      console.log('‚úó Placeholder image not loaded');\n    }\n    \n    return {\n      fontsCount: Object.keys(this.fonts).length,\n      imagesCount: Object.keys(this.images).length,\n      audioCount: Object.keys(this.audio).length\n    };\n  }\n}\n","/**\n * Enhanced Particle System with Object Pooling and Performance Optimization\n * Prioritizes smooth 60fps performance while providing rich visual effects\n */\nexport default class ParticleManager {\n  constructor(maxParticles = 500) {\n    this.maxParticles = maxParticles;\n    this.particles = [];\n    this.lastUpdateTime = performance.now();\n\n    this.particlePool = [];\n    this.activeParticles = 0;\n    \n    // Performance optimization\n    this.lastCleanupTime = 0;\n    this.cleanupInterval = 100; // Cleanup every 100ms\n    this.renderBatch = [];\n    this.colorCache = new Map();\n    \n    // Visual effects\n    this.globalEffects = {\n      wind: { x: 0, y: 0 },\n      gravity: 0.1,\n      turbulence: 0\n    };\n    \n    // Performance monitoring\n    this.performanceMode = 'high'; // high, medium, low\n    this.frameTimeHistory = [];\n    this.avgFrameTime = 16; // Target 60fps\n    \n    // Initialize particle pool\n    this.initializePool();\n  }\n\n  initializePool() {\n    // Pre-allocate particles for performance\n    for (let i = 0; i < this.maxParticles; i++) {\n      this.particlePool.push(this.createParticleObject());\n    }\n  }\n\n  createParticleObject() {\n    return {\n      x: 0,\n      y: 0,\n      vx: 0,\n      vy: 0,\n      size: 1,\n      color: '#ffffff',\n      opacity: 1,\n      life: 1,\n      maxLife: 1000,\n      age: 0,\n      rotation: 0,\n      rotationSpeed: 0,\n      scale: 1,\n      scaleVelocity: 0,\n      active: false,\n      type: 'circle',\n      trail: false,\n      trailPositions: [],\n      physics: {\n        gravity: true,\n        bounce: false,\n        friction: 0.99\n      }\n    };\n  }\n\n  setPerformanceMode(mode) {\n    this.performanceMode = mode;\n    \n    // Adjust settings based on performance\n    switch (mode) {\n      case 'low':\n        this.maxParticles = Math.min(100, this.maxParticles);\n        this.cleanupInterval = 200;\n        break;\n      case 'medium':\n        this.maxParticles = Math.min(250, this.maxParticles);\n        this.cleanupInterval = 150;\n        break;\n      case 'high':\n        // Use defaults\n        break;\n    }\n  }\n\n  createParticle(x, y, color, size, dx, dy, duration, options = {}) {\n    if (this.activeParticles >= this.maxParticles) {\n      // Remove oldest particle to make room\n      this.removeOldestParticle();\n      if (this.activeParticles >= this.maxParticles) {\n        // Still at capacity, don't create new particle\n        return null;\n      }\n    }\n    \n    // Get particle from pool\n    let particle = this.particlePool.find(p => !p.active);\n    if (!particle) {\n      particle = this.createParticleObject();\n      this.particlePool.push(particle);\n    }\n    \n    // Configure particle\n    particle.x = x;\n    particle.y = y;\n    particle.vx = dx;\n    particle.vy = dy;\n    particle.size = size;\n    particle.color = color;\n    particle.opacity = options.opacity || 1;\n    particle.life = 1;\n    particle.maxLife = duration;\n    particle.age = 0;\n    particle.rotation = options.rotation || 0;\n    particle.rotationSpeed = options.rotationSpeed || 0;\n    particle.scale = options.scale || 1;\n    particle.scaleVelocity = options.scaleVelocity || 0;\n    particle.active = true;\n    particle.type = options.type || 'circle';\n    particle.trail = options.trail || false;\n    particle.trailPositions = [];\n    \n    // Physics options\n    particle.physics.gravity = options.gravity !== undefined ? options.gravity : true;\n    particle.physics.bounce = options.bounce || false;\n    particle.physics.friction = options.friction || 0.99;\n    \n    // Only add to particles array if not already there\n    if (!this.particles.includes(particle)) {\n      this.particles.push(particle);\n    }\n    this.activeParticles++;\n    \n    return particle;\n  }\n\n  // Enhanced particle creation methods\n  createExplosion(x, y, color, intensity = 1, count = 20) {\n    for (let i = 0; i < count * intensity; i++) {\n      const angle = (Math.PI * 2 * i) / (count * intensity);\n      const speed = 2 + Math.random() * 4 * intensity;\n      const size = 1 + Math.random() * 3 * intensity;\n      const duration = 500 + Math.random() * 1000;\n      \n      this.createParticle(\n        x, y, color, size,\n        Math.cos(angle) * speed,\n        Math.sin(angle) * speed,\n        duration,\n        {\n          scaleVelocity: -0.01,\n          rotationSpeed: (Math.random() - 0.5) * 0.2,\n          gravity: true\n        }\n      );\n    }\n  }\n\n  createTrail(x, y, color, size, dx, dy, duration) {\n    this.createParticle(x, y, color, size, dx, dy, duration, {\n      trail: true,\n      gravity: false,\n      friction: 0.95,\n      scaleVelocity: -0.005\n    });\n  }\n\n  createSparkle(x, y, color, intensity = 1) {\n    const count = 5 + Math.floor(Math.random() * 10 * intensity);\n    for (let i = 0; i < count; i++) {\n      const angle = Math.random() * Math.PI * 2;\n      const speed = 0.5 + Math.random() * 2 * intensity;\n      const size = 1 + Math.random() * 2;\n      const duration = 800 + Math.random() * 600;\n      \n      this.createParticle(\n        x + (Math.random() - 0.5) * 20,\n        y + (Math.random() - 0.5) * 20,\n        color, size,\n        Math.cos(angle) * speed,\n        Math.sin(angle) * speed,\n        duration,\n        {\n          type: 'star',\n          rotationSpeed: (Math.random() - 0.5) * 0.3,\n          scaleVelocity: -0.003,\n          gravity: false\n        }\n      );\n    }\n  }\n\n  createBubbleParticles(x, y, count = 10) {\n    for (let i = 0; i < count; i++) {\n      const angle = Math.random() * Math.PI * 2;\n      const speed = 0.5 + Math.random() * 1.5;\n      const size = 2 + Math.random() * 4;\n      const duration = 1000 + Math.random() * 2000;\n      \n      this.createParticle(\n        x, y,\n        `hsla(${200 + Math.random() * 60}, 70%, 80%, 0.7)`,\n        size,\n        Math.cos(angle) * speed,\n        Math.sin(angle) * speed - 1, // Float upward\n        duration,\n        {\n          type: 'bubble',\n          gravity: false,\n          friction: 0.98,\n          scaleVelocity: 0.001 // Grow slightly\n        }\n      );\n    }\n  }\n\n  removeOldestParticle() {\n    let oldestIndex = -1;\n    let oldestAge = 0;\n    \n    for (let i = 0; i < this.particles.length; i++) {\n      if (this.particles[i].active && this.particles[i].age > oldestAge) {\n        oldestAge = this.particles[i].age;\n        oldestIndex = i;\n      }\n    }\n    \n    if (oldestIndex >= 0) {\n      this.deactivateParticle(this.particles[oldestIndex]);\n    }\n  }\n\n  deactivateParticle(particle) {\n    particle.active = false;\n    particle.trailPositions = [];\n    this.activeParticles--;\n  }\n\n  updateAndDraw(ctx, deltaTime) {\n    const now = performance.now();\n    const actualDeltaTime = deltaTime !== undefined ? deltaTime : 16; // Default to 16ms\n    \n    // Update particles\n    this.updateParticles(actualDeltaTime);\n    \n    // Clean up inactive particles periodically\n    if (now - this.lastCleanupTime > this.cleanupInterval) {\n      this.cleanupInactiveParticles();\n      this.lastCleanupTime = now;\n    }\n    \n    // Draw particles\n    this.drawParticles(ctx);\n    \n    // Performance monitoring\n    this.monitorPerformance(now);\n  }\n\n  updateParticles(deltaTime) {\n    const dt = deltaTime / 16; // Normalize to 60fps\n    \n    for (let i = 0; i < this.particles.length; i++) {\n      const particle = this.particles[i];\n      if (!particle.active) continue;\n      \n      // Update age and life\n      particle.age += deltaTime;\n      particle.life = 1 - (particle.age / particle.maxLife);\n      \n      // Remove expired particles\n      if (particle.life <= 0) {\n        this.deactivateParticle(particle);\n        continue;\n      }\n      \n      // Update trail positions\n      if (particle.trail) {\n        particle.trailPositions.push({ x: particle.x, y: particle.y });\n        if (particle.trailPositions.length > 10) {\n          particle.trailPositions.shift();\n        }\n      }\n      \n      // Apply physics\n      this.updateParticlePhysics(particle, dt);\n      \n      // Update visual properties\n      this.updateParticleVisuals(particle, dt);\n    }\n  }\n\n  updateParticlePhysics(particle, dt) {\n    // Apply global effects\n    particle.vx += this.globalEffects.wind.x * dt;\n    particle.vy += this.globalEffects.wind.y * dt;\n    \n    if (particle.physics.gravity) {\n      particle.vy += this.globalEffects.gravity * dt;\n    }\n    \n    // Apply turbulence\n    if (this.globalEffects.turbulence > 0) {\n      particle.vx += (Math.random() - 0.5) * this.globalEffects.turbulence * dt;\n      particle.vy += (Math.random() - 0.5) * this.globalEffects.turbulence * dt;\n    }\n    \n    // Apply friction\n    particle.vx *= particle.physics.friction;\n    particle.vy *= particle.physics.friction;\n    \n    // Update position\n    particle.x += particle.vx * dt;\n    particle.y += particle.vy * dt;\n    \n    // Boundary handling\n    if (particle.physics.bounce) {\n      // Simple boundary bouncing (can be enhanced)\n      if (particle.x < 0 || particle.x > 800) { // Assuming canvas width\n        particle.vx *= -0.5;\n      }\n      if (particle.y > 600) { // Assuming canvas height\n        particle.vy *= -0.5;\n        particle.y = 600;\n      }\n    }\n  }\n\n  updateParticleVisuals(particle, dt) {\n    // Update rotation\n    particle.rotation += particle.rotationSpeed * dt;\n    \n    // Update scale\n    particle.scale += particle.scaleVelocity * dt;\n    particle.scale = Math.max(0.1, particle.scale);\n    \n    // Update opacity based on life\n    particle.opacity = particle.life;\n  }\n\n  drawParticles(ctx) {\n    // Group particles by type for batch rendering\n    const batches = {\n      circle: [],\n      star: [],\n      bubble: [],\n      trail: []\n    };\n    \n    // Sort particles into batches\n    for (let i = 0; i < this.particles.length; i++) {\n      const particle = this.particles[i];\n      if (!particle.active) continue;\n      \n      if (batches[particle.type]) {\n        batches[particle.type].push(particle);\n      } else {\n        batches.circle.push(particle);\n      }\n    }\n    \n    // Draw each batch\n    ctx.save();\n    \n    // Draw trails first (behind other particles)\n    this.drawTrailParticles(ctx, batches.trail);\n    \n    // Draw main particles\n    this.drawCircleParticles(ctx, batches.circle);\n    this.drawStarParticles(ctx, batches.star);\n    this.drawBubbleParticles(ctx, batches.bubble);\n    \n    ctx.restore();\n  }\n\n  drawCircleParticles(ctx, particles) {\n    particles.forEach(particle => {\n      ctx.save();\n      ctx.globalAlpha = particle.opacity;\n      ctx.translate(particle.x, particle.y);\n      ctx.scale(particle.scale, particle.scale);\n      ctx.rotate(particle.rotation);\n      \n      ctx.fillStyle = particle.color;\n      ctx.beginPath();\n      ctx.arc(0, 0, particle.size, 0, Math.PI * 2);\n      ctx.fill();\n      \n      ctx.restore();\n    });\n  }\n\n  drawStarParticles(ctx, particles) {\n    particles.forEach(particle => {\n      ctx.save();\n      ctx.globalAlpha = particle.opacity;\n      ctx.translate(particle.x, particle.y);\n      ctx.scale(particle.scale, particle.scale);\n      ctx.rotate(particle.rotation);\n      \n      // Draw star shape\n      ctx.fillStyle = particle.color;\n      ctx.beginPath();\n      for (let i = 0; i < 5; i++) {\n        const angle = (i * Math.PI * 2) / 5;\n        const x = Math.cos(angle) * particle.size;\n        const y = Math.sin(angle) * particle.size;\n        if (i === 0) ctx.moveTo(x, y);\n        else ctx.lineTo(x, y);\n      }\n      ctx.closePath();\n      ctx.fill();\n      \n      ctx.restore();\n    });\n  }\n\n  drawBubbleParticles(ctx, particles) {\n    particles.forEach(particle => {\n      ctx.save();\n      ctx.globalAlpha = particle.opacity;\n      ctx.translate(particle.x, particle.y);\n      ctx.scale(particle.scale, particle.scale);\n      \n      // Draw bubble with highlight\n      const gradient = ctx.createRadialGradient(\n        -particle.size * 0.3, -particle.size * 0.3, 0,\n        0, 0, particle.size\n      );\n      gradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');\n      gradient.addColorStop(0.7, particle.color);\n      gradient.addColorStop(1, 'rgba(255, 255, 255, 0.2)');\n      \n      ctx.fillStyle = gradient;\n      ctx.beginPath();\n      ctx.arc(0, 0, particle.size, 0, Math.PI * 2);\n      ctx.fill();\n      \n      // Add bubble highlight\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';\n      ctx.beginPath();\n      ctx.arc(-particle.size * 0.3, -particle.size * 0.3, particle.size * 0.3, 0, Math.PI * 2);\n      ctx.fill();\n      \n      ctx.restore();\n    });\n  }\n\n  drawTrailParticles(ctx, particles) {\n    particles.forEach(particle => {\n      if (particle.trailPositions.length < 2) return;\n      \n      ctx.save();\n      ctx.globalAlpha = particle.opacity * 0.5;\n      ctx.strokeStyle = particle.color;\n      ctx.lineWidth = particle.size;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n      \n      ctx.beginPath();\n      ctx.moveTo(particle.trailPositions[0].x, particle.trailPositions[0].y);\n      \n      for (let i = 1; i < particle.trailPositions.length; i++) {\n        ctx.lineTo(particle.trailPositions[i].x, particle.trailPositions[i].y);\n      }\n      \n      ctx.stroke();\n      ctx.restore();\n      \n      // Draw current particle\n      ctx.save();\n      ctx.globalAlpha = particle.opacity;\n      ctx.fillStyle = particle.color;\n      ctx.beginPath();\n      ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.restore();\n    });\n  }\n\n  cleanupInactiveParticles() {\n    this.particles = this.particles.filter(particle => particle.active);\n  }\n\n  monitorPerformance(now) {\n    const frameTime = now - (this.lastFrameTime || now);\n    this.frameTimeHistory.push(frameTime);\n    \n    if (this.frameTimeHistory.length > 60) {\n      this.frameTimeHistory.shift();\n      \n      // Calculate average frame time\n      const sum = this.frameTimeHistory.reduce((a, b) => a + b, 0);\n      this.avgFrameTime = sum / this.frameTimeHistory.length;\n      \n      // Adjust performance if needed\n      if (this.avgFrameTime > 20 && this.performanceMode === 'high') { // Below 50fps\n        this.setPerformanceMode('medium');\n        console.log('üêå Reduced to medium performance mode');\n      } else if (this.avgFrameTime > 25 && this.performanceMode === 'medium') { // Below 40fps\n        this.setPerformanceMode('low');\n        console.log('üêå Reduced to low performance mode');\n      } else if (this.avgFrameTime < 17 && this.performanceMode !== 'high') { // Above 58fps\n        this.setPerformanceMode('high');\n        console.log('üöÄ Increased to high performance mode');\n      }\n    }\n    \n    this.lastFrameTime = now;\n  }\n\n  // Global effects control\n  setWind(x, y) {\n    this.globalEffects.wind.x = x;\n    this.globalEffects.wind.y = y;\n  }\n\n  setGravity(gravity) {\n    this.globalEffects.gravity = gravity;\n  }\n\n  setTurbulence(turbulence) {\n    this.globalEffects.turbulence = turbulence;\n  }\n\n  // Utility methods\n  clear() {\n    this.particles.forEach(particle => this.deactivateParticle(particle));\n    this.activeParticles = 0;\n  }\n\n  getActiveParticleCount() {\n    return this.activeParticles;\n  }\n\n  getPerformanceInfo() {\n    return {\n      activeParticles: this.activeParticles,\n      maxParticles: this.maxParticles,\n      avgFrameTime: this.avgFrameTime,\n      performanceMode: this.performanceMode,\n      fps: Math.round(1000 / this.avgFrameTime)\n    };\n  }\n}\n","export const GAME_CONFIG = Object.freeze({\n    // Display modes\n    DISPLAY_MODES: Object.freeze(['DEFAULT', 'QBOARD']),\n    DEFAULT_MODE: 'DEFAULT',\n\n    // Font sizes by display mode\n    FONT_SIZES: Object.freeze({\n        DEFAULT: Object.freeze({ regular: 24, large: 48 }),\n        QBOARD: Object.freeze({ regular: 30, large: 60 })\n    }),\n\n    // Performance settings by display mode\n    MAX_PARTICLES: Object.freeze({ DEFAULT: 100, QBOARD: 150 }),\n    MAX_EXPLOSIONS: Object.freeze({ DEFAULT: 5, QBOARD: 8 }),\n    MAX_SWIRL_PARTICLES: Object.freeze({ DEFAULT: 30, QBOARD: 15 }),\n    MOTHER_RADIUS: Object.freeze({ DEFAULT: 90, QBOARD: 120 }),\n\n    // Colors\n    COLORS: Object.freeze({\n        WHITE: Object.freeze([255, 255, 255]),\n        BLACK: Object.freeze([0, 0, 0]),\n        FLAME_COLORS: Object.freeze([\n            Object.freeze([255, 69, 0]),   // Red-orange\n            Object.freeze([255, 215, 0]),  // Gold\n            Object.freeze([0, 191, 255])   // Bright blue\n        ]),\n        COLORS_LIST: Object.freeze([\n            Object.freeze([0, 0, 255]),    // Blue\n            Object.freeze([255, 0, 0]),    // Red\n            Object.freeze([0, 200, 0]),    // Green\n            Object.freeze([255, 255, 0]),  // Yellow\n            Object.freeze([128, 0, 255])   // Purple\n        ])\n    }),\n\n    // Game sequences\n    SEQUENCES: Object.freeze({\n        alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''),\n        numbers: Object.freeze(['1','2','3','4','5','6','7','8','9','10']),\n        clcase: 'abcdefghijklmnopqrstuvwxyz'.split(''),\n        shapes: Object.freeze(['Circle','Square','Triangle','Rectangle','Pentagon']),\n        colors: Object.freeze(['Blue','Red','Green','Yellow','Purple'])\n    }),\n\n    // Timing and gameplay\n    LETTER_SPAWN_INTERVAL: 60,  // frames\n    GROUP_SIZE: 5,\n    COLORS_COLLISION_DELAY: 250,  // milliseconds\n    TOUCH_COOLDOWN: 50,  // milliseconds\n\n    // Physics and movement\n    DOT_RADIUS: 48,\n    DOT_SPEED_RANGE: Object.freeze([3, 6]),\n    EXPLOSION_EXPANSION_RATE: 0.1,\n    SCREEN_SHAKE_DURATION: 10,\n\n    // Performance optimizations\n    SPATIAL_GRID_SIZE: 120,\n    COLLISION_CHECK_FREQUENCY: Object.freeze({ DEFAULT: 1, QBOARD: 2 }),\n    CULLING_DISTANCE_MULTIPLIER: 1.0,\n\n    // Level-specific configurations for colors and text levels\n    COLORS_LEVEL_CONFIG: Object.freeze({\n        TOTAL_DOTS: 85,\n        TARGET_DOTS: 17,\n        DISTRACTOR_DOTS: 68,\n        DISPERSION_FRAMES: 30,\n        DOT_BOUNCE_DAMPENING: 0.98,\n        SHIMMER_FREQUENCY: 0.05,\n        GLOW_FREQUENCY: 0.1,\n        MEMORY_DISPLAY_TIME: 2000,\n        COLLISION_ENABLED_DELAY: 250,\n        GRID_OPTIMIZATION: true\n    }),\n\n    TEXT_LEVEL_CONFIG: Object.freeze({\n        CENTER_FONT_SIZE: 900,\n        FALLING_FONT_SIZE: 240,\n        SPAWN_EDGE_BUFFER: 50,\n        TARGET_ADVANCE_COUNT: 5,\n        CHECKPOINT_INTERVAL: 5,\n        ABILITIES: Object.freeze(['laser', 'aoe', 'charge_up']),\n        AOE_RADIUS: 200,\n        CHARGE_UP_DURATION: 60,\n        LASER_WIDTH: Object.freeze([3, 5]),\n        SWIRL_PARTICLE_COUNT: 30,\n        CENTER_PIECE_ORBIT_RADIUS: 100\n    }),\n\n    // Audio configuration\n    AUDIO_CONFIG: Object.freeze({\n        MASTER_VOLUME: 0.7,\n        SFX_VOLUME: 0.8,\n        MUSIC_VOLUME: 0.3,\n        SOUNDS: Object.freeze({\n            laser: Object.freeze({ file: 'laser.mp3', volume: 0.6 }),\n            completion: Object.freeze({ file: 'completion.mp3', volume: 1.0 })\n        }),\n        AMBIENT: Object.freeze({\n            space: Object.freeze({ file: 'ambient_space.mp3', volume: 0.2, loop: true })\n        }),\n        WEB_AUDIO_CONTEXT: true,\n        BUFFER_PRELOAD: true\n    })\n});\n","import { GAME_CONFIG } from './constants.js';\n\n/**\n * Returns audio configuration settings.\n */\nexport function getAudioConfig() {\n  return {\n    masterVolume: GAME_CONFIG.AUDIO_CONFIG?.MASTER_VOLUME ?? 0.7,\n    sfxVolume: GAME_CONFIG.AUDIO_CONFIG?.SFX_VOLUME ?? 0.8,\n    musicVolume: GAME_CONFIG.AUDIO_CONFIG?.MUSIC_VOLUME ?? 0.3,\n    sounds: GAME_CONFIG.AUDIO_CONFIG?.SOUNDS ?? {},\n    ambient: GAME_CONFIG.AUDIO_CONFIG?.AMBIENT ?? {},\n    webAudioContext: GAME_CONFIG.AUDIO_CONFIG?.WEB_AUDIO_CONTEXT ?? true,\n    bufferPreload: GAME_CONFIG.AUDIO_CONFIG?.BUFFER_PRELOAD ?? true\n  };\n}\n","import { getAudioConfig } from '../config/audioConfig.js';\n\nexport default class SoundManager {\n  constructor() {\n    const audioConfig = getAudioConfig();\n    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    // Store current volume for reference (use private field to avoid setter during construction)\n    this._volume = audioConfig.masterVolume;\n    \n    // Master gain\n    this.masterGain = this.audioContext.createGain();\n    this.masterGain.gain.value = this._volume;\n    this.masterGain.connect(this.audioContext.destination);\n    \n    // Category gains\n    this.gains = {\n      sfx: this.audioContext.createGain(),\n      music: this.audioContext.createGain(),\n      ambient: this.audioContext.createGain(),\n      phonics: this.audioContext.createGain() // Added for phonics sounds\n    };\n    \n    this.gains.sfx.gain.value = audioConfig.sfxVolume;\n    this.gains.music.gain.value = audioConfig.musicVolume;\n    this.gains.ambient.gain.value = audioConfig.musicVolume;\n    this.gains.phonics.gain.value = audioConfig.sfxVolume;\n    \n    // Connect all gains to master\n    Object.values(this.gains).forEach(gain => gain.connect(this.masterGain));\n    \n    // Buffers storage\n    this.buffers = {}; // { name: { buffer, type } }\n    this.activeSources = {};\n    this.sounds = {}; // For preloaded audio compatibility\n\n    // Enhanced features\n    this.sounds = {}; // Direct sound access for ResourceManager\n    this.phonicsCache = new Map(); // Cache for phonics sounds\n    this.soundQueue = []; // Queue for sequenced sounds\n    this.isProcessingQueue = false;\n    \n    // Performance optimization\n    this.maxConcurrentSounds = 8;\n    this.activeSoundsCount = 0;\n    \n    // Initialize default sounds\n    this.initializeDefaultSounds();\n  }\n\n  initializeDefaultSounds() {\n    // Create synthetic sounds for immediate gameplay\n    this.createSyntheticSounds();\n  }\n\n  createSyntheticSounds() {\n    // Create basic synthetic sounds for immediate use\n    const sampleRate = this.audioContext.sampleRate;\n    \n    // Pop sound for bubbles\n    const popBuffer = this.audioContext.createBuffer(1, sampleRate * 0.1, sampleRate);\n    const popData = popBuffer.getChannelData(0);\n    for (let i = 0; i < popData.length; i++) {\n      const t = i / sampleRate;\n      popData[i] = Math.sin(2 * Math.PI * 800 * t) * Math.exp(-t * 20) * 0.3;\n    }\n    this.buffers['pop'] = { buffer: popBuffer, type: 'sfx' };\n    \n    // Success sound\n    const successBuffer = this.audioContext.createBuffer(1, sampleRate * 0.3, sampleRate);\n    const successData = successBuffer.getChannelData(0);\n    for (let i = 0; i < successData.length; i++) {\n      const t = i / sampleRate;\n      const envelope = Math.exp(-t * 3);\n      successData[i] = (\n        Math.sin(2 * Math.PI * 440 * t) * 0.3 +\n        Math.sin(2 * Math.PI * 554 * t) * 0.2 +\n        Math.sin(2 * Math.PI * 659 * t) * 0.1\n      ) * envelope;\n    }\n    this.buffers['success'] = { buffer: successBuffer, type: 'sfx' };\n    \n    // Wrong sound\n    const wrongBuffer = this.audioContext.createBuffer(1, sampleRate * 0.2, sampleRate);\n    const wrongData = wrongBuffer.getChannelData(0);\n    for (let i = 0; i < wrongData.length; i++) {\n      const t = i / sampleRate;\n      wrongData[i] = Math.sin(2 * Math.PI * 150 * t) * Math.exp(-t * 10) * 0.4;\n    }\n    this.buffers['wrong'] = { buffer: wrongBuffer, type: 'sfx' };\n    \n    // Explosion sound\n    const explosionBuffer = this.audioContext.createBuffer(1, sampleRate * 0.4, sampleRate);\n    const explosionData = explosionBuffer.getChannelData(0);\n    for (let i = 0; i < explosionData.length; i++) {\n      const t = i / sampleRate;\n      const noise = (Math.random() - 0.5) * 2;\n      const envelope = Math.exp(-t * 5);\n      explosionData[i] = noise * envelope * 0.3;\n    }\n    this.buffers['explosion'] = { buffer: explosionBuffer, type: 'sfx' };\n  }\n\n  async loadSound(name, url, type = 'sfx') {\n    try {\n      const response = await fetch(url);\n      const arrayBuffer = await response.arrayBuffer();\n      const buffer = await this.audioContext.decodeAudioData(arrayBuffer);\n      this.buffers[name] = { buffer, type };\n      this.sounds[name] = buffer; // For ResourceManager compatibility\n      return buffer;\n    } catch (error) {\n      console.warn(`Failed to load sound ${name}:`, error);\n      return null;\n    }\n  }\n\n  playSound(name, volume = 1.0, pitch = 1.0) {\n    if (this.activeSoundsCount >= this.maxConcurrentSounds) {\n      return null; // Skip if too many sounds playing\n    }\n    \n    const entry = this.buffers[name];\n    if (!entry) {\n      console.warn(`Sound ${name} not found`);\n      return null;\n    }\n    \n    const source = this.audioContext.createBufferSource();\n    source.buffer = entry.buffer;\n    \n    // Add volume control\n    const gainNode = this.audioContext.createGain();\n    gainNode.gain.value = volume;\n    source.connect(gainNode);\n    gainNode.connect(this.gains[entry.type] || this.gains.sfx);\n    \n    // Add pitch control\n    source.playbackRate.value = pitch;\n    \n    source.start(0);\n    this.activeSoundsCount++;\n    \n    source.onended = () => {\n      this.activeSoundsCount--;\n    };\n    \n    return source;\n  }\n\n  playPhonicsSound(letter, volume = 1.0) {\n    // Play phonetic sound for a letter\n    const soundName = `phonics_${letter.toLowerCase()}`;\n    \n    // Check cache first\n    if (this.phonicsCache.has(soundName)) {\n      return this.playSound(soundName, volume);\n    }\n    \n    // Generate synthetic phonics sound if not available\n    return this.generateSyntheticPhonicsSound(letter, volume);\n  }\n\n  generateSyntheticPhonicsSound(letter, volume = 1.0) {\n    // Create a simple synthetic phonics sound\n    const sampleRate = this.audioContext.sampleRate;\n    const duration = 0.5;\n    const buffer = this.audioContext.createBuffer(1, sampleRate * duration, sampleRate);\n    const data = buffer.getChannelData(0);\n    \n    // Basic phonics mapping to frequencies\n    const phonicsMap = {\n      'a': [800, 1200], 'b': [100, 200], 'c': [200, 300], 'd': [150, 250],\n      'e': [500, 700], 'f': [300, 400], 'g': [120, 220], 'h': [100, 150],\n      'i': [300, 500], 'j': [200, 400], 'k': [250, 350], 'l': [400, 600],\n      'm': [150, 300], 'n': [200, 400], 'o': [400, 600], 'p': [100, 200],\n      'q': [250, 450], 'r': [300, 500], 's': [500, 800], 't': [400, 600],\n      'u': [300, 500], 'v': [200, 400], 'w': [250, 450], 'x': [300, 600],\n      'y': [400, 700], 'z': [400, 800]\n    };\n    \n    const freqs = phonicsMap[letter.toLowerCase()] || [400, 600];\n    \n    for (let i = 0; i < data.length; i++) {\n      const t = i / sampleRate;\n      const envelope = Math.exp(-t * 2) * (1 - Math.exp(-t * 10));\n      data[i] = (\n        Math.sin(2 * Math.PI * freqs[0] * t) * 0.3 +\n        Math.sin(2 * Math.PI * freqs[1] * t) * 0.2\n      ) * envelope * volume;\n    }\n    \n    // Cache the generated sound\n    const soundName = `phonics_${letter.toLowerCase()}`;\n    this.buffers[soundName] = { buffer, type: 'phonics' };\n    this.phonicsCache.set(soundName, buffer);\n    \n    return this.playSound(soundName, volume);\n  }\n\n  playMusic(name, loop = true, volume = 1.0) {\n    const entry = this.buffers[name];\n    if (!entry) return null;\n    \n    if (this.activeSources[name]) {\n      this.activeSources[name].stop();\n    }\n    \n    const source = this.audioContext.createBufferSource();\n    source.buffer = entry.buffer;\n    source.loop = loop;\n    \n    const gainNode = this.audioContext.createGain();\n    gainNode.gain.value = volume;\n    source.connect(gainNode);\n    gainNode.connect(this.gains.music);\n    \n    source.start(0);\n    this.activeSources[name] = source;\n    \n    return source;\n  }\n\n  playAmbient(name, loop = true, volume = 1.0) {\n    const entry = this.buffers[name];\n    if (!entry) return null;\n    \n    if (this.activeSources[name]) {\n      this.activeSources[name].stop();\n    }\n    \n    const source = this.audioContext.createBufferSource();\n    source.buffer = entry.buffer;\n    source.loop = loop;\n    \n    const gainNode = this.audioContext.createGain();\n    gainNode.gain.value = volume;\n    source.connect(gainNode);\n    gainNode.connect(this.gains.ambient);\n    \n    source.start(0);\n    this.activeSources[name] = source;\n    \n    return source;\n  }\n\n  // Enhanced sound effects for game interactions\n  playExplosion(intensity = 1.0) {\n    return this.playSound('explosion', intensity, 0.8 + Math.random() * 0.4);\n  }\n\n  playPop(intensity = 1.0) {\n    return this.playSound('pop', intensity, 0.9 + Math.random() * 0.2);\n  }\n\n  playSuccess() {\n    return this.playSound('success', 1.0);\n  }\n\n  playWrong() {\n    return this.playSound('wrong', 1.0);\n  }\n\n  // Sound sequencing for educational feedback\n  playSequence(sounds, delay = 200) {\n    this.soundQueue.push({ sounds, delay });\n    if (!this.isProcessingQueue) {\n      this.processQueue();\n    }\n  }\n\n  async processQueue() {\n    this.isProcessingQueue = true;\n    \n    while (this.soundQueue.length > 0) {\n      const { sounds, delay } = this.soundQueue.shift();\n      \n      for (let i = 0; i < sounds.length; i++) {\n        const sound = sounds[i];\n        if (typeof sound === 'string') {\n          this.playSound(sound);\n        } else if (sound.type === 'phonics') {\n          this.playPhonicsSound(sound.letter, sound.volume);\n        } else if (sound.type === 'sound') {\n          this.playSound(sound.name, sound.volume, sound.pitch);\n        }\n        \n        if (i < sounds.length - 1) {\n          await new Promise(resolve => setTimeout(resolve, delay));\n        }\n      }\n    }\n    \n    this.isProcessingQueue = false;\n  }\n\n  stop(name) {\n    const source = this.activeSources[name];\n    if (source) {\n      source.stop();\n      delete this.activeSources[name];\n    }\n  }\n\n  stopAll() {\n    Object.values(this.activeSources).forEach(source => {\n      if (source && typeof source.stop === 'function') {\n        source.stop();\n      }\n    });\n    this.activeSources = {};\n    this.activeSoundsCount = 0;\n  }\n\n  setMasterVolume(value) {\n    // Update cached volume and underlying gain without triggering setter recursion\n    this._volume = value;\n    if (this.masterGain) {\n      this.masterGain.gain.value = value;\n    }\n  }\n\n  // (Removed duplicate setGlobalVolume; kept alias in legacy section below)\n\n  setCategoryVolume(category, value) {\n    if (this.gains[category]) {\n      this.gains[category].gain.value = value;\n    }\n  }\n\n  // BEGIN LEGACY COMPATIBILITY HELPERS ---------------------------------\n  /**\n   * Legacy alias: maintain backward-compatibility with older game code\n   * that still calls soundManager.setGlobalVolume(value).\n   * Internally forwards to setMasterVolume.\n   * @param {number} value\n   */\n  setGlobalVolume(value) {\n    this.setMasterVolume(value);\n  }\n\n  /**\n   * Getter/Setter pair for direct volume access (0-1). Allows existing\n   * code that references soundManager.volume to continue to work while\n   * ensuring the masterGain node stays in sync.\n   */\n  get volume() {\n    return this._volume;\n  }\n\n  set volume(value) {\n    this.setMasterVolume(value);\n  }\n  // END LEGACY COMPATIBILITY HELPERS -----------------------------------\n\n  // Ensure AudioContext is running after user interaction\n  async resumeContext() {\n    if (this.audioContext.state === 'suspended') {\n      await this.audioContext.resume();\n    }\n  }\n\n  /**\n   * Fade a category gain to a target volume over a duration (ms)\n   * @param {string} category - 'sfx'|'music'|'ambient'|'phonics'\n   * @param {number} target - target gain value\n   * @param {number} duration - fade duration in milliseconds\n   */\n  fadeCategoryVolume(category, target, duration = 500) {\n    const gainNode = this.gains[category] || this.masterGain;\n    const now = this.audioContext.currentTime;\n    gainNode.gain.cancelScheduledValues(now);\n    gainNode.gain.setValueAtTime(gainNode.gain.value, now);\n    gainNode.gain.linearRampToValueAtTime(target, now + duration / 1000);\n  }\n\n  /**\n   * Mute all sounds (instant)\n   */\n  mute() {\n    this.setMasterVolume(0);\n  }\n\n  /**\n   * Unmute all sounds (restore to config master volume)\n   */\n  unmute() {\n    const { masterVolume } = getAudioConfig();\n    this.setMasterVolume(masterVolume);\n  }\n\n  /**\n   * Toggle mute state\n   */\n  toggleMute() {\n    if (this.masterGain.gain.value > 0) {\n      this.mute();\n    } else {\n      this.unmute();\n    }\n  }\n\n  /**\n   * Create dynamic sound effect\n   */\n  createDynamicSound(frequency, duration, type = 'sine', volume = 0.3) {\n    const oscillator = this.audioContext.createOscillator();\n    const gainNode = this.audioContext.createGain();\n    \n    oscillator.type = type;\n    oscillator.frequency.value = frequency;\n    \n    gainNode.gain.value = volume;\n    gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration);\n    \n    oscillator.connect(gainNode);\n    gainNode.connect(this.gains.sfx);\n    \n    oscillator.start();\n    oscillator.stop(this.audioContext.currentTime + duration);\n    \n    return oscillator;\n  }\n\n  /**\n   * Get audio context for advanced audio processing\n   */\n  getAudioContext() {\n    return this.audioContext;\n  }\n\n  /**\n   * Check if sound is available\n   */\n  hasSounds() {\n    return Object.keys(this.buffers).length > 0;\n  }\n\n  /**\n   * Get available sounds list\n   */\n  getAvailableSounds() {\n    return Object.keys(this.buffers);\n  }\n}\n","export class Renderer {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.setupCanvas();\n  }\n\n  setupCanvas() {\n    // Adjust canvas size and scale for high-DPI displays\n    const { width, height } = this.canvas.getBoundingClientRect();\n    this.canvas.width = width * (window.devicePixelRatio || 1);\n    this.canvas.height = height * (window.devicePixelRatio || 1);\n    this.canvas.style.width = width + 'px';\n    this.canvas.style.height = height + 'px';\n    this.ctx.scale(window.devicePixelRatio || 1, window.devicePixelRatio || 1);\n  }\n\n  clear() {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  // Add additional rendering helpers here\n}\n","// gameLoop.js: centralize main game loop control and timing\nexport class GameLoop {\n  constructor(updateFn, renderFn) {\n    this.updateFn = updateFn;\n    this.renderFn = renderFn;\n    this.lastTime = 0;\n    this.running = false;\n  }\n\n  start() {\n    this.running = true;\n    this.lastTime = performance.now();\n    this._loop();\n  }\n\n  stop() {\n    this.running = false;\n  }\n\n  _loop() {\n    if (!this.running) return;\n    const now = performance.now();\n    const deltaTime = now - this.lastTime;\n    this.lastTime = now;\n    this.lastDeltaTime = deltaTime; // Store for use by particle system\n    this.updateFn(deltaTime);\n    this.renderFn();\n    requestAnimationFrame(() => this._loop());\n  }\n}\n","export default class HudManager {\n  constructor(canvas, ctx) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.score = 0;\n    this.level = 1;\n    this.lives = 3;\n    this.abilities = {\n      flamethrower: { cooldown: 0, maxCooldown: 5000 },\n      explosion: { cooldown: 0, maxCooldown: 3000 }\n    };\n    this.fontSize = Math.min(canvas.width, canvas.height) * 0.03;\n  }\n\n  updateScore(points) {\n    this.score += points;\n  }\n\n  updateLevel(newLevel) {\n    this.level = newLevel;\n  }\n\n  updateLives(newLives) {\n    this.lives = newLives;\n  }\n\n  updateAbilityCooldown(abilityName, cooldown) {\n    if (this.abilities[abilityName]) {\n      this.abilities[abilityName].cooldown = Math.max(0, cooldown);\n    }\n  }\n\n  isAbilityReady(abilityName) {\n    return this.abilities[abilityName]?.cooldown === 0;\n  }\n\n  draw() {\n    this.ctx.save();\n    this.ctx.fillStyle = '#FFFFFF';\n    this.ctx.font = `${this.fontSize}px Arial`;\n    this.ctx.textAlign = 'left';\n\n    // Score\n    this.ctx.fillText(`Score: ${this.score}`, 20, 40);\n    \n    // Level\n    this.ctx.fillText(`Level: ${this.level}`, 20, 80);\n    \n    // Lives\n    this.ctx.fillText(`Lives: ${this.lives}`, 20, 120);\n\n    // Ability cooldowns\n    let yOffset = 160;\n    Object.entries(this.abilities).forEach(([name, ability]) => {\n      const cooldownPercent = ability.cooldown / ability.maxCooldown;\n      const color = cooldownPercent > 0 ? '#FF6B6B' : '#4ECDC4';\n      \n      this.ctx.fillStyle = color;\n      this.ctx.fillText(`${name}: ${cooldownPercent > 0 ? (ability.cooldown / 1000).toFixed(1) + 's' : 'Ready'}`, 20, yOffset);\n      yOffset += 40;\n    });\n\n    this.ctx.restore();\n  }\n\n  update(deltaTime) {\n    // Update ability cooldowns\n    Object.values(this.abilities).forEach(ability => {\n      if (ability.cooldown > 0) {\n        ability.cooldown = Math.max(0, ability.cooldown - deltaTime);\n      }\n    });\n  }\n\n  resize(canvas) {\n    this.canvas = canvas;\n    this.fontSize = Math.min(canvas.width, canvas.height) * 0.03;\n  }\n}\n","export default class CheckpointManager {\n  constructor(canvas, ctx) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.isActive = false;\n    this.currentMessage = '';\n    this.fadeAlpha = 0;\n    this.fadeDirection = 1;\n    this.displayTime = 0;\n    this.maxDisplayTime = 3000; // 3 seconds\n  }\n\n  showCheckpoint(message) {\n    this.isActive = true;\n    this.currentMessage = message;\n    this.fadeAlpha = 0;\n    this.fadeDirection = 1;\n    this.displayTime = 0;\n  }\n\n  update(deltaTime) {\n    if (!this.isActive) return;\n\n    this.displayTime += deltaTime;\n\n    // Fade in/out animation\n    if (this.fadeDirection === 1) {\n      this.fadeAlpha += deltaTime * 0.003; // Fade in speed\n      if (this.fadeAlpha >= 1) {\n        this.fadeAlpha = 1;\n        this.fadeDirection = 0; // Hold\n      }\n    } else if (this.fadeDirection === 0) {\n      // Hold for a moment\n      if (this.displayTime > this.maxDisplayTime * 0.7) {\n        this.fadeDirection = -1; // Start fade out\n      }\n    } else if (this.fadeDirection === -1) {\n      this.fadeAlpha -= deltaTime * 0.003; // Fade out speed\n      if (this.fadeAlpha <= 0) {\n        this.fadeAlpha = 0;\n        this.isActive = false;\n      }\n    }\n  }\n\n  draw() {\n    if (!this.isActive || this.fadeAlpha === 0) return;\n\n    this.ctx.save();\n    \n    // Semi-transparent overlay\n    this.ctx.fillStyle = `rgba(0, 0, 0, ${0.5 * this.fadeAlpha})`;\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    // Checkpoint message\n    const fontSize = Math.min(this.canvas.width, this.canvas.height) * 0.08;\n    this.ctx.font = `${fontSize}px Arial`;\n    this.ctx.fillStyle = `rgba(255, 255, 255, ${this.fadeAlpha})`;\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    \n    const centerX = this.canvas.width / 2;\n    const centerY = this.canvas.height / 2;\n    \n    // Add glow effect\n    this.ctx.shadowColor = '#4ECDC4';\n    this.ctx.shadowBlur = 20 * this.fadeAlpha;\n    \n    this.ctx.fillText(this.currentMessage, centerX, centerY);\n\n    // Subtitle\n    const subtitleFontSize = fontSize * 0.4;\n    this.ctx.font = `${subtitleFontSize}px Arial`;\n    this.ctx.shadowBlur = 10 * this.fadeAlpha;\n    this.ctx.fillText('Checkpoint Reached!', centerX, centerY + fontSize);\n\n    this.ctx.restore();\n  }\n\n  isDisplaying() {\n    return this.isActive;\n  }\n\n  skipCheckpoint() {\n    this.isActive = false;\n    this.fadeAlpha = 0;\n  }\n}\n","export default class FlamethrowerManager {\n  constructor(canvas, ctx, particleManager) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.particleManager = particleManager;\n    this.activeFlames = [];\n    this.maxFlames = 10;\n  }\n\n  createFlamethrower(startX, startY, endX, endY, color = '#FF6B6B', duration = 1000) {\n    if (this.activeFlames.length >= this.maxFlames) return;\n\n    const flame = {\n      startX,\n      startY,\n      endX,\n      endY,\n      color,\n      duration,\n      age: 0,\n      intensity: 1,\n      particles: []\n    };\n\n    this.activeFlames.push(flame);\n    this.generateFlameParticles(flame);\n  }\n\n  generateFlameParticles(flame) {\n    const distance = Math.sqrt(\n      Math.pow(flame.endX - flame.startX, 2) + \n      Math.pow(flame.endY - flame.startY, 2)\n    );\n    \n    const particleCount = Math.min(Math.floor(distance / 10), 50);\n    \n    for (let i = 0; i < particleCount; i++) {\n      const progress = i / particleCount;\n      const x = flame.startX + (flame.endX - flame.startX) * progress;\n      const y = flame.startY + (flame.endY - flame.startY) * progress;\n      \n      // Add some randomness\n      const offsetX = (Math.random() - 0.5) * 20;\n      const offsetY = (Math.random() - 0.5) * 20;\n      \n      // Particle velocity\n      const dx = (Math.random() - 0.5) * 2;\n      const dy = (Math.random() - 0.5) * 2;\n      \n      // Color variations\n      const colors = ['#FF6B6B', '#FF8E53', '#FF6B35', '#FFD93D'];\n      const color = colors[Math.floor(Math.random() * colors.length)];\n      \n      this.particleManager.createParticle(\n        x + offsetX,\n        y + offsetY,\n        color,\n        Math.random() * 4 + 2, // size\n        dx,\n        dy,\n        500 + Math.random() * 500 // duration\n      );\n    }\n  }\n\n  update(deltaTime) {\n    this.activeFlames = this.activeFlames.filter(flame => {\n      flame.age += deltaTime;\n      flame.intensity = Math.max(0, 1 - (flame.age / flame.duration));\n      \n      // Generate more particles during the flame's lifetime\n      if (flame.intensity > 0.3 && Math.random() < 0.1) {\n        this.generateFlameParticles(flame);\n      }\n      \n      return flame.age < flame.duration;\n    });\n  }\n\n  draw() {\n    this.ctx.save();\n    \n    this.activeFlames.forEach(flame => {\n      if (flame.intensity <= 0) return;\n      \n      // Draw laser beam\n      this.ctx.globalAlpha = flame.intensity * 0.8;\n      this.ctx.strokeStyle = flame.color;\n      this.ctx.lineWidth = 4 * flame.intensity;\n      this.ctx.shadowColor = flame.color;\n      this.ctx.shadowBlur = 10 * flame.intensity;\n      \n      this.ctx.beginPath();\n      this.ctx.moveTo(flame.startX, flame.startY);\n      this.ctx.lineTo(flame.endX, flame.endY);\n      this.ctx.stroke();\n      \n      // Draw core beam\n      this.ctx.globalAlpha = flame.intensity;\n      this.ctx.strokeStyle = '#FFFFFF';\n      this.ctx.lineWidth = 2 * flame.intensity;\n      this.ctx.shadowBlur = 5 * flame.intensity;\n      \n      this.ctx.beginPath();\n      this.ctx.moveTo(flame.startX, flame.startY);\n      this.ctx.lineTo(flame.endX, flame.endY);\n      this.ctx.stroke();\n    });\n    \n    this.ctx.restore();\n  }\n\n  checkCollision(targetX, targetY, targetRadius) {\n    return this.activeFlames.some(flame => {\n      if (flame.intensity <= 0) return false;\n      \n      // Check if target intersects with flame line\n      const A = flame.endY - flame.startY;\n      const B = flame.startX - flame.endX;\n      const C = flame.endX * flame.startY - flame.startX * flame.endY;\n      \n      const distance = Math.abs(A * targetX + B * targetY + C) / Math.sqrt(A * A + B * B);\n      \n      return distance <= targetRadius;\n    });\n  }\n\n  clear() {\n    this.activeFlames = [];\n  }\n}\n","export default class CenterPieceManager {\n  constructor(canvas, ctx, particleManager) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.particleManager = particleManager;\n    this.centerX = canvas.width / 2;\n    this.centerY = canvas.height / 2;\n    this.radius = Math.max(10, Math.min(canvas.width, canvas.height) * 0.1);\n    this.rotation = 0;\n    this.pulsePhase = 0;\n    this.swirlParticles = [];\n    this.lastParticleTime = 0;\n  }\n\n  update(deltaTime) {\n    this.rotation += deltaTime * 0.002;\n    this.pulsePhase += deltaTime * 0.003;\n    \n    // Generate swirl particles\n    this.lastParticleTime += deltaTime;\n    if (this.lastParticleTime > 100) { // Every 100ms\n      this.generateSwirlParticle();\n      this.lastParticleTime = 0;\n    }\n    \n    // Update swirl particles\n    this.swirlParticles = this.swirlParticles.filter(particle => {\n      particle.angle += particle.speed;\n      particle.radius += particle.radiusSpeed;\n      particle.life -= deltaTime;\n      \n      particle.x = this.centerX + Math.cos(particle.angle) * particle.radius;\n      particle.y = this.centerY + Math.sin(particle.angle) * particle.radius;\n      \n      return particle.life > 0 && particle.radius < this.canvas.width;\n    });\n  }\n\n  generateSwirlParticle() {\n    const particle = {\n      angle: Math.random() * Math.PI * 2,\n      radius: this.radius,\n      radiusSpeed: 0.5 + Math.random() * 1,\n      speed: 0.02 + Math.random() * 0.03,\n      x: this.centerX,\n      y: this.centerY,\n      color: this.getRandomColor(),\n      size: 2 + Math.random() * 3,\n      life: 3000 + Math.random() * 2000\n    };\n    \n    this.swirlParticles.push(particle);\n  }\n\n  getRandomColor() {\n    const colors = ['#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57', '#FF6B6B'];\n    return colors[Math.floor(Math.random() * colors.length)];\n  }\n\n  draw() {\n    this.ctx.save();\n    \n    // Draw center piece\n    let pulseSize = this.radius + Math.sin(this.pulsePhase) * 10;\n    if (pulseSize < 2) pulseSize = 2;\n    \n    // Outer glow\n    this.ctx.shadowColor = '#4ECDC4';\n    this.ctx.shadowBlur = 20;\n    this.ctx.fillStyle = 'rgba(78, 205, 196, 0.3)';\n    this.ctx.beginPath();\n    this.ctx.arc(this.centerX, this.centerY, pulseSize * 1.5, 0, Math.PI * 2);\n    this.ctx.fill();\n    \n    // Main center piece\n    this.ctx.shadowBlur = 10;\n    this.ctx.fillStyle = '#4ECDC4';\n    this.ctx.beginPath();\n    this.ctx.arc(this.centerX, this.centerY, pulseSize, 0, Math.PI * 2);\n    this.ctx.fill();\n    \n    // Inner core\n    this.ctx.shadowBlur = 5;\n    this.ctx.fillStyle = '#FFFFFF';\n    this.ctx.beginPath();\n    this.ctx.arc(this.centerX, this.centerY, pulseSize * 0.6, 0, Math.PI * 2);\n    this.ctx.fill();\n    \n    // Rotating spokes\n    this.ctx.strokeStyle = '#FFFFFF';\n    this.ctx.lineWidth = 2;\n    this.ctx.shadowBlur = 8;\n    \n    for (let i = 0; i < 8; i++) {\n      const angle = this.rotation + (i * Math.PI / 4);\n      const startRadius = pulseSize * 0.7;\n      const endRadius = pulseSize * 1.2;\n      \n      const startX = this.centerX + Math.cos(angle) * startRadius;\n      const startY = this.centerY + Math.sin(angle) * startRadius;\n      const endX = this.centerX + Math.cos(angle) * endRadius;\n      const endY = this.centerY + Math.sin(angle) * endRadius;\n      \n      this.ctx.beginPath();\n      this.ctx.moveTo(startX, startY);\n      this.ctx.lineTo(endX, endY);\n      this.ctx.stroke();\n    }\n    \n    // Draw swirl particles\n    this.swirlParticles.forEach(particle => {\n      const alpha = particle.life / 3000;\n      this.ctx.globalAlpha = alpha;\n      this.ctx.fillStyle = particle.color;\n      this.ctx.shadowBlur = 5;\n      this.ctx.shadowColor = particle.color;\n      \n      this.ctx.beginPath();\n      this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);\n      this.ctx.fill();\n    });\n    \n    this.ctx.restore();\n  }\n\n  checkCollision(x, y, radius) {\n    const distance = Math.sqrt(\n      Math.pow(x - this.centerX, 2) + \n      Math.pow(y - this.centerY, 2)\n    );\n    return distance < (this.radius + radius);\n  }\n\n  resize(canvas) {\n    this.canvas = canvas;\n    this.centerX = canvas.width / 2;\n    this.centerY = canvas.height / 2;\n    this.radius = Math.max(10, Math.min(canvas.width, canvas.height) * 0.1);\n  }\n\n  reset() {\n    this.swirlParticles = [];\n    this.rotation = 0;\n    this.pulsePhase = 0;\n  }\n}\n","export default class MultiTouchManager {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.pointers = new Map();\n    this.callbacks = {\n      pointerdown: [],\n      pointermove: [],\n      pointerup: []\n    };\n    // Bind handlers once so we can both add and remove them reliably\n    this._boundPointerDown = this.handlePointerDown.bind(this);\n    this._boundPointerMove = this.handlePointerMove.bind(this);\n    this._boundPointerUp = this.handlePointerUp.bind(this);\n    this._boundPreventDefault = (e) => e.preventDefault();\n\n    this.setupEventListeners();\n  }\n\n  setupEventListeners() {\n    // Pointer events (supports mouse, touch, pen)\n    this.canvas.addEventListener('pointerdown', this._boundPointerDown);\n    this.canvas.addEventListener('pointermove', this._boundPointerMove);\n    this.canvas.addEventListener('pointerup', this._boundPointerUp);\n    this.canvas.addEventListener('pointercancel', this._boundPointerUp);\n\n    // Prevent default touch behaviors\n    this.canvas.addEventListener('touchstart', this._boundPreventDefault);\n    this.canvas.addEventListener('touchmove', this._boundPreventDefault);\n    this.canvas.addEventListener('touchend', this._boundPreventDefault);\n  }\n\n  handlePointerDown(e) {\n    const rect = this.canvas.getBoundingClientRect();\n    const pointer = {\n      id: e.pointerId,\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top,\n      startX: e.clientX - rect.left,\n      startY: e.clientY - rect.top,\n      type: e.pointerType,\n      pressure: e.pressure || 1,\n      startTime: performance.now()\n    };\n    \n    this.pointers.set(e.pointerId, pointer);\n    this.triggerCallbacks('pointerdown', pointer, e);\n  }\n\n  handlePointerMove(e) {\n    if (!this.pointers.has(e.pointerId)) return;\n    \n    const rect = this.canvas.getBoundingClientRect();\n    const pointer = this.pointers.get(e.pointerId);\n    \n    pointer.x = e.clientX - rect.left;\n    pointer.y = e.clientY - rect.top;\n    pointer.pressure = e.pressure || 1;\n    \n    this.triggerCallbacks('pointermove', pointer, e);\n  }\n\n  handlePointerUp(e) {\n    if (!this.pointers.has(e.pointerId)) return;\n    \n    const pointer = this.pointers.get(e.pointerId);\n    pointer.endTime = performance.now();\n    \n    this.triggerCallbacks('pointerup', pointer, e);\n    this.pointers.delete(e.pointerId);\n  }\n\n  triggerCallbacks(eventType, pointer, originalEvent) {\n    this.callbacks[eventType].forEach(callback => {\n      try {\n        callback(pointer, originalEvent);\n      } catch (error) {\n        console.error(`Error in ${eventType} callback:`, error);\n      }\n    });\n  }\n\n  addEventListener(eventType, callback) {\n    if (this.callbacks[eventType]) {\n      this.callbacks[eventType].push(callback);\n    }\n  }\n\n  removeEventListener(eventType, callback) {\n    if (this.callbacks[eventType]) {\n      const index = this.callbacks[eventType].indexOf(callback);\n      if (index > -1) {\n        this.callbacks[eventType].splice(index, 1);\n      }\n    }\n  }\n\n  getActivePointers() {\n    return Array.from(this.pointers.values());\n  }\n\n  getPointerCount() {\n    return this.pointers.size;\n  }\n\n  getPointer(id) {\n    return this.pointers.get(id);\n  }\n\n  isMultiTouch() {\n    return this.pointers.size > 1;\n  }\n\n  getPinchDistance() {\n    const pointers = this.getActivePointers();\n    if (pointers.length < 2) return null;\n    \n    const [p1, p2] = pointers;\n    return Math.sqrt(\n      Math.pow(p2.x - p1.x, 2) + \n      Math.pow(p2.y - p1.y, 2)\n    );\n  }\n\n  getPinchCenter() {\n    const pointers = this.getActivePointers();\n    if (pointers.length < 2) return null;\n    \n    const [p1, p2] = pointers;\n    return {\n      x: (p1.x + p2.x) / 2,\n      y: (p1.y + p2.y) / 2\n    };\n  }\n\n  clear() {\n    this.pointers.clear();\n  }\n\n  destroy() {\n    this.canvas.removeEventListener('pointerdown', this._boundPointerDown);\n    this.canvas.removeEventListener('pointermove', this._boundPointerMove);\n    this.canvas.removeEventListener('pointerup', this._boundPointerUp);\n    this.canvas.removeEventListener('pointercancel', this._boundPointerUp);\n\n    this.canvas.removeEventListener('touchstart', this._boundPreventDefault);\n    this.canvas.removeEventListener('touchmove', this._boundPreventDefault);\n    this.canvas.removeEventListener('touchend', this._boundPreventDefault);\n    this.clear();\n  }\n}\n","export default class GlassShatterManager {\n  constructor(canvas, ctx, particleManager) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.particleManager = particleManager;\n    \n    // State management\n    this.isShattered = false;\n    this.shatterTime = 0;\n    this.maxShatterTime = 3000;\n    this.fadeAlpha = 0;\n    \n    // Advanced crack system\n    this.cracks = [];\n    this.fragments = [];\n    this.stressPoints = [];\n    \n    // Physics parameters\n    this.physics = {\n      gravity: 0.3,\n      friction: 0.98,\n      elasticity: 0.4,\n      fragmentCount: 25,\n      crackPropagationSpeed: 300,\n      stressFieldRadius: 150\n    };\n    \n    // Visual effects\n    this.effects = {\n      refractionIntensity: 0.8,\n      reflectionIntensity: 0.6,\n      glowIntensity: 0.4,\n      shimmerPhase: 0\n    };\n    \n    // Performance optimization\n    this.performanceLevel = this.detectPerformanceLevel();\n    this.adjustSettingsForPerformance();\n  }\n\n  detectPerformanceLevel() {\n    // Simple performance detection based on canvas size and device\n    const pixelCount = this.canvas.width * this.canvas.height;\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n    \n    if (isMobile || pixelCount > 1920 * 1080) {\n      return 'low';\n    } else if (pixelCount > 1280 * 720) {\n      return 'medium';\n    }\n    return 'high';\n  }\n\n  adjustSettingsForPerformance() {\n    switch (this.performanceLevel) {\n      case 'low':\n        this.physics.fragmentCount = 15;\n        this.physics.crackPropagationSpeed = 200;\n        this.effects.refractionIntensity = 0.4;\n        break;\n      case 'medium':\n        this.physics.fragmentCount = 20;\n        this.physics.crackPropagationSpeed = 250;\n        this.effects.refractionIntensity = 0.6;\n        break;\n      case 'high':\n        // Use default settings\n        break;\n    }\n  }\n\n  createShatterEffect(impactX, impactY, intensity = 1) {\n    this.reset();\n    this.isShattered = true;\n    this.fadeAlpha = Math.min(1, 0.9 * intensity);\n    this.shatterTime = 0;\n    \n    // Create impact point\n    const impactPoint = {\n      x: impactX,\n      y: impactY,\n      intensity: intensity,\n      radius: Math.min(100, 50 * intensity)\n    };\n    \n    // Generate realistic crack propagation\n    this.generateRealisticCracks(impactPoint);\n    \n    // Create glass fragments with physics\n    this.generateGlassFragments(impactPoint);\n    \n    // Add stress field visualization\n    this.createStressField(impactPoint);\n    \n    // Enhanced particle effects\n    this.createAdvancedParticles(impactPoint);\n  }\n\n  generateRealisticCracks(impactPoint) {\n    const { x, y, intensity } = impactPoint;\n    this.cracks = [];\n    \n    // Primary radial cracks\n    const numPrimary = Math.floor(6 + intensity * 8);\n    for (let i = 0; i < numPrimary; i++) {\n      const angle = (i / numPrimary) * Math.PI * 2 + (Math.random() - 0.5) * 0.5;\n      const crack = this.createCrackLine(x, y, angle, intensity, 'primary');\n      this.cracks.push(crack);\n    }\n    \n    // Secondary branching cracks\n    const numSecondary = Math.floor(4 + intensity * 6);\n    for (let i = 0; i < numSecondary; i++) {\n      const angle = Math.random() * Math.PI * 2;\n      const distance = 50 + Math.random() * 80;\n      const startX = x + Math.cos(angle) * distance;\n      const startY = y + Math.sin(angle) * distance;\n      const crack = this.createCrackLine(startX, startY, angle + Math.PI/2, intensity * 0.7, 'secondary');\n      this.cracks.push(crack);\n    }\n    \n    // Circular stress cracks\n    const numCircular = Math.floor(2 + intensity * 3);\n    for (let i = 0; i < numCircular; i++) {\n      const radius = 30 + i * 25 + Math.random() * 20;\n      const crack = this.createCircularCrack(x, y, radius, intensity);\n      this.cracks.push(crack);\n    }\n  }\n\n  createCrackLine(startX, startY, angle, intensity, type) {\n    const crack = {\n      points: [],\n      type: type,\n      width: type === 'primary' ? 2 + intensity : 1 + intensity * 0.5,\n      opacity: 0.8,\n      propagationSpeed: this.physics.crackPropagationSpeed,\n      currentLength: 0,\n      targetLength: (type === 'primary' ? 150 : 80) + Math.random() * 100 * intensity\n    };\n    \n    // Generate crack path with realistic imperfections\n    const segments = Math.floor(crack.targetLength / 10);\n    let currentX = startX;\n    let currentY = startY;\n    let currentAngle = angle;\n    \n    for (let i = 0; i <= segments; i++) {\n      const progress = i / segments;\n      const segmentLength = 10 + Math.random() * 5;\n      \n      // Add natural deviation\n      const deviation = (Math.random() - 0.5) * 0.3 * progress;\n      currentAngle += deviation;\n      \n      // Add stress-based branching\n      if (Math.random() < 0.1 * intensity && i > 2) {\n        const branchAngle = currentAngle + (Math.random() - 0.5) * Math.PI/3;\n        const branchLength = segmentLength * (0.5 + Math.random() * 0.5);\n        const branchX = currentX + Math.cos(branchAngle) * branchLength;\n        const branchY = currentY + Math.sin(branchAngle) * branchLength;\n        \n        crack.points.push({\n          x: branchX,\n          y: branchY,\n          isBranch: true,\n          opacity: 0.6\n        });\n      }\n      \n      currentX += Math.cos(currentAngle) * segmentLength;\n      currentY += Math.sin(currentAngle) * segmentLength;\n      \n      // Check boundaries\n      if (currentX < 0 || currentX > this.canvas.width || currentY < 0 || currentY > this.canvas.height) {\n        break;\n      }\n      \n      crack.points.push({\n        x: currentX,\n        y: currentY,\n        isBranch: false,\n        opacity: 0.8 * (1 - progress * 0.3)\n      });\n    }\n    \n    return crack;\n  }\n\n  createCircularCrack(centerX, centerY, radius, intensity) {\n    const crack = {\n      points: [],\n      type: 'circular',\n      width: 1 + intensity * 0.5,\n      opacity: 0.6,\n      propagationSpeed: this.physics.crackPropagationSpeed * 0.7,\n      currentLength: 0,\n      targetLength: radius * Math.PI * 2\n    };\n    \n    const segments = Math.floor(radius * 0.3);\n    for (let i = 0; i < segments; i++) {\n      const angle = (i / segments) * Math.PI * 2;\n      const deviation = (Math.random() - 0.5) * 15;\n      const x = centerX + Math.cos(angle) * (radius + deviation);\n      const y = centerY + Math.sin(angle) * (radius + deviation);\n      \n      crack.points.push({\n        x: x,\n        y: y,\n        isBranch: false,\n        opacity: 0.6\n      });\n    }\n    \n    return crack;\n  }\n\n  generateGlassFragments(impactPoint) {\n    this.fragments = [];\n    const { x, y, intensity } = impactPoint;\n    \n    for (let i = 0; i < this.physics.fragmentCount; i++) {\n      const angle = Math.random() * Math.PI * 2;\n      const distance = Math.random() * 80 * intensity;\n      const size = 3 + Math.random() * 8;\n      \n      const fragment = {\n        x: x + Math.cos(angle) * distance,\n        y: y + Math.sin(angle) * distance,\n        vx: Math.cos(angle) * (2 + Math.random() * 6) * intensity,\n        vy: Math.sin(angle) * (2 + Math.random() * 6) * intensity - Math.random() * 2,\n        size: size,\n        rotation: Math.random() * Math.PI * 2,\n        rotationSpeed: (Math.random() - 0.5) * 0.3,\n        opacity: 0.7 + Math.random() * 0.3,\n        color: this.getGlassColor(),\n        life: 1.0,\n        decay: 0.0003 + Math.random() * 0.0002\n      };\n      \n      this.fragments.push(fragment);\n    }\n  }\n\n  createStressField(impactPoint) {\n    this.stressPoints = [];\n    const { x, y, intensity, radius } = impactPoint;\n    \n    // Create stress visualization points\n    const stressCount = Math.floor(15 + intensity * 10);\n    for (let i = 0; i < stressCount; i++) {\n      const angle = Math.random() * Math.PI * 2;\n      const distance = Math.random() * radius;\n      \n      this.stressPoints.push({\n        x: x + Math.cos(angle) * distance,\n        y: y + Math.sin(angle) * distance,\n        intensity: intensity * (1 - distance / radius),\n        phase: Math.random() * Math.PI * 2,\n        radius: 2 + Math.random() * 4\n      });\n    }\n  }\n\n  createAdvancedParticles(impactPoint) {\n    const { x, y, intensity } = impactPoint;\n    const particleCount = Math.floor(40 + intensity * 80);\n    \n    for (let i = 0; i < particleCount; i++) {\n      const angle = Math.random() * Math.PI * 2;\n      const speed = 2 + Math.random() * 5;\n      const distance = Math.random() * 60;\n      \n      const startX = x + Math.cos(angle) * distance;\n      const startY = y + Math.sin(angle) * distance;\n      \n      const dx = Math.cos(angle) * speed;\n      const dy = Math.sin(angle) * speed + Math.random() * 1;\n      \n      const size = 1 + Math.random() * 3;\n      const duration = 800 + Math.random() * 1500;\n      \n      const color = this.getGlassParticleColor();\n      this.particleManager.createParticle(startX, startY, color, size, dx, dy, duration);\n    }\n  }\n\n  getGlassColor() {\n    const colors = [\n      'rgba(255, 255, 255, 0.9)',\n      'rgba(240, 248, 255, 0.8)',\n      'rgba(220, 235, 255, 0.7)',\n      'rgba(200, 230, 255, 0.8)'\n    ];\n    return colors[Math.floor(Math.random() * colors.length)];\n  }\n\n  getGlassParticleColor() {\n    const colors = [\n      'rgba(255, 255, 255, 0.9)',\n      'rgba(180, 220, 255, 0.7)',\n      'rgba(200, 240, 255, 0.8)',\n      'rgba(160, 200, 255, 0.6)'\n    ];\n    return colors[Math.floor(Math.random() * colors.length)];\n  }\n\n  update(deltaTime) {\n    if (!this.isShattered) return;\n    \n    this.shatterTime += deltaTime;\n    const dt = deltaTime / 16; // Normalize to 60fps\n    \n    // Update fade effect\n    const fadeProgress = this.shatterTime / this.maxShatterTime;\n    this.fadeAlpha = Math.max(0, 0.9 * (1 - fadeProgress));\n    \n    // Update shimmer effect\n    this.effects.shimmerPhase += 0.1 * dt;\n    \n    // Update crack propagation\n    this.updateCrackPropagation(dt);\n    \n    // Update glass fragments\n    this.updateFragments(dt);\n    \n    // Update stress field\n    this.updateStressField(dt);\n    \n    // Cleanup when done\n    if (this.shatterTime >= this.maxShatterTime) {\n      this.reset();\n    }\n  }\n\n  updateCrackPropagation(dt) {\n    this.cracks.forEach(crack => {\n      if (crack.currentLength < crack.targetLength) {\n        crack.currentLength += crack.propagationSpeed * dt;\n        crack.currentLength = Math.min(crack.currentLength, crack.targetLength);\n      }\n    });\n  }\n\n  updateFragments(dt) {\n    this.fragments.forEach(fragment => {\n      // Apply physics\n      fragment.x += fragment.vx * dt;\n      fragment.y += fragment.vy * dt;\n      fragment.vy += this.physics.gravity * dt;\n      \n      // Apply friction\n      fragment.vx *= this.physics.friction;\n      fragment.vy *= this.physics.friction;\n      \n      // Update rotation\n      fragment.rotation += fragment.rotationSpeed * dt;\n      \n      // Update life\n      fragment.life -= fragment.decay * dt;\n      fragment.opacity = Math.max(0, fragment.life * 0.8);\n      \n      // Boundary collision\n      if (fragment.x < 0 || fragment.x > this.canvas.width) {\n        fragment.vx *= -this.physics.elasticity;\n      }\n      if (fragment.y > this.canvas.height) {\n        fragment.vy *= -this.physics.elasticity;\n        fragment.y = this.canvas.height;\n      }\n    });\n    \n    // Remove dead fragments\n    this.fragments = this.fragments.filter(f => f.life > 0);\n  }\n\n  updateStressField(dt) {\n    this.stressPoints.forEach(point => {\n      point.phase += 0.15 * dt;\n      point.intensity *= 0.995; // Gradual fade\n    });\n  }\n\n  draw() {\n    if (!this.isShattered || this.fadeAlpha <= 0) return;\n    \n    this.ctx.save();\n    \n    // Draw stress field (subtle background effect)\n    this.drawStressField();\n    \n    // Draw crack patterns\n    this.drawCracks();\n    \n    // Draw glass fragments\n    this.drawFragments();\n    \n    // Draw refraction effect\n    this.drawRefractionEffect();\n    \n    this.ctx.restore();\n  }\n\n  drawStressField() {\n    this.ctx.globalAlpha = this.fadeAlpha * 0.3;\n    this.stressPoints.forEach(point => {\n      const intensity = point.intensity * (1 + Math.sin(point.phase) * 0.3);\n      const radius = point.radius * intensity;\n      \n      const gradient = this.ctx.createRadialGradient(\n        point.x, point.y, 0,\n        point.x, point.y, radius\n      );\n      gradient.addColorStop(0, `rgba(255, 255, 255, ${intensity * 0.4})`);\n      gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n      \n      this.ctx.fillStyle = gradient;\n      this.ctx.beginPath();\n      this.ctx.arc(point.x, point.y, radius, 0, Math.PI * 2);\n      this.ctx.fill();\n    });\n  }\n\n  drawCracks() {\n    this.ctx.globalAlpha = this.fadeAlpha;\n    this.ctx.lineCap = 'round';\n    this.ctx.lineJoin = 'round';\n    \n    this.cracks.forEach(crack => {\n      if (crack.points.length < 2) return;\n      \n      const drawLength = Math.min(crack.currentLength, crack.targetLength);\n      const pointsCount = Math.floor((drawLength / crack.targetLength) * crack.points.length);\n      \n      // Main crack line\n      this.ctx.strokeStyle = `rgba(255, 255, 255, ${crack.opacity})`;\n      this.ctx.lineWidth = crack.width;\n      this.ctx.shadowColor = 'rgba(255, 255, 255, 0.8)';\n      this.ctx.shadowBlur = crack.width * 2;\n      \n      this.ctx.beginPath();\n      if (pointsCount > 0) {\n        this.ctx.moveTo(crack.points[0].x, crack.points[0].y);\n        for (let i = 1; i < pointsCount; i++) {\n          const point = crack.points[i];\n          this.ctx.globalAlpha = this.fadeAlpha * point.opacity;\n          this.ctx.lineTo(point.x, point.y);\n        }\n      }\n      this.ctx.stroke();\n      \n      // Add shimmer effect\n      this.ctx.globalAlpha = this.fadeAlpha * 0.5 * (1 + Math.sin(this.effects.shimmerPhase) * 0.3);\n      this.ctx.strokeStyle = `rgba(180, 220, 255, 0.6)`;\n      this.ctx.lineWidth = crack.width * 0.5;\n      this.ctx.stroke();\n    });\n  }\n\n  drawFragments() {\n    this.fragments.forEach(fragment => {\n      this.ctx.save();\n      this.ctx.globalAlpha = fragment.opacity * this.fadeAlpha;\n      this.ctx.translate(fragment.x, fragment.y);\n      this.ctx.rotate(fragment.rotation);\n      \n      // Draw fragment with glass-like appearance\n      this.ctx.fillStyle = fragment.color;\n      this.ctx.beginPath();\n      this.ctx.rect(-fragment.size/2, -fragment.size/2, fragment.size, fragment.size);\n      this.ctx.fill();\n      \n      // Add highlight\n      this.ctx.globalAlpha = fragment.opacity * this.fadeAlpha * 0.8;\n      this.ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n      this.ctx.beginPath();\n      this.ctx.rect(-fragment.size/2, -fragment.size/2, fragment.size/3, fragment.size/3);\n      this.ctx.fill();\n      \n      this.ctx.restore();\n    });\n  }\n\n  drawRefractionEffect() {\n    if (this.effects.refractionIntensity <= 0) return;\n    \n    this.ctx.globalAlpha = this.fadeAlpha * this.effects.refractionIntensity * 0.3;\n    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  reset() {\n    this.isShattered = false;\n    this.shatterTime = 0;\n    this.fadeAlpha = 0;\n    this.cracks = [];\n    this.fragments = [];\n    this.stressPoints = [];\n    this.effects.shimmerPhase = 0;\n  }\n\n  isActive() {\n    return this.isShattered;\n  }\n\n  triggerShatter(x, y, intensity = 1) {\n    this.createShatterEffect(x, y, intensity);\n  }\n}\n","export class ProgressManager {\n  constructor() {\n    this.storageKey = 'superstudent_progress';\n    // Added 'phonics' to ensure it can be tracked/unlocked\n    this.levels = ['colors', 'shapes', 'alphabet', 'numbers', 'clcase', 'phonics'];\n    this.progress = this.loadProgress();\n  }\n\n  loadProgress() {\n    try {\n      const saved = localStorage.getItem(this.storageKey);\n      if (saved) {\n        return JSON.parse(saved);\n      }\n    } catch (error) {\n      console.warn('Failed to load progress:', error);\n    }\n    \n    // Default progress - start with only the first level unlocked so players earn progression\n    return {\n      unlockedLevels: ['colors'],\n      completedLevels: [],\n      scores: {},\n      totalScore: 0\n    };\n  }\n\n  saveProgress() {\n    try {\n      localStorage.setItem(this.storageKey, JSON.stringify(this.progress));\n    } catch (error) {\n      console.warn('Failed to save progress:', error);\n    }\n  }\n\n  isLevelUnlocked(levelName) {\n    return this.progress.unlockedLevels.includes(levelName);\n  }\n\n  isLevelCompleted(levelName) {\n    return this.progress.completedLevels.includes(levelName);\n  }\n\n  completeLevel(levelName, score = 0) {\n    // Mark as completed\n    if (!this.progress.completedLevels.includes(levelName)) {\n      this.progress.completedLevels.push(levelName);\n    }\n\n    // Update score\n    this.progress.scores[levelName] = Math.max(this.progress.scores[levelName] || 0, score);\n    this.progress.totalScore = Object.values(this.progress.scores).reduce((sum, s) => sum + s, 0);\n\n    // Unlock next level\n    const currentIndex = this.levels.indexOf(levelName);\n    if (currentIndex >= 0 && currentIndex < this.levels.length - 1) {\n      const nextLevel = this.levels[currentIndex + 1];\n      if (!this.progress.unlockedLevels.includes(nextLevel)) {\n        this.progress.unlockedLevels.push(nextLevel);\n      }\n    }\n\n    this.saveProgress();\n  }\n\n  getLevelScore(levelName) {\n    return this.progress.scores[levelName] || 0;\n  }\n\n  getProgress() {\n    return { ...this.progress };\n  }\n\n  resetProgress() {\n    // Reset to initial state (only first level unlocked)\n    this.progress = {\n      unlockedLevels: ['colors'],\n      completedLevels: [],\n      scores: {},\n      totalScore: 0\n    };\n    this.saveProgress();\n  }\n\n  getCompletionPercentage() {\n    return Math.round((this.progress.completedLevels.length / this.levels.length) * 100);\n  }\n}\n","export class BaseLevel {\n  // Accept core level parameters\n  constructor(canvas, ctx, managers, helpers) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.managers = managers;\n    this.helpers = helpers;\n    this.running = false;\n    this.score = 0;\n  }\n\n  async init() {\n    throw new Error('init() must be implemented by subclass');\n  }\n\n  update(deltaTime) {\n    throw new Error('update() must be implemented by subclass');\n  }\n\n  render() {\n    throw new Error('render() must be implemented by subclass');\n  }\n\n  cleanup() {\n    throw new Error('cleanup() must be implemented by subclass');\n  }\n\n  async start() {\n    await this.init();\n    this.running = true;\n  }\n\n  end() {\n    this.running = false;\n    this.cleanup();\n    \n    // Trigger completion callback if available\n    if (this.helpers && this.helpers.onLevelComplete) {\n      this.helpers.onLevelComplete(this.score);\n    }\n  }\n\n  // Pause the level\n  pause() {\n    this.running = false;\n  }\n\n  // Resume the level\n  resume() {\n    this.running = true;\n  }\n\n  // Reset the level state\n  reset() {\n    this.cleanup();\n    this.score = 0;\n    // Re-initialize level\n    this.init();\n  }\n\n  // Update score\n  updateScore(points) {\n    this.score = Math.max(0, this.score + points);\n    if (this.managers && this.managers.hud) {\n      this.managers.hud.updateScore(points);\n    }\n  }\n\n  // Handle canvas resize\n  resize(canvas) {\n    this.canvas = canvas;\n  }\n}\n","import { GAME_CONFIG } from './constants.js';\n\n/**\n * Provides level-specific parameters and rules.\n */\nexport const LevelSettings = {\n  colors: {\n    totalDots: GAME_CONFIG.COLORS_LEVEL_CONFIG?.TOTAL_DOTS || 85,\n    targetDots: GAME_CONFIG.COLORS_LEVEL_CONFIG?.TARGET_DOTS || 17,\n    distractorDots: GAME_CONFIG.COLORS_LEVEL_CONFIG?.DISTRACTOR_DOTS || 68,\n    dispersionFrames: GAME_CONFIG.COLORS_LEVEL_CONFIG?.DISPERSION_FRAMES || 30,\n    bounceDampening: GAME_CONFIG.COLORS_LEVEL_CONFIG?.DOT_BOUNCE_DAMPENING || 0.98,\n    shimmerFreq: GAME_CONFIG.COLORS_LEVEL_CONFIG?.SHIMMER_FREQUENCY || 0.05,\n    glowFreq: GAME_CONFIG.COLORS_LEVEL_CONFIG?.GLOW_FREQUENCY || 0.1,\n    memoryTime: GAME_CONFIG.COLORS_LEVEL_CONFIG?.MEMORY_DISPLAY_TIME || 2000,\n    collisionDelay: GAME_CONFIG.COLORS_LEVEL_CONFIG?.COLLISION_ENABLED_DELAY || 250\n  },\n  text: {\n    centerFontSize: GAME_CONFIG.TEXT_LEVEL_CONFIG?.CENTER_FONT_SIZE || 900,\n    fallingFontSize: GAME_CONFIG.TEXT_LEVEL_CONFIG?.FALLING_FONT_SIZE || 240,\n    spawnEdgeBuffer: GAME_CONFIG.TEXT_LEVEL_CONFIG?.SPAWN_EDGE_BUFFER || 50,\n    advanceCount: GAME_CONFIG.TEXT_LEVEL_CONFIG?.TARGET_ADVANCE_COUNT || 5,\n    checkpointInterval: GAME_CONFIG.TEXT_LEVEL_CONFIG?.CHECKPOINT_INTERVAL || 5,\n    abilities: GAME_CONFIG.TEXT_LEVEL_CONFIG?.ABILITIES || ['laser','aoe','charge_up'],\n    aoeRadius: GAME_CONFIG.TEXT_LEVEL_CONFIG?.AOE_RADIUS || 200,\n    chargeDuration: GAME_CONFIG.TEXT_LEVEL_CONFIG?.CHARGE_UP_DURATION || 60,\n    laserWidth: GAME_CONFIG.TEXT_LEVEL_CONFIG?.LASER_WIDTH || [3,5],\n    swirlCount: GAME_CONFIG.TEXT_LEVEL_CONFIG?.SWIRL_PARTICLE_COUNT || 30,\n    orbitRadius: GAME_CONFIG.TEXT_LEVEL_CONFIG?.CENTER_PIECE_ORBIT_RADIUS || 100\n  }\n};\n","import { BaseLevel } from './baseLevel.js';\nimport { GAME_CONFIG } from '../config/constants.js';\nimport { LevelSettings } from '../config/gameSettings.js';\n\nexport default class ColorsLevel extends BaseLevel {\n  constructor(canvas, ctx, managers, helpers) {\n    super(canvas, ctx, managers, helpers);\n    this.memoryTime = LevelSettings.colors.memoryTime;\n    this.dots = [];\n    this.state = 'memory';\n    this.targetDotsRemaining = 0;\n    this.onPointerDown = this.onPointerDown.bind(this);\n    \n    // Enhanced features\n    this.correctStreak = 0;\n    this.lastCorrectTime = 0;\n    this.levelStartTime = 0;\n  }\n\n  async init() {\n    // Choose first color in sequence\n    const colorsList = GAME_CONFIG.COLORS.COLORS_LIST;\n    this.targetColor = colorsList[0];\n    const rgb = this.targetColor.join(',');\n    this.mother = {\n      x: this.canvas.width / 2,\n      y: this.canvas.height / 2,\n      radius: this.managers?.displaySettings?.motherRadius || GAME_CONFIG.DOT_RADIUS,\n      color: `rgb(${rgb})`\n    };\n    \n    // Enhanced sound feedback\n    if (this.managers.sound) {\n      // Play level start sound\n      this.managers.sound.playSuccess();\n      \n      // Resume audio context\n      await this.managers.sound.resumeContext();\n    }\n    \n    // Show memory dot then disperse\n    this.canvas.addEventListener('pointerdown', this.onPointerDown);\n    this.levelStartTime = performance.now();\n    \n    setTimeout(() => this.disperse(), this.memoryTime);\n  }\n\n  disperse() {\n    this.state = 'playing';\n    const cfg = LevelSettings.colors;\n    const total = cfg.totalDots;\n    const targetCount = cfg.targetDots;\n    this.targetDotsRemaining = targetCount;\n    const others = GAME_CONFIG.COLORS.COLORS_LIST.filter(c => c !== this.targetColor);\n    \n    // Generate target dots\n    for (let i = 0; i < targetCount; i++) {\n      this.addDot(this.targetColor, true);\n    }\n    \n    // Generate distractor dots\n    for (let i = 0; i < total - targetCount; i++) {\n      const color = others[Math.floor(Math.random() * others.length)];\n      this.addDot(color, false);\n    }\n    \n    // Play dispersion sound effect\n    if (this.managers.sound) {\n      this.managers.sound.playPop(0.8);\n    }\n  }\n\n  addDot(colArray, isTarget) {\n    const angle = Math.random() * Math.PI * 2;\n    const speed = Math.random() * (GAME_CONFIG.DOT_SPEED_RANGE[1] - GAME_CONFIG.DOT_SPEED_RANGE[0]) + GAME_CONFIG.DOT_SPEED_RANGE[0];\n    const dot = {\n      x: this.mother.x,\n      y: this.mother.y,\n      radius: GAME_CONFIG.DOT_RADIUS,\n      color: `rgb(${colArray.join(',')})`,\n      dx: Math.cos(angle) * speed,\n      dy: Math.sin(angle) * speed,\n      isTarget: isTarget,\n      shimmer: Math.random() * Math.PI * 2,\n      pulsePhase: Math.random() * Math.PI * 2,\n      trail: []\n    };\n    this.dots.push(dot);\n  }\n\n  update(deltaTime) {\n    if (this.state !== 'playing') return;\n    \n    const dt = deltaTime / 16;\n    this.dots.forEach(dot => {\n      // Update position\n      dot.x += dot.dx * dt;\n      dot.y += dot.dy * dt;\n      \n      // Update visual effects\n      dot.shimmer += 0.1 * dt;\n      dot.pulsePhase += 0.05 * dt;\n      \n      // Add trail effect for target dots\n      if (dot.isTarget) {\n        dot.trail.push({ x: dot.x, y: dot.y, alpha: 1.0 });\n        if (dot.trail.length > 10) {\n          dot.trail.shift();\n        }\n        \n        // Fade trail\n        dot.trail.forEach((point, index) => {\n          point.alpha = (index + 1) / dot.trail.length * 0.5;\n        });\n      }\n      \n      // Bounce on edges with sound\n      if (dot.x - dot.radius < 0 || dot.x + dot.radius > this.canvas.width) {\n        dot.dx *= -1;\n        if (this.managers.sound && Math.random() < 0.1) {\n          this.managers.sound.playPop(0.3);\n        }\n      }\n      if (dot.y - dot.radius < 0 || dot.y + dot.radius > this.canvas.height) {\n        dot.dy *= -1;\n        if (this.managers.sound && Math.random() < 0.1) {\n          this.managers.sound.playPop(0.3);\n        }\n      }\n    });\n  }\n\n  render() {\n    if (this.state === 'memory') {\n      // Draw mother dot with enhanced effects\n      this.drawEnhancedDot(this.mother, true, true);\n      \n      // Draw instruction text\n      this.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n      this.ctx.font = 'bold 24px Arial';\n      this.ctx.textAlign = 'center';\n      this.ctx.fillText('Remember this color!', this.canvas.width / 2, 50);\n      \n    } else if (this.state === 'playing') {\n      // Draw moving dots with enhanced visuals\n      this.dots.forEach(dot => {\n        this.drawEnhancedDot(dot, dot.isTarget);\n      });\n      \n      // Draw UI\n      this.drawUI();\n    }\n  }\n\n  drawEnhancedDot(dot, isTarget = false, isMemory = false) {\n    this.ctx.save();\n    \n    // Draw trail for target dots\n    if (isTarget && dot.trail) {\n      dot.trail.forEach(point => {\n        this.ctx.globalAlpha = point.alpha;\n        this.ctx.fillStyle = dot.color;\n        this.ctx.beginPath();\n        this.ctx.arc(point.x, point.y, dot.radius * 0.5, 0, Math.PI * 2);\n        this.ctx.fill();\n      });\n    }\n    \n    // Draw main dot with effects\n    this.ctx.globalAlpha = 1.0;\n    \n    // Glow effect for target dots\n    if (isTarget || isMemory) {\n      const glowIntensity = 0.5 + Math.sin(dot.pulsePhase || 0) * 0.3;\n      this.ctx.shadowColor = dot.color;\n      this.ctx.shadowBlur = 20 * glowIntensity;\n    }\n    \n    // Shimmer effect\n    const shimmerOffset = Math.sin(dot.shimmer || 0) * 5;\n    \n    this.ctx.fillStyle = dot.color;\n    this.ctx.beginPath();\n    this.ctx.arc(dot.x + shimmerOffset, dot.y, dot.radius, 0, Math.PI * 2);\n    this.ctx.fill();\n    \n    // Highlight for target dots\n    if (isTarget || isMemory) {\n      this.ctx.globalAlpha = 0.8;\n      this.ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\n      this.ctx.beginPath();\n      this.ctx.arc(dot.x + shimmerOffset - dot.radius * 0.3, dot.y - dot.radius * 0.3, dot.radius * 0.4, 0, Math.PI * 2);\n      this.ctx.fill();\n    }\n    \n    this.ctx.restore();\n  }\n\n  drawUI() {\n    // Draw progress\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n    this.ctx.font = 'bold 18px Arial';\n    this.ctx.textAlign = 'left';\n    this.ctx.fillText(`Target Dots Remaining: ${this.targetDotsRemaining}`, 20, 30);\n    \n    // Draw streak if active\n    if (this.correctStreak > 0) {\n      this.ctx.fillStyle = '#2ecc71';\n      this.ctx.fillText(`Streak: ${this.correctStreak}`, 20, 55);\n    }\n    \n    // Draw timer\n    const elapsed = performance.now() - this.levelStartTime;\n    const seconds = Math.floor(elapsed / 1000);\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n    this.ctx.textAlign = 'right';\n    this.ctx.fillText(`Time: ${seconds}s`, this.canvas.width - 20, 30);\n  }\n\n  onPointerDown(event) {\n    if (this.state !== 'playing') return;\n    \n    const rect = this.canvas.getBoundingClientRect();\n    const x = (event.clientX - rect.left) * (this.canvas.width / rect.width);\n    const y = (event.clientY - rect.top) * (this.canvas.height / rect.height);\n    \n    // Check for dot collision\n    for (let i = this.dots.length - 1; i >= 0; i--) {\n      const dot = this.dots[i];\n      const dx = x - dot.x;\n      const dy = y - dot.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      if (distance <= dot.radius) {\n        // Hit a dot\n        if (dot.isTarget) {\n          // Correct hit\n          this.handleCorrectHit(dot, i);\n        } else {\n          // Wrong hit\n          this.handleWrongHit(dot, i);\n        }\n        break;\n      }\n    }\n  }\n\n  handleCorrectHit(dot, index) {\n    this.correctStreak++;\n    this.lastCorrectTime = performance.now();\n    \n    // Enhanced explosion effect\n    this.helpers.createExplosion(dot.x, dot.y, dot.color, 1.5);\n    \n    // Sound feedback\n    if (this.managers.sound) {\n      this.managers.sound.playSuccess();\n      \n      // Additional pop sound\n      setTimeout(() => {\n        this.managers.sound.playPop(1.2);\n      }, 100);\n    }\n    \n    // Score calculation with streak bonus\n    const baseScore = 100;\n    const streakBonus = Math.min(this.correctStreak, 5) * 20;\n    const totalScore = baseScore + streakBonus;\n    \n    this.updateScore(totalScore);\n    this.targetDotsRemaining--;\n    this.dots.splice(index, 1);\n    \n    // Sparkle effect for high streaks\n    if (this.correctStreak >= 3) {\n      this.managers.particleManager.createSparkle(dot.x, dot.y, '#ffd700', 1.5);\n    }\n    \n    // Check if level complete\n    if (this.targetDotsRemaining <= 0) {\n      this.completeLevel();\n    }\n  }\n\n  handleWrongHit(dot, index) {\n    this.correctStreak = 0;\n    \n    // Glass shatter effect\n    this.helpers.applyExplosionEffect(dot.x, dot.y, 30, 1);\n    \n    // Sound feedback\n    if (this.managers.sound) {\n      this.managers.sound.playWrong();\n    }\n    \n    // Score penalty\n    this.updateScore(-50);\n    this.dots.splice(index, 1);\n    \n    // Screen shake effect\n    if (this.managers.centerPiece) {\n      // Trigger screen shake (if available)\n    }\n  }\n\n  completeLevel() {\n    // Final celebration\n    if (this.managers.sound) {\n      this.managers.sound.playSequence([\n        { type: 'sound', name: 'success', volume: 1.0 },\n        { type: 'sound', name: 'pop', volume: 0.8, pitch: 1.2 }\n      ], 300);\n    }\n    \n    // Fireworks effect\n    const centerX = this.canvas.width / 2;\n    const centerY = this.canvas.height / 2;\n    \n    for (let i = 0; i < 3; i++) {\n      setTimeout(() => {\n        this.managers.particleManager.createExplosion(\n          centerX + (Math.random() - 0.5) * 200,\n          centerY + (Math.random() - 0.5) * 200,\n          this.mother.color,\n          2.0,\n          30\n        );\n      }, i * 500);\n    }\n    \n    // Calculate bonus score\n    const timeBonus = Math.max(0, 10000 - (performance.now() - this.levelStartTime)) / 100;\n    const accuracyBonus = this.correctStreak * 50;\n    \n    this.updateScore(Math.floor(timeBonus + accuracyBonus));\n    \n    // End level after celebration\n    setTimeout(() => {\n      this.end();\n    }, 3000);\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener('pointerdown', this.onPointerDown);\n    this.dots = [];\n  }\n}\n","import { BaseLevel } from './baseLevel.js';\nimport { GAME_CONFIG } from '../config/constants.js';\nimport { LevelSettings } from '../config/gameSettings.js';\n\nexport default class ShapesLevel extends BaseLevel {\n  constructor(canvas, ctx, managers, helpers) {\n    super(canvas, ctx, managers, helpers);\n    this.sequence = GAME_CONFIG.SEQUENCES.shapes;\n    this.objects = [];\n    this.currentIndex = 0;\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.spawnInterval = GAME_CONFIG.LETTER_SPAWN_INTERVAL;\n    this.onPointerDown = this.onPointerDown.bind(this);\n  }\n\n  async init() {\n    this.currentTarget = this.sequence[this.currentIndex];\n    this.objects = [];\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.canvas.addEventListener('pointerdown', this.onPointerDown);\n    this.running = true;\n  }\n\n  update(deltaTime) {\n    if (!this.running) return;\n    this.spawnTimer += deltaTime;\n    if (this.spawnTimer >= this.spawnInterval) {\n      this.spawnTimer = 0;\n      this.spawnObject();\n    }\n    const dt = deltaTime / 16;\n    this.objects.forEach(obj => {\n      obj.x += obj.dx * dt;\n      obj.y += obj.dy * dt;\n    });\n    this.objects = this.objects.filter(obj => obj.x > -50 && obj.x < this.canvas.width + 50 && obj.y > -50 && obj.y < this.canvas.height + 50);\n  }\n\n  render() {\n    // Draw center target shape\n    const size = LevelSettings.text.centerFontSize;\n    this.ctx.save();\n    this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);\n    this.ctx.fillStyle = '#FFFFFF';\n    this.drawShape(this.currentTarget, size);\n    this.ctx.restore();\n    // Draw falling shapes\n    this.objects.forEach(obj => {\n      this.ctx.save();\n      this.ctx.translate(obj.x, obj.y);\n      this.ctx.fillStyle = obj.color;\n      this.drawShape(obj.shape, LevelSettings.text.fallingFontSize);\n      this.ctx.restore();\n    });\n  }\n\n  spawnObject() {\n    const buffer = LevelSettings.text.spawnEdgeBuffer;\n    const side = Math.floor(Math.random() * 4);\n    let x, y, dx, dy;\n    const speed = Math.random() * 2 + 1;\n    \n    switch (side) {\n      case 0: // top\n        x = Math.random() * this.canvas.width;\n        y = -buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = speed;\n        break;\n      case 1: // bottom\n        x = Math.random() * this.canvas.width;\n        y = this.canvas.height + buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = -speed;\n        break;\n      case 2: // left\n        x = -buffer;\n        y = Math.random() * this.canvas.height;\n        dx = speed;\n        dy = (Math.random() - 0.5) * 2;\n        break;\n      default: // right\n        x = this.canvas.width + buffer;\n        y = Math.random() * this.canvas.height;\n        dx = -speed;\n        dy = (Math.random() - 0.5) * 2;\n    }\n\n    // Randomly choose what shape to spawn\n    const shapes = ['Circle', 'Square', 'Triangle', 'Rectangle', 'Pentagon'];\n    const shape = shapes[Math.floor(Math.random() * shapes.length)];\n    const colorArr = GAME_CONFIG.COLORS.COLORS_LIST[Math.floor(Math.random() * GAME_CONFIG.COLORS.COLORS_LIST.length)];\n    const color = `rgb(${colorArr.join(',')})`;\n    \n    this.objects.push({ shape, x, y, dx, dy, color });\n  }\n\n  onPointerDown(event) {\n    if (!this.running) return;\n    const rect = this.canvas.getBoundingClientRect();\n    const x = (event.clientX - rect.left) * (this.canvas.width / rect.width);\n    const y = (event.clientY - rect.top) * (this.canvas.height / rect.height);\n    let hit = false;\n    this.objects = this.objects.filter(obj => {\n      const size = LevelSettings.text.fallingFontSize;\n      const dx = x - obj.x;\n      const dy = y - obj.y;\n      const radius = size / 2;\n      if (dx * dx + dy * dy <= radius * radius) {\n        if (obj.shape === this.currentTarget) {\n          this.helpers.createExplosion(obj.x, obj.y, obj.color, 1);\n          this.managers.hud.updateScore(10);\n          this.groupCount++;\n          hit = true;\n        } else {\n          this.helpers.applyExplosionEffect(obj.x, obj.y, radius, 1);\n          this.managers.hud.updateScore(-5);\n        }\n        return false;\n      }\n      return true;\n    });\n    if (hit && this.groupCount >= LevelSettings.text.advanceCount) {\n      this.currentIndex++;\n      if (this.currentIndex >= this.sequence.length) {\n        this.end();\n      } else {\n        this.currentTarget = this.sequence[this.currentIndex];\n        this.groupCount = 0;\n      }\n    }\n  }\n\n  drawShape(shape, size) {\n    const half = size / 2;\n    this.ctx.beginPath();\n    switch (shape) {\n      case 'Circle':\n        this.ctx.arc(0, 0, half, 0, Math.PI * 2);\n        break;\n      case 'Square':\n        this.ctx.rect(-half, -half, size, size);\n        break;\n      case 'Triangle':\n        this.ctx.moveTo(0, -half);\n        this.ctx.lineTo(half, half);\n        this.ctx.lineTo(-half, half);\n        this.ctx.closePath();\n        break;\n      case 'Rectangle':\n        this.ctx.rect(-half, -half * 0.6, size, size * 0.6);\n        break;\n      case 'Pentagon':\n        for (let i = 0; i < 5; i++) {\n          const angle = ((Math.PI * 2) / 5) * i - Math.PI / 2;\n          const px = Math.cos(angle) * half;\n          const py = Math.sin(angle) * half;\n          if (i === 0) this.ctx.moveTo(px, py);\n          else this.ctx.lineTo(px, py);\n        }\n        this.ctx.closePath();\n        break;\n      default:\n        this.ctx.arc(0, 0, half, 0, Math.PI * 2);\n    }\n    this.ctx.fill();\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener('pointerdown', this.onPointerDown);\n    this.objects = [];\n  }\n}\n","import { BaseLevel } from './baseLevel.js';\nimport { GAME_CONFIG } from '../config/constants.js';\nimport { LevelSettings } from '../config/gameSettings.js';\n\nexport default class AlphabetLevel extends BaseLevel {\n  constructor(canvas, ctx, managers, helpers) {\n    super(canvas, ctx, managers, helpers);\n    this.sequence = GAME_CONFIG.SEQUENCES.alphabet;\n    this.objects = [];\n    this.currentIndex = 0;\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.spawnInterval = GAME_CONFIG.LETTER_SPAWN_INTERVAL;\n    this.onPointerDown = this.onPointerDown.bind(this);\n  }\n\n  async init() {\n    this.currentTarget = this.sequence[this.currentIndex];\n    this.objects = [];\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.canvas.addEventListener('pointerdown', this.onPointerDown);\n    this.running = true;\n  }\n\n  update(deltaTime) {\n    if (!this.running) return;\n    this.spawnTimer += deltaTime;\n    if (this.spawnTimer >= this.spawnInterval) {\n      this.spawnTimer = 0;\n      this.spawnObject();\n    }\n    // Move objects\n    const dt = deltaTime / 16;\n    this.objects.forEach(obj => {\n      obj.x += obj.dx * dt;\n      obj.y += obj.dy * dt;\n    });\n    // Remove off-screen\n    this.objects = this.objects.filter(obj => obj.x > -50 && obj.x < this.canvas.width + 50 && obj.y > -50 && obj.y < this.canvas.height + 50);\n  }\n\n  render() {\n    // Draw center target\n    this.ctx.save();\n    this.ctx.fillStyle = '#FFFFFF';\n    this.ctx.textAlign = 'center';\n    this.ctx.font = `${LevelSettings.text.centerFontSize}px Arial`;\n    this.ctx.fillText(this.currentTarget, this.canvas.width / 2, this.canvas.height / 2);\n    this.ctx.restore();\n    // Draw falling objects\n    this.objects.forEach(obj => {\n      this.ctx.save();\n      this.ctx.fillStyle = obj.color;\n      this.ctx.textAlign = 'center';\n      this.ctx.font = `${LevelSettings.text.fallingFontSize}px Arial`;\n      this.ctx.fillText(obj.char, obj.x, obj.y);\n      this.ctx.restore();\n    });\n  }\n\n  spawnObject() {\n    const buffer = LevelSettings.text.spawnEdgeBuffer;\n    const side = Math.floor(Math.random() * 4);\n    let x, y, dx, dy;\n    const speed = Math.random() * 2 + 1;\n    switch (side) {\n      case 0: // top\n        x = Math.random() * this.canvas.width;\n        y = -buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = speed;\n        break;\n      case 1: // bottom\n        x = Math.random() * this.canvas.width;\n        y = this.canvas.height + buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = -speed;\n        break;\n      case 2: // left\n        x = -buffer;\n        y = Math.random() * this.canvas.height;\n        dx = speed;\n        dy = (Math.random() - 0.5) * 2;\n        break;\n      case 3: // right\n        x = this.canvas.width + buffer;\n        y = Math.random() * this.canvas.height;\n        dx = -speed;\n        dy = (Math.random() - 0.5) * 2;\n        break;\n    }\n    const colorArr = GAME_CONFIG.COLORS.COLORS_LIST[Math.floor(Math.random() * GAME_CONFIG.COLORS.COLORS_LIST.length)];\n    const color = `rgb(${colorArr.join(',')})`;\n    this.objects.push({ char: this.currentTarget, x, y, dx, dy, color });\n  }\n\n  onPointerDown(event) {\n    if (!this.running) return;\n    const rect = this.canvas.getBoundingClientRect();\n    const x = (event.clientX - rect.left) * (this.canvas.width / rect.width);\n    const y = (event.clientY - rect.top) * (this.canvas.height / rect.height);\n    let hit = false;\n    this.objects = this.objects.filter(obj => {\n      const width = LevelSettings.text.fallingFontSize;\n      const height = LevelSettings.text.fallingFontSize;\n      if (x > obj.x - width / 2 && x < obj.x + width / 2 && y > obj.y - height && y < obj.y) {\n        if (obj.char === this.currentTarget) {\n          this.helpers.createExplosion(obj.x, obj.y, obj.color, 1);\n          this.updateScore(100);\n          this.groupCount++;\n          hit = true;\n        } else {\n          this.helpers.applyExplosionEffect(obj.x, obj.y, 20, 1);\n          this.updateScore(-25);\n        }\n        return false;\n      }\n      return true;\n    });\n    // Advance or complete\n    if (hit && this.groupCount >= LevelSettings.text.advanceCount) {\n      this.currentIndex++;\n      if (this.currentIndex >= this.sequence.length) {\n        this.end();\n      } else {\n        this.currentTarget = this.sequence[this.currentIndex];\n        this.groupCount = 0;\n      }\n    }\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener('pointerdown', this.onPointerDown);\n    this.objects = [];\n  }\n}\n","import { BaseLevel } from './baseLevel.js';\nimport { GAME_CONFIG } from '../config/constants.js';\nimport { LevelSettings } from '../config/gameSettings.js';\n\nexport default class NumbersLevel extends BaseLevel {\n  constructor(canvas, ctx, managers, helpers) {\n    super(canvas, ctx, managers, helpers);\n    this.sequence = GAME_CONFIG.SEQUENCES.numbers;\n    this.objects = [];\n    this.currentIndex = 0;\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.spawnInterval = GAME_CONFIG.LETTER_SPAWN_INTERVAL;\n    this.onPointerDown = this.onPointerDown.bind(this);\n  }\n\n  async init() {\n    this.currentTarget = this.sequence[this.currentIndex];\n    this.objects = [];\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.canvas.addEventListener('pointerdown', this.onPointerDown);\n    this.running = true;\n  }\n\n  update(deltaTime) {\n    if (!this.running) return;\n    this.spawnTimer += deltaTime;\n    if (this.spawnTimer >= this.spawnInterval) {\n      this.spawnTimer = 0;\n      this.spawnObject();\n    }\n    const dt = deltaTime / 16;\n    this.objects.forEach(obj => {\n      obj.x += obj.dx * dt;\n      obj.y += obj.dy * dt;\n    });\n    this.objects = this.objects.filter(obj => obj.x > -50 && obj.x < this.canvas.width + 50 && obj.y > -50 && obj.y < this.canvas.height + 50);\n  }\n\n  render() {\n    // Draw center target\n    this.ctx.save();\n    this.ctx.fillStyle = '#FFFFFF';\n    this.ctx.textAlign = 'center';\n    this.ctx.font = `${LevelSettings.text.centerFontSize}px Arial`;\n    this.ctx.fillText(this.currentTarget, this.canvas.width / 2, this.canvas.height / 2);\n    this.ctx.restore();\n\n    // Draw falling objects\n    this.objects.forEach(obj => {\n      this.ctx.save();\n      this.ctx.fillStyle = obj.color;\n      this.ctx.textAlign = 'center';\n      this.ctx.font = `${LevelSettings.text.fallingFontSize}px Arial`;\n      this.ctx.fillText(obj.char, obj.x, obj.y);\n      this.ctx.restore();\n    });\n  }\n\n  spawnObject() {\n    const buffer = LevelSettings.text.spawnEdgeBuffer;\n    const side = Math.floor(Math.random() * 4);\n    let x, y, dx, dy;\n    const speed = Math.random() * 2 + 1;\n    \n    switch (side) {\n      case 0: // top\n        x = Math.random() * this.canvas.width;\n        y = -buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = speed;\n        break;\n      case 1: // bottom\n        x = Math.random() * this.canvas.width;\n        y = this.canvas.height + buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = -speed;\n        break;\n      case 2: // left\n        x = -buffer;\n        y = Math.random() * this.canvas.height;\n        dx = speed;\n        dy = (Math.random() - 0.5) * 2;\n        break;\n      case 3: // right\n        x = this.canvas.width + buffer;\n        y = Math.random() * this.canvas.height;\n        dx = -speed;\n        dy = (Math.random() - 0.5) * 2;\n        break;\n    }\n\n    // Randomly choose what number to spawn\n    const chars = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'];\n    const char = chars[Math.floor(Math.random() * chars.length)];\n    const colorArr = GAME_CONFIG.COLORS.COLORS_LIST[Math.floor(Math.random() * GAME_CONFIG.COLORS.COLORS_LIST.length)];\n    const color = `rgb(${colorArr.join(',')})`;\n    \n    this.objects.push({ char, x, y, dx, dy, color });\n  }\n\n  onPointerDown(event) {\n    if (!this.running) return;\n    const rect = this.canvas.getBoundingClientRect();\n    const x = (event.clientX - rect.left) * (this.canvas.width / rect.width);\n    const y = (event.clientY - rect.top) * (this.canvas.height / rect.height);\n    \n    let hit = false;\n    this.objects = this.objects.filter(obj => {\n      const width = LevelSettings.text.fallingFontSize;\n      const height = LevelSettings.text.fallingFontSize;\n      \n      if (x > obj.x - width / 2 && x < obj.x + width / 2 && y > obj.y - height && y < obj.y) {\n        if (obj.char === this.currentTarget) {\n          this.helpers.createExplosion(obj.x, obj.y, obj.color, 1);\n          this.updateScore(100);\n          this.groupCount++;\n          hit = true;\n        } else {\n          this.helpers.applyExplosionEffect(obj.x, obj.y, 20, 1);\n          this.updateScore(-25);\n        }\n        return false;\n      }\n      return true;\n    });\n\n    // Advance to next number or complete level\n    if (hit && this.groupCount >= LevelSettings.text.advanceCount) {\n      this.currentIndex++;\n      if (this.currentIndex >= this.sequence.length) {\n        this.end();\n      } else {\n        this.currentTarget = this.sequence[this.currentIndex];\n        this.groupCount = 0;\n      }\n    }\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener('pointerdown', this.onPointerDown);\n    this.objects = [];\n  }\n}\n","import { BaseLevel } from './baseLevel.js';\nimport { GAME_CONFIG } from '../config/constants.js';\nimport { LevelSettings } from '../config/gameSettings.js';\n\nexport default class ClCaseLevel extends BaseLevel {\n  constructor(canvas, ctx, managers, helpers) {\n    super(canvas, ctx, managers, helpers);\n    this.sequence = GAME_CONFIG.SEQUENCES.clcase;\n    this.objects = [];\n    this.currentIndex = 0;\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.spawnInterval = GAME_CONFIG.LETTER_SPAWN_INTERVAL;\n    this.onPointerDown = this.onPointerDown.bind(this);\n  }\n\n  async init() {\n    this.currentTarget = this.sequence[this.currentIndex];\n    this.objects = [];\n    this.groupCount = 0;\n    this.spawnTimer = 0;\n    this.canvas.addEventListener('pointerdown', this.onPointerDown);\n    this.running = true;\n  }\n\n  update(deltaTime) {\n    if (!this.running) return;\n    this.spawnTimer += deltaTime;\n    if (this.spawnTimer >= this.spawnInterval) {\n      this.spawnTimer = 0;\n      this.spawnObject();\n    }\n    const dt = deltaTime / 16;\n    this.objects.forEach(obj => {\n      obj.x += obj.dx * dt;\n      obj.y += obj.dy * dt;\n    });\n    this.objects = this.objects.filter(obj => obj.x > -50 && obj.x < this.canvas.width + 50 && obj.y > -50 && obj.y < this.canvas.height + 50);\n  }\n\n  render() {\n    // Draw center target\n    this.ctx.save();\n    this.ctx.fillStyle = '#FFFFFF';\n    this.ctx.textAlign = 'center';\n    this.ctx.font = `${LevelSettings.text.centerFontSize}px Arial`;\n    this.ctx.fillText(this.currentTarget, this.canvas.width / 2, this.canvas.height / 2);\n    this.ctx.restore();\n\n    // Draw falling objects\n    this.objects.forEach(obj => {\n      this.ctx.save();\n      this.ctx.fillStyle = obj.color;\n      this.ctx.textAlign = 'center';\n      this.ctx.font = `${LevelSettings.text.fallingFontSize}px Arial`;\n      this.ctx.fillText(obj.char, obj.x, obj.y);\n      this.ctx.restore();\n    });\n  }\n\n  spawnObject() {\n    const buffer = LevelSettings.text.spawnEdgeBuffer;\n    const side = Math.floor(Math.random() * 4);\n    let x, y, dx, dy;\n    const speed = Math.random() * 2 + 1;\n    \n    switch (side) {\n      case 0: // top\n        x = Math.random() * this.canvas.width;\n        y = -buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = speed;\n        break;\n      case 1: // bottom\n        x = Math.random() * this.canvas.width;\n        y = this.canvas.height + buffer;\n        dx = (Math.random() - 0.5) * 2;\n        dy = -speed;\n        break;\n      case 2: // left\n        x = -buffer;\n        y = Math.random() * this.canvas.height;\n        dx = speed;\n        dy = (Math.random() - 0.5) * 2;\n        break;\n      case 3: // right\n        x = this.canvas.width + buffer;\n        y = Math.random() * this.canvas.height;\n        dx = -speed;\n        dy = (Math.random() - 0.5) * 2;\n        break;\n    }\n\n    // Randomly choose what letter to spawn\n    const chars = 'abcdefghijklmnopqrstuvwxyz'.split('');\n    const char = chars[Math.floor(Math.random() * chars.length)];\n    const colorArr = GAME_CONFIG.COLORS.COLORS_LIST[Math.floor(Math.random() * GAME_CONFIG.COLORS.COLORS_LIST.length)];\n    const color = `rgb(${colorArr.join(',')})`;\n    \n    this.objects.push({ char, x, y, dx, dy, color });\n  }\n\n  onPointerDown(event) {\n    if (!this.running) return;\n    const rect = this.canvas.getBoundingClientRect();\n    const x = (event.clientX - rect.left) * (this.canvas.width / rect.width);\n    const y = (event.clientY - rect.top) * (this.canvas.height / rect.height);\n    \n    let hit = false;\n    this.objects = this.objects.filter(obj => {\n      const width = LevelSettings.text.fallingFontSize;\n      const height = LevelSettings.text.fallingFontSize;\n      \n      if (x > obj.x - width / 2 && x < obj.x + width / 2 && y > obj.y - height && y < obj.y) {\n        if (obj.char === this.currentTarget) {\n          this.helpers.createExplosion(obj.x, obj.y, obj.color, 1);\n          this.updateScore(100);\n          this.groupCount++;\n          hit = true;\n        } else {\n          this.helpers.applyExplosionEffect(obj.x, obj.y, 20, 1);\n          this.updateScore(-25);\n        }\n        return false;\n      }\n      return true;\n    });\n\n    // Advance to next letter or complete level\n    if (hit && this.groupCount >= LevelSettings.text.advanceCount) {\n      this.currentIndex++;\n      if (this.currentIndex >= this.sequence.length) {\n        this.end();\n      } else {\n        this.currentTarget = this.sequence[this.currentIndex];\n        this.groupCount = 0;\n      }\n    }\n  }\n\n  cleanup() {\n    this.canvas.removeEventListener('pointerdown', this.onPointerDown);\n    this.objects = [];\n  }\n}\n","/**\n * Phonics Level Configuration\n * Optimized for educational value and smooth performance\n */\n\nexport const PhonicsConfig = {\n  // Performance settings\n  performance: {\n    maxBubbles: 12,\n    maxParticles: 100,\n    targetFPS: 60,\n    bubblePoolSize: 20,\n    particlePoolSize: 50\n  },\n  \n  // Bubble physics\n  physics: {\n    gravity: 0.1,\n    buoyancy: 0.15,\n    drag: 0.98,\n    pop: {\n      minForce: 0.5,\n      maxForce: 2.0,\n      particleCount: 8\n    },\n    bounce: {\n      damping: 0.7,\n      elasticity: 0.3\n    }\n  },\n  \n  // Visual settings\n  visuals: {\n    bubbleSize: {\n      min: 40,\n      max: 80\n    },\n    colors: {\n      bubbleBase: 'rgba(173, 216, 230, 0.8)',\n      bubbleHighlight: 'rgba(255, 255, 255, 0.9)',\n      bubbleShadow: 'rgba(0, 0, 0, 0.1)',\n      letterColor: '#2c3e50',\n      correctGlow: '#2ecc71',\n      wrongGlow: '#e74c3c',\n      background: '#f8f9fa'\n    },\n    effects: {\n      shimmer: {\n        enabled: true,\n        intensity: 0.3,\n        speed: 0.1\n      },\n      floating: {\n        enabled: true,\n        amplitude: 2,\n        frequency: 0.05\n      },\n      glow: {\n        enabled: true,\n        radius: 20,\n        intensity: 0.5\n      }\n    }\n  },\n  \n  // Educational settings\n  education: {\n    alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''),\n    phonicsMap: {\n      'A': { sound: 'ay', frequency: [800, 1200] },\n      'B': { sound: 'buh', frequency: [100, 200] },\n      'C': { sound: 'kuh', frequency: [200, 300] },\n      'D': { sound: 'duh', frequency: [150, 250] },\n      'E': { sound: 'ee', frequency: [500, 700] },\n      'F': { sound: 'fuh', frequency: [300, 400] },\n      'G': { sound: 'guh', frequency: [120, 220] },\n      'H': { sound: 'huh', frequency: [100, 150] },\n      'I': { sound: 'eye', frequency: [300, 500] },\n      'J': { sound: 'juh', frequency: [200, 400] },\n      'K': { sound: 'kuh', frequency: [250, 350] },\n      'L': { sound: 'luh', frequency: [400, 600] },\n      'M': { sound: 'muh', frequency: [150, 300] },\n      'N': { sound: 'nuh', frequency: [200, 400] },\n      'O': { sound: 'oh', frequency: [400, 600] },\n      'P': { sound: 'puh', frequency: [100, 200] },\n      'Q': { sound: 'kwuh', frequency: [250, 450] },\n      'R': { sound: 'ruh', frequency: [300, 500] },\n      'S': { sound: 'sss', frequency: [500, 800] },\n      'T': { sound: 'tuh', frequency: [400, 600] },\n      'U': { sound: 'ooo', frequency: [300, 500] },\n      'V': { sound: 'vuh', frequency: [200, 400] },\n      'W': { sound: 'wuh', frequency: [250, 450] },\n      'X': { sound: 'ks', frequency: [300, 600] },\n      'Y': { sound: 'yuh', frequency: [400, 700] },\n      'Z': { sound: 'zuh', frequency: [400, 800] }\n    },\n    difficulty: {\n      easy: {\n        letters: ['A', 'B', 'C', 'D', 'E'],\n        spawnRate: 2000,\n        bubbleSpeed: 0.5,\n        targetCount: 3\n      },\n      medium: {\n        letters: ['F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O'],\n        spawnRate: 1500,\n        bubbleSpeed: 0.7,\n        targetCount: 5\n      },\n      hard: {\n        letters: ['P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\n        spawnRate: 1200,\n        bubbleSpeed: 0.9,\n        targetCount: 7\n      }\n    },\n    progression: {\n      levelDuration: 60000, // 1 minute\n      correctScorePoints: 100,\n      wrongScorePenalty: -25,\n      streakMultiplier: 1.5,\n      maxStreak: 5\n    }\n  },\n  \n  // Game mechanics\n  gameplay: {\n    spawnZone: {\n      x: 0.1, // 10% from left\n      y: 0.9, // 90% from top (bottom)\n      width: 0.8, // 80% of screen width\n      height: 0.1 // 10% of screen height\n    },\n    targetZone: {\n      x: 0.2, // 20% from left\n      y: 0.1, // 10% from top\n      width: 0.6, // 60% of screen width\n      height: 0.3 // 30% of screen height\n    },\n    bubbleLifetime: 15000, // 15 seconds\n    comboWindow: 3000, // 3 seconds for combo\n    pauseOnWrong: 500, // 0.5 second pause on wrong answer\n    celebrationDuration: 2000 // 2 seconds celebration\n  },\n  \n  // Audio settings\n  audio: {\n    phonics: {\n      volume: 0.8,\n      pitch: 1.0,\n      playOnSpawn: true,\n      playOnPop: true,\n      repeatDelay: 1000\n    },\n    effects: {\n      bubblePop: { volume: 0.6, pitch: 1.0 },\n      correct: { volume: 0.7, pitch: 1.0 },\n      wrong: { volume: 0.5, pitch: 0.8 },\n      levelComplete: { volume: 0.8, pitch: 1.0 },\n      combo: { volume: 0.6, pitch: 1.2 }\n    }\n  }\n};","import { PhonicsConfig } from './PhonicsConfig.js';\n\n/**\n * BubbleSystem - Optimized bubble physics and management\n */\nexport class BubbleSystem {\n  constructor(canvas, ctx, particleManager, soundManager) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.particleManager = particleManager;\n    this.soundManager = soundManager;\n    \n    // Configuration\n    this.config = PhonicsConfig;\n    \n    // Bubble management\n    this.bubbles = [];\n    this.bubblePool = [];\n    this.activeBubbles = 0;\n    \n    // Performance optimization\n    this.lastSpawnTime = 0;\n    this.spawnRate = this.config.education.difficulty.easy.spawnRate;\n    this.maxBubbles = this.config.performance.maxBubbles;\n    \n    // Visual effects\n    this.time = 0;\n    this.shimmerPhase = 0;\n    \n    // Initialize bubble pool\n    this.initializeBubblePool();\n    \n    // Target letter tracking\n    this.targetLetter = null;\n    this.targetLetterIndex = 0;\n    this.currentDifficulty = 'easy';\n    \n    // Game state\n    this.streak = 0;\n    this.combo = 0;\n    this.lastCorrectTime = 0;\n    \n    // Bind methods\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.setupEventListeners();\n  }\n\n  initializeBubblePool() {\n    // Pre-create bubbles for performance\n    for (let i = 0; i < this.config.performance.bubblePoolSize; i++) {\n      this.bubblePool.push(this.createBubbleObject());\n    }\n  }\n\n  createBubbleObject() {\n    return {\n      x: 0,\n      y: 0,\n      vx: 0,\n      vy: 0,\n      size: 0,\n      letter: '',\n      isTarget: false,\n      lifetime: 0,\n      maxLifetime: 0,\n      phase: Math.random() * Math.PI * 2,\n      popAnimation: 0,\n      isPopping: false,\n      glowIntensity: 0,\n      shimmerOffset: Math.random() * Math.PI * 2,\n      active: false,\n      age: 0,\n      bounceCount: 0,\n      lastSoundTime: 0\n    };\n  }\n\n  setupEventListeners() {\n    this.canvas.addEventListener('pointerdown', this.onPointerDown);\n    this.canvas.addEventListener('touchstart', this.onPointerDown);\n  }\n\n  removeEventListeners() {\n    this.canvas.removeEventListener('pointerdown', this.onPointerDown);\n    this.canvas.removeEventListener('touchstart', this.onPointerDown);\n  }\n\n  setDifficulty(difficulty) {\n    this.currentDifficulty = difficulty;\n    this.spawnRate = this.config.education.difficulty[difficulty].spawnRate;\n    this.maxBubbles = Math.floor(this.config.performance.maxBubbles * \n      (difficulty === 'easy' ? 0.7 : difficulty === 'medium' ? 0.85 : 1.0));\n  }\n\n  setTargetLetter(letter) {\n    this.targetLetter = letter;\n    this.targetLetterIndex = this.config.education.alphabet.indexOf(letter);\n  }\n\n  getNextTargetLetter() {\n    const letters = this.config.education.difficulty[this.currentDifficulty].letters;\n    this.targetLetterIndex = (this.targetLetterIndex + 1) % letters.length;\n    return letters[this.targetLetterIndex];\n  }\n\n  spawnBubble(letter = null, isTarget = false) {\n    if (this.activeBubbles >= this.maxBubbles) return null;\n    \n    // Get bubble from pool\n    let bubble = this.bubblePool.find(b => !b.active);\n    if (!bubble) {\n      bubble = this.createBubbleObject();\n      this.bubblePool.push(bubble);\n    }\n    \n    // Configure bubble\n    const spawnZone = this.config.gameplay.spawnZone;\n    const size = this.config.visuals.bubbleSize.min + \n                Math.random() * (this.config.visuals.bubbleSize.max - this.config.visuals.bubbleSize.min);\n    \n    bubble.x = (spawnZone.x + Math.random() * spawnZone.width) * this.canvas.width;\n    bubble.y = spawnZone.y * this.canvas.height;\n    bubble.vx = (Math.random() - 0.5) * 0.5;\n    bubble.vy = -this.config.education.difficulty[this.currentDifficulty].bubbleSpeed;\n    bubble.size = size;\n    bubble.letter = letter || this.getRandomLetter();\n    bubble.isTarget = isTarget;\n    bubble.lifetime = 0;\n    bubble.maxLifetime = this.config.gameplay.bubbleLifetime;\n    bubble.phase = Math.random() * Math.PI * 2;\n    bubble.popAnimation = 0;\n    bubble.isPopping = false;\n    bubble.glowIntensity = isTarget ? 0.5 : 0;\n    bubble.shimmerOffset = Math.random() * Math.PI * 2;\n    bubble.active = true;\n    bubble.age = 0;\n    bubble.bounceCount = 0;\n    bubble.lastSoundTime = 0;\n    \n    this.bubbles.push(bubble);\n    this.activeBubbles++;\n    \n    // Play phonics sound if enabled\n    if (this.config.audio.phonics.playOnSpawn) {\n      this.soundManager.playPhonicsSound(bubble.letter, this.config.audio.phonics.volume);\n    }\n    \n    return bubble;\n  }\n\n  getRandomLetter() {\n    const letters = this.config.education.difficulty[this.currentDifficulty].letters;\n    return letters[Math.floor(Math.random() * letters.length)];\n  }\n\n  update(deltaTime) {\n    this.time += deltaTime;\n    this.shimmerPhase += this.config.visuals.effects.shimmer.speed * deltaTime / 16;\n    \n    // Spawn bubbles\n    this.updateSpawning(deltaTime);\n    \n    // Update existing bubbles\n    this.updateBubbles(deltaTime);\n    \n    // Check for expired bubbles\n    this.cleanupBubbles();\n    \n    // Update combo timer\n    this.updateCombo(deltaTime);\n  }\n\n  updateSpawning(deltaTime) {\n    const now = performance.now();\n    if (now - this.lastSpawnTime >= this.spawnRate) {\n      const shouldSpawnTarget = this.targetLetter && \n                               Math.random() < 0.4 && \n                               !this.bubbles.some(b => b.isTarget);\n      \n      if (shouldSpawnTarget) {\n        this.spawnBubble(this.targetLetter, true);\n      } else {\n        this.spawnBubble();\n      }\n      \n      this.lastSpawnTime = now;\n    }\n  }\n\n  updateBubbles(deltaTime) {\n    const dt = deltaTime / 16; // Normalize to 60fps\n    \n    this.bubbles.forEach(bubble => {\n      if (!bubble.active) return;\n      \n      // Update lifetime\n      bubble.lifetime += deltaTime;\n      bubble.age += deltaTime;\n      \n      if (bubble.isPopping) {\n        bubble.popAnimation += deltaTime / 200;\n        if (bubble.popAnimation >= 1) {\n          this.deactivateBubble(bubble);\n        }\n        return;\n      }\n      \n      // Physics update\n      this.updateBubblePhysics(bubble, dt);\n      \n      // Visual effects update\n      this.updateBubbleEffects(bubble, dt);\n      \n      // Check boundaries\n      this.checkBoundaries(bubble);\n      \n      // Check if bubble should be removed\n      if (bubble.lifetime >= bubble.maxLifetime) {\n        this.popBubble(bubble, false);\n      }\n    });\n  }\n\n  updateBubblePhysics(bubble, dt) {\n    // Apply buoyancy (bubbles float up)\n    bubble.vy -= this.config.physics.buoyancy * dt;\n    \n    // Apply gravity (slight downward force)\n    bubble.vy += this.config.physics.gravity * dt;\n    \n    // Apply drag\n    bubble.vx *= this.config.physics.drag;\n    bubble.vy *= this.config.physics.drag;\n    \n    // Add floating motion\n    if (this.config.visuals.effects.floating.enabled) {\n      const floatOffset = Math.sin(this.time * this.config.visuals.effects.floating.frequency + bubble.phase) * \n                         this.config.visuals.effects.floating.amplitude;\n      bubble.vx += floatOffset * 0.01;\n    }\n    \n    // Update position\n    bubble.x += bubble.vx * dt;\n    bubble.y += bubble.vy * dt;\n  }\n\n  updateBubbleEffects(bubble, dt) {\n    // Update phase for animations\n    bubble.phase += 0.02 * dt;\n    \n    // Update glow for target letters\n    if (bubble.isTarget) {\n      bubble.glowIntensity = 0.5 + Math.sin(this.time * 0.005) * 0.3;\n    }\n    \n    // Update shimmer effect\n    bubble.shimmerOffset += this.config.visuals.effects.shimmer.speed * dt;\n  }\n\n  checkBoundaries(bubble) {\n    const radius = bubble.size / 2;\n    \n    // Side boundaries\n    if (bubble.x - radius < 0) {\n      bubble.x = radius;\n      bubble.vx = -bubble.vx * this.config.physics.bounce.elasticity;\n      bubble.bounceCount++;\n    } else if (bubble.x + radius > this.canvas.width) {\n      bubble.x = this.canvas.width - radius;\n      bubble.vx = -bubble.vx * this.config.physics.bounce.elasticity;\n      bubble.bounceCount++;\n    }\n    \n    // Top boundary (bubbles escape here)\n    if (bubble.y + radius < 0) {\n      this.deactivateBubble(bubble);\n    }\n    \n    // Bottom boundary (bubbles bounce)\n    if (bubble.y + radius > this.canvas.height) {\n      bubble.y = this.canvas.height - radius;\n      bubble.vy = -bubble.vy * this.config.physics.bounce.elasticity;\n      bubble.bounceCount++;\n    }\n    \n    // Apply bounce damping\n    if (bubble.bounceCount > 0) {\n      bubble.vx *= this.config.physics.bounce.damping;\n      bubble.vy *= this.config.physics.bounce.damping;\n    }\n  }\n\n  cleanupBubbles() {\n    this.bubbles = this.bubbles.filter(bubble => bubble.active);\n    this.activeBubbles = this.bubbles.length;\n  }\n\n  updateCombo(deltaTime) {\n    const now = performance.now();\n    if (now - this.lastCorrectTime > this.config.gameplay.comboWindow) {\n      this.combo = 0;\n    }\n  }\n\n  onPointerDown(event) {\n    event.preventDefault();\n    \n    const rect = this.canvas.getBoundingClientRect();\n    const x = (event.clientX - rect.left) * (this.canvas.width / rect.width);\n    const y = (event.clientY - rect.top) * (this.canvas.height / rect.height);\n    \n    // Check for bubble collision\n    const clickedBubble = this.findBubbleAtPoint(x, y);\n    if (clickedBubble) {\n      this.handleBubbleClick(clickedBubble);\n    }\n  }\n\n  findBubbleAtPoint(x, y) {\n    // Check bubbles in reverse order (top to bottom)\n    for (let i = this.bubbles.length - 1; i >= 0; i--) {\n      const bubble = this.bubbles[i];\n      if (!bubble.active || bubble.isPopping) continue;\n      \n      const dx = x - bubble.x;\n      const dy = y - bubble.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      if (distance <= bubble.size / 2) {\n        return bubble;\n      }\n    }\n    return null;\n  }\n\n  handleBubbleClick(bubble) {\n    const isCorrect = bubble.letter === this.targetLetter;\n    \n    if (isCorrect) {\n      this.handleCorrectAnswer(bubble);\n    } else {\n      this.handleWrongAnswer(bubble);\n    }\n    \n    this.popBubble(bubble, isCorrect);\n  }\n\n  handleCorrectAnswer(bubble) {\n    // Update streak and combo\n    this.streak++;\n    this.combo++;\n    this.lastCorrectTime = performance.now();\n    \n    // Calculate score with multipliers\n    const baseScore = this.config.education.progression.correctScorePoints;\n    const streakMultiplier = Math.min(this.streak, this.config.education.progression.maxStreak) * \n                            this.config.education.progression.streakMultiplier;\n    const comboMultiplier = Math.min(this.combo, 3) * 0.5;\n    \n    const score = Math.floor(baseScore * (1 + streakMultiplier + comboMultiplier));\n    \n    // Play success sound\n    this.soundManager.playSuccess();\n    \n    // Play phonics sound\n    if (this.config.audio.phonics.playOnPop) {\n      this.soundManager.playPhonicsSound(bubble.letter, this.config.audio.phonics.volume);\n    }\n    \n    // Trigger visual effects\n    this.createSuccessEffect(bubble);\n    \n    // Notify parent level\n    if (this.onCorrectAnswer) {\n      this.onCorrectAnswer(bubble.letter, score);\n    }\n  }\n\n  handleWrongAnswer(bubble) {\n    // Reset streak but keep combo for educational value\n    this.streak = 0;\n    \n    // Play wrong sound\n    this.soundManager.playWrong();\n    \n    // Trigger visual effects\n    this.createWrongEffect(bubble);\n    \n    // Notify parent level\n    if (this.onWrongAnswer) {\n      this.onWrongAnswer(bubble.letter, this.config.education.progression.wrongScorePenalty);\n    }\n  }\n\n  popBubble(bubble, isCorrect) {\n    if (bubble.isPopping) return;\n    \n    bubble.isPopping = true;\n    bubble.popAnimation = 0;\n    \n    // Play pop sound\n    this.soundManager.playPop(1.0);\n    \n    // Create pop particles\n    this.createPopParticles(bubble, isCorrect);\n    \n    // Remove from active bubbles immediately\n    this.activeBubbles--;\n  }\n\n  createSuccessEffect(bubble) {\n    // Create green glow particles\n    const particleCount = this.config.physics.pop.particleCount;\n    for (let i = 0; i < particleCount; i++) {\n      const angle = (i / particleCount) * Math.PI * 2;\n      const speed = 2 + Math.random() * 3;\n      const dx = Math.cos(angle) * speed;\n      const dy = Math.sin(angle) * speed;\n      const size = 2 + Math.random() * 3;\n      const duration = 800 + Math.random() * 400;\n      \n      this.particleManager.createParticle(\n        bubble.x, bubble.y,\n        this.config.visuals.colors.correctGlow,\n        size, dx, dy, duration\n      );\n    }\n  }\n\n  createWrongEffect(bubble) {\n    // Create red glow particles\n    const particleCount = this.config.physics.pop.particleCount;\n    for (let i = 0; i < particleCount; i++) {\n      const angle = (i / particleCount) * Math.PI * 2;\n      const speed = 1 + Math.random() * 2;\n      const dx = Math.cos(angle) * speed;\n      const dy = Math.sin(angle) * speed;\n      const size = 1 + Math.random() * 2;\n      const duration = 600 + Math.random() * 300;\n      \n      this.particleManager.createParticle(\n        bubble.x, bubble.y,\n        this.config.visuals.colors.wrongGlow,\n        size, dx, dy, duration\n      );\n    }\n  }\n\n  createPopParticles(bubble, isCorrect) {\n    const particleCount = this.config.physics.pop.particleCount;\n    const color = isCorrect ? this.config.visuals.colors.correctGlow : this.config.visuals.colors.bubbleBase;\n    \n    for (let i = 0; i < particleCount; i++) {\n      const angle = (i / particleCount) * Math.PI * 2;\n      const speed = 1 + Math.random() * 2;\n      const dx = Math.cos(angle) * speed;\n      const dy = Math.sin(angle) * speed;\n      const size = 1 + Math.random() * 2;\n      const duration = 500 + Math.random() * 500;\n      \n      this.particleManager.createParticle(\n        bubble.x, bubble.y,\n        color,\n        size, dx, dy, duration\n      );\n    }\n  }\n\n  deactivateBubble(bubble) {\n    bubble.active = false;\n    bubble.isPopping = false;\n    bubble.popAnimation = 0;\n    bubble.glowIntensity = 0;\n    bubble.lifetime = 0;\n    bubble.age = 0;\n    bubble.bounceCount = 0;\n  }\n\n  draw(ctx) {\n    this.bubbles.forEach(bubble => {\n      if (!bubble.active) return;\n      \n      ctx.save();\n      \n      if (bubble.isPopping) {\n        this.drawPoppingBubble(ctx, bubble);\n      } else {\n        this.drawBubble(ctx, bubble);\n      }\n      \n      ctx.restore();\n    });\n  }\n\n  drawBubble(ctx, bubble) {\n    // Draw glow effect for target letters\n    if (bubble.isTarget && this.config.visuals.effects.glow.enabled) {\n      ctx.globalAlpha = bubble.glowIntensity * 0.5;\n      ctx.fillStyle = this.config.visuals.colors.correctGlow;\n      ctx.beginPath();\n      ctx.arc(bubble.x, bubble.y, bubble.size / 2 + 10, 0, Math.PI * 2);\n      ctx.fill();\n    }\n    \n    // Draw bubble shadow\n    ctx.globalAlpha = 0.3;\n    ctx.fillStyle = this.config.visuals.colors.bubbleShadow;\n    ctx.beginPath();\n    ctx.arc(bubble.x + 2, bubble.y + 2, bubble.size / 2, 0, Math.PI * 2);\n    ctx.fill();\n    \n    // Draw main bubble\n    ctx.globalAlpha = 0.8;\n    const gradient = ctx.createRadialGradient(\n      bubble.x - bubble.size / 4, bubble.y - bubble.size / 4, 0,\n      bubble.x, bubble.y, bubble.size / 2\n    );\n    gradient.addColorStop(0, this.config.visuals.colors.bubbleHighlight);\n    gradient.addColorStop(1, this.config.visuals.colors.bubbleBase);\n    \n    ctx.fillStyle = gradient;\n    ctx.beginPath();\n    ctx.arc(bubble.x, bubble.y, bubble.size / 2, 0, Math.PI * 2);\n    ctx.fill();\n    \n    // Draw bubble highlight\n    ctx.globalAlpha = 0.9;\n    ctx.fillStyle = this.config.visuals.colors.bubbleHighlight;\n    ctx.beginPath();\n    ctx.arc(bubble.x - bubble.size / 4, bubble.y - bubble.size / 4, bubble.size / 8, 0, Math.PI * 2);\n    ctx.fill();\n    \n    // Draw shimmer effect\n    if (this.config.visuals.effects.shimmer.enabled) {\n      ctx.globalAlpha = 0.4 + Math.sin(this.shimmerPhase + bubble.shimmerOffset) * 0.2;\n      ctx.fillStyle = this.config.visuals.colors.bubbleHighlight;\n      ctx.beginPath();\n      ctx.arc(bubble.x + bubble.size / 6, bubble.y - bubble.size / 6, bubble.size / 12, 0, Math.PI * 2);\n      ctx.fill();\n    }\n    \n    // Draw letter\n    ctx.globalAlpha = 1.0;\n    ctx.fillStyle = this.config.visuals.colors.letterColor;\n    ctx.font = `bold ${bubble.size / 2}px Arial`;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(bubble.letter, bubble.x, bubble.y);\n  }\n\n  drawPoppingBubble(ctx, bubble) {\n    const progress = bubble.popAnimation;\n    const scale = 1 + progress * 0.5;\n    const alpha = 1 - progress;\n    \n    ctx.globalAlpha = alpha;\n    ctx.scale(scale, scale);\n    \n    // Draw expanded bubble\n    ctx.fillStyle = this.config.visuals.colors.bubbleBase;\n    ctx.beginPath();\n    ctx.arc(bubble.x / scale, bubble.y / scale, (bubble.size / 2) / scale, 0, Math.PI * 2);\n    ctx.fill();\n    \n    // Draw letter\n    ctx.fillStyle = this.config.visuals.colors.letterColor;\n    ctx.font = `bold ${(bubble.size / 2) / scale}px Arial`;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(bubble.letter, bubble.x / scale, bubble.y / scale);\n  }\n\n  reset() {\n    // Deactivate all bubbles\n    this.bubbles.forEach(bubble => this.deactivateBubble(bubble));\n    this.bubbles = [];\n    this.activeBubbles = 0;\n    \n    // Reset state\n    this.streak = 0;\n    this.combo = 0;\n    this.lastCorrectTime = 0;\n    this.lastSpawnTime = 0;\n    this.time = 0;\n    this.shimmerPhase = 0;\n  }\n\n  cleanup() {\n    this.removeEventListeners();\n    this.reset();\n  }\n\n  // Event handlers that can be set by parent level\n  onCorrectAnswer = null;\n  onWrongAnswer = null;\n}","import { BaseLevel } from '../baseLevel.js';\nimport { BubbleSystem } from './BubbleSystem.js';\nimport { PhonicsConfig } from './PhonicsConfig.js';\n\n/**\n * PhonicsLevel - Educational bubble-popping game focused on letter sounds\n * Simple, robust, and appealing design with optimized performance\n */\nexport class PhonicsLevel extends BaseLevel {\n  constructor(canvas, ctx, managers, helpers) {\n    super(canvas, ctx, managers, helpers);\n    \n    this.config = PhonicsConfig;\n    this.bubbleSystem = null;\n    \n    // Game state\n    this.currentDifficulty = 'easy';\n    this.targetLetter = 'A';\n    this.correctCount = 0;\n    this.totalAttempts = 0;\n    this.streak = 0;\n    this.timeRemaining = this.config.education.progression.levelDuration;\n    this.gameStartTime = 0;\n    \n    // UI state\n    this.showingInstructions = true;\n    this.celebrationTime = 0;\n    this.instructionAlpha = 1.0;\n    this.backgroundGradient = null;\n    \n    // Performance tracking\n    this.lastFrameTime = 0;\n    this.frameCount = 0;\n    this.avgFPS = 60;\n    \n    // Visual effects\n    this.backgroundPhase = 0;\n    this.targetLetterPulse = 0;\n    \n    // Bind methods\n    this.onCorrectAnswer = this.onCorrectAnswer.bind(this);\n    this.onWrongAnswer = this.onWrongAnswer.bind(this);\n  }\n\n  async init() {\n    console.log('ü´ß Initializing Phonics Level...');\n    \n    // Initialize bubble system\n    this.bubbleSystem = new BubbleSystem(\n      this.canvas, \n      this.ctx, \n      this.managers.particleManager,\n      this.managers.sound\n    );\n    \n    // Set up event handlers\n    this.bubbleSystem.onCorrectAnswer = this.onCorrectAnswer;\n    this.bubbleSystem.onWrongAnswer = this.onWrongAnswer;\n    \n    // Set initial difficulty and target\n    this.setDifficulty(this.currentDifficulty);\n    this.setNewTarget();\n    \n    // Create background gradient\n    this.createBackgroundGradient();\n    \n    // Resume audio context for user interaction\n    await this.managers.sound.resumeContext();\n    \n    // Show instructions\n    this.showInstructions();\n    \n    console.log('‚úÖ Phonics Level initialized successfully!');\n  }\n\n  createBackgroundGradient() {\n    this.backgroundGradient = this.ctx.createLinearGradient(\n      0, 0, 0, this.canvas.height\n    );\n    this.backgroundGradient.addColorStop(0, '#e3f2fd');\n    this.backgroundGradient.addColorStop(0.5, '#f8f9fa');\n    this.backgroundGradient.addColorStop(1, '#fff3e0');\n  }\n\n  setDifficulty(difficulty) {\n    this.currentDifficulty = difficulty;\n    if (this.bubbleSystem) {\n      this.bubbleSystem.setDifficulty(difficulty);\n    }\n    console.log(`üìä Difficulty set to: ${difficulty}`);\n  }\n\n  setNewTarget() {\n    const letters = this.config.education.difficulty[this.currentDifficulty].letters;\n    this.targetLetter = letters[Math.floor(Math.random() * letters.length)];\n    \n    if (this.bubbleSystem) {\n      this.bubbleSystem.setTargetLetter(this.targetLetter);\n    }\n    \n    // Play target letter sound\n    this.managers.sound.playPhonicsSound(this.targetLetter, 0.8);\n    \n    console.log(`üéØ New target letter: ${this.targetLetter}`);\n  }\n\n  showInstructions() {\n    this.showingInstructions = true;\n    this.instructionAlpha = 1.0;\n    \n    // Auto-hide instructions after 3 seconds\n    setTimeout(() => {\n      this.hideInstructions();\n    }, 3000);\n  }\n\n  hideInstructions() {\n    this.showingInstructions = false;\n    this.gameStartTime = performance.now();\n    \n    // Start the game timer\n    this.timeRemaining = this.config.education.progression.levelDuration;\n  }\n\n  onCorrectAnswer(letter, score) {\n    this.correctCount++;\n    this.totalAttempts++;\n    this.streak++;\n    \n    // Update score\n    this.updateScore(score);\n    \n    // Check if we need to advance difficulty\n    const targetCount = this.config.education.difficulty[this.currentDifficulty].targetCount;\n    if (this.correctCount >= targetCount) {\n      this.advanceDifficulty();\n    } else {\n      // Set new target letter\n      this.setNewTarget();\n    }\n    \n    // Show celebration effect\n    this.showCelebration();\n    \n    // Update HUD\n    if (this.managers.hud) {\n      this.managers.hud.updateStats(`Target: ${this.targetLetter} | Streak: ${this.streak} | ${this.correctCount}/${targetCount}`);\n    }\n    \n    console.log(`‚úÖ Correct! ${letter} - Score: ${score}, Streak: ${this.streak}`);\n  }\n\n  onWrongAnswer(letter, penalty) {\n    this.totalAttempts++;\n    this.streak = 0;\n    \n    // Update score\n    this.updateScore(penalty);\n    \n    // Brief pause for feedback\n    setTimeout(() => {\n      // Repeat target letter sound\n      this.managers.sound.playPhonicsSound(this.targetLetter, 0.8);\n    }, this.config.gameplay.pauseOnWrong);\n    \n    // Update HUD\n    if (this.managers.hud) {\n      this.managers.hud.updateStats(`Target: ${this.targetLetter} | Streak: ${this.streak} | ${this.correctCount}/${this.config.education.difficulty[this.currentDifficulty].targetCount}`);\n    }\n    \n    console.log(`‚ùå Wrong! ${letter} - Penalty: ${penalty}, Target was: ${this.targetLetter}`);\n  }\n\n  advanceDifficulty() {\n    const difficulties = ['easy', 'medium', 'hard'];\n    const currentIndex = difficulties.indexOf(this.currentDifficulty);\n    \n    if (currentIndex < difficulties.length - 1) {\n      this.currentDifficulty = difficulties[currentIndex + 1];\n      this.setDifficulty(this.currentDifficulty);\n      this.correctCount = 0; // Reset progress for new difficulty\n      this.setNewTarget();\n      \n      // Show advancement message\n      this.showAdvancementMessage();\n      \n      console.log(`üéâ Advanced to ${this.currentDifficulty} difficulty!`);\n    } else {\n      // Completed all difficulties\n      this.completeLevel();\n    }\n  }\n\n  showCelebration() {\n    this.celebrationTime = this.config.gameplay.celebrationDuration;\n    \n    // Create celebration particles\n    this.createCelebrationParticles();\n  }\n\n  showAdvancementMessage() {\n    if (this.managers.checkpoint) {\n      this.managers.checkpoint.showCheckpoint(`Level Up!<br>Now playing: ${this.currentDifficulty.toUpperCase()} mode`);\n    }\n  }\n\n  createCelebrationParticles() {\n    const centerX = this.canvas.width / 2;\n    const centerY = this.canvas.height / 2;\n    \n    for (let i = 0; i < 20; i++) {\n      const angle = (i / 20) * Math.PI * 2;\n      const speed = 3 + Math.random() * 5;\n      const dx = Math.cos(angle) * speed;\n      const dy = Math.sin(angle) * speed;\n      const size = 2 + Math.random() * 4;\n      const duration = 1000 + Math.random() * 1000;\n      \n      this.managers.particleManager.createParticle(\n        centerX, centerY,\n        this.config.visuals.colors.correctGlow,\n        size, dx, dy, duration\n      );\n    }\n  }\n\n  completeLevel() {\n    console.log('üéâ Level completed!');\n    \n    // Calculate final score bonus\n    const accuracy = this.correctCount / Math.max(1, this.totalAttempts);\n    const timeBonus = Math.floor(this.timeRemaining / 1000) * 10;\n    const accuracyBonus = Math.floor(accuracy * 500);\n    \n    this.updateScore(timeBonus + accuracyBonus);\n    \n    // Show completion message\n    if (this.managers.checkpoint) {\n      this.managers.checkpoint.showCheckpoint(\n        `Phonics Master!<br>Accuracy: ${Math.floor(accuracy * 100)}%<br>Time Bonus: ${timeBonus}<br>Accuracy Bonus: ${accuracyBonus}`\n      );\n    }\n    \n    // End the level after celebration\n    setTimeout(() => {\n      this.end();\n    }, 3000);\n  }\n\n  update(deltaTime) {\n    if (!this.running) return;\n    \n    // Update performance tracking\n    this.updatePerformanceStats(deltaTime);\n    \n    // Update visual effects\n    this.updateVisualEffects(deltaTime);\n    \n    // Update game timer\n    this.updateGameTimer(deltaTime);\n    \n    // Update bubble system\n    if (this.bubbleSystem) {\n      this.bubbleSystem.update(deltaTime);\n    }\n    \n    // Update instruction fade\n    if (this.showingInstructions) {\n      this.updateInstructions(deltaTime);\n    }\n    \n    // Update celebration\n    if (this.celebrationTime > 0) {\n      this.celebrationTime -= deltaTime;\n    }\n    \n    // Check for level completion conditions\n    this.checkLevelCompletion();\n  }\n\n  updatePerformanceStats(deltaTime) {\n    this.frameCount++;\n    const now = performance.now();\n    \n    if (now - this.lastFrameTime >= 1000) {\n      this.avgFPS = this.frameCount;\n      this.frameCount = 0;\n      this.lastFrameTime = now;\n      \n      // Adjust quality based on performance\n      if (this.avgFPS < 45) {\n        this.reducedQuality = true;\n      } else if (this.avgFPS > 55) {\n        this.reducedQuality = false;\n      }\n    }\n  }\n\n  updateVisualEffects(deltaTime) {\n    this.backgroundPhase += deltaTime * 0.001;\n    this.targetLetterPulse += deltaTime * 0.005;\n  }\n\n  updateGameTimer(deltaTime) {\n    if (!this.showingInstructions && this.timeRemaining > 0) {\n      this.timeRemaining -= deltaTime;\n      \n      if (this.timeRemaining <= 0) {\n        this.timeRemaining = 0;\n        this.completeLevel();\n      }\n    }\n  }\n\n  updateInstructions(deltaTime) {\n    // Fade out instructions over time\n    if (this.instructionAlpha > 0) {\n      this.instructionAlpha -= deltaTime / 1000;\n      this.instructionAlpha = Math.max(0, this.instructionAlpha);\n    }\n  }\n\n  checkLevelCompletion() {\n    // Check if all difficulties completed\n    if (this.currentDifficulty === 'hard' && \n        this.correctCount >= this.config.education.difficulty.hard.targetCount) {\n      this.completeLevel();\n    }\n  }\n\n  render() {\n    if (!this.running) return;\n    \n    // Clear and draw background\n    this.drawBackground();\n    \n    // Draw bubble system\n    if (this.bubbleSystem) {\n      this.bubbleSystem.draw(this.ctx);\n    }\n    \n    // Draw UI elements\n    this.drawUI();\n    \n    // Draw instructions if showing\n    if (this.showingInstructions) {\n      this.drawInstructions();\n    }\n    \n    // Draw celebration effects\n    if (this.celebrationTime > 0) {\n      this.drawCelebration();\n    }\n    \n    // Draw debug info if needed\n    if (this.showDebugInfo) {\n      this.drawDebugInfo();\n    }\n  }\n\n  drawBackground() {\n    // Animated gradient background\n    this.ctx.fillStyle = this.backgroundGradient;\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    \n    // Subtle animated patterns\n    this.ctx.save();\n    this.ctx.globalAlpha = 0.1;\n    \n    // Draw floating circles\n    for (let i = 0; i < 5; i++) {\n      const x = (i * 0.2 + 0.1) * this.canvas.width;\n      const y = this.canvas.height * 0.5 + Math.sin(this.backgroundPhase + i) * 50;\n      const radius = 20 + Math.sin(this.backgroundPhase * 0.5 + i) * 10;\n      \n      this.ctx.fillStyle = this.config.visuals.colors.bubbleBase;\n      this.ctx.beginPath();\n      this.ctx.arc(x, y, radius, 0, Math.PI * 2);\n      this.ctx.fill();\n    }\n    \n    this.ctx.restore();\n  }\n\n  drawUI() {\n    this.ctx.save();\n    \n    // Draw target letter display\n    this.drawTargetLetter();\n    \n    // Draw progress bar\n    this.drawProgress();\n    \n    // Draw timer\n    this.drawTimer();\n    \n    // Draw score and streak\n    this.drawScoreInfo();\n    \n    this.ctx.restore();\n  }\n\n  drawTargetLetter() {\n    const centerX = this.canvas.width / 2;\n    const y = 80;\n    \n    // Draw background for target letter\n    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n    this.ctx.fillRect(centerX - 60, y - 40, 120, 80);\n    \n    // Draw border\n    this.ctx.strokeStyle = this.config.visuals.colors.correctGlow;\n    this.ctx.lineWidth = 3;\n    this.ctx.strokeRect(centerX - 60, y - 40, 120, 80);\n    \n    // Draw \"Find:\" label\n    this.ctx.fillStyle = this.config.visuals.colors.letterColor;\n    this.ctx.font = 'bold 16px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText('Find:', centerX, y - 20);\n    \n    // Draw target letter with pulsing effect\n    const pulseScale = 1 + Math.sin(this.targetLetterPulse) * 0.1;\n    this.ctx.save();\n    this.ctx.scale(pulseScale, pulseScale);\n    \n    this.ctx.fillStyle = this.config.visuals.colors.letterColor;\n    this.ctx.font = 'bold 32px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(this.targetLetter, centerX / pulseScale, (y + 15) / pulseScale);\n    \n    this.ctx.restore();\n  }\n\n  drawProgress() {\n    const targetCount = this.config.education.difficulty[this.currentDifficulty].targetCount;\n    const progress = this.correctCount / targetCount;\n    \n    const barWidth = 200;\n    const barHeight = 20;\n    const x = this.canvas.width / 2 - barWidth / 2;\n    const y = 150;\n    \n    // Draw background\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';\n    this.ctx.fillRect(x, y, barWidth, barHeight);\n    \n    // Draw progress\n    this.ctx.fillStyle = this.config.visuals.colors.correctGlow;\n    this.ctx.fillRect(x, y, barWidth * progress, barHeight);\n    \n    // Draw text\n    this.ctx.fillStyle = this.config.visuals.colors.letterColor;\n    this.ctx.font = 'bold 14px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText(`${this.correctCount}/${targetCount} - ${this.currentDifficulty.toUpperCase()}`, \n                      this.canvas.width / 2, y + 35);\n  }\n\n  drawTimer() {\n    const minutes = Math.floor(this.timeRemaining / 60000);\n    const seconds = Math.floor((this.timeRemaining % 60000) / 1000);\n    const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n    \n    this.ctx.fillStyle = this.config.visuals.colors.letterColor;\n    this.ctx.font = 'bold 18px Arial';\n    this.ctx.textAlign = 'right';\n    this.ctx.fillText(timeString, this.canvas.width - 20, 30);\n  }\n\n  drawScoreInfo() {\n    this.ctx.fillStyle = this.config.visuals.colors.letterColor;\n    this.ctx.font = 'bold 16px Arial';\n    this.ctx.textAlign = 'left';\n    this.ctx.fillText(`Score: ${this.score}`, 20, 30);\n    \n    if (this.streak > 0) {\n      this.ctx.fillStyle = this.config.visuals.colors.correctGlow;\n      this.ctx.fillText(`Streak: ${this.streak}`, 20, 55);\n    }\n  }\n\n  drawInstructions() {\n    if (this.instructionAlpha <= 0) return;\n    \n    this.ctx.save();\n    this.ctx.globalAlpha = this.instructionAlpha;\n    \n    // Draw semi-transparent background\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    \n    // Draw instructions\n    this.ctx.fillStyle = 'white';\n    this.ctx.font = 'bold 24px Arial';\n    this.ctx.textAlign = 'center';\n    this.ctx.fillText('Phonics Bubbles', this.canvas.width / 2, this.canvas.height / 2 - 80);\n    \n    this.ctx.font = '18px Arial';\n    this.ctx.fillText('Pop the bubbles with the target letter!', this.canvas.width / 2, this.canvas.height / 2 - 40);\n    this.ctx.fillText('Listen to the letter sounds and learn!', this.canvas.width / 2, this.canvas.height / 2 - 10);\n    this.ctx.fillText('Click or tap to start...', this.canvas.width / 2, this.canvas.height / 2 + 40);\n    \n    this.ctx.restore();\n  }\n\n  drawCelebration() {\n    const intensity = this.celebrationTime / this.config.gameplay.celebrationDuration;\n    \n    this.ctx.save();\n    this.ctx.globalAlpha = intensity * 0.5;\n    \n    // Draw celebration glow\n    const gradient = this.ctx.createRadialGradient(\n      this.canvas.width / 2, this.canvas.height / 2, 0,\n      this.canvas.width / 2, this.canvas.height / 2, 200\n    );\n    gradient.addColorStop(0, this.config.visuals.colors.correctGlow);\n    gradient.addColorStop(1, 'transparent');\n    \n    this.ctx.fillStyle = gradient;\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    \n    this.ctx.restore();\n  }\n\n  drawDebugInfo() {\n    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n    this.ctx.fillRect(10, this.canvas.height - 100, 200, 90);\n    \n    this.ctx.fillStyle = 'white';\n    this.ctx.font = '12px Arial';\n    this.ctx.textAlign = 'left';\n    this.ctx.fillText(`FPS: ${this.avgFPS}`, 15, this.canvas.height - 80);\n    this.ctx.fillText(`Bubbles: ${this.bubbleSystem ? this.bubbleSystem.activeBubbles : 0}`, 15, this.canvas.height - 65);\n    this.ctx.fillText(`Target: ${this.targetLetter}`, 15, this.canvas.height - 50);\n    this.ctx.fillText(`Difficulty: ${this.currentDifficulty}`, 15, this.canvas.height - 35);\n    this.ctx.fillText(`Progress: ${this.correctCount}`, 15, this.canvas.height - 20);\n  }\n\n  // Handle user input to start game\n  handleInput() {\n    if (this.showingInstructions) {\n      this.hideInstructions();\n    }\n  }\n\n  pause() {\n    super.pause();\n    if (this.bubbleSystem) {\n      this.bubbleSystem.removeEventListeners();\n    }\n  }\n\n  resume() {\n    super.resume();\n    if (this.bubbleSystem) {\n      this.bubbleSystem.setupEventListeners();\n    }\n  }\n\n  reset() {\n    super.reset();\n    \n    // Reset game state\n    this.currentDifficulty = 'easy';\n    this.correctCount = 0;\n    this.totalAttempts = 0;\n    this.streak = 0;\n    this.timeRemaining = this.config.education.progression.levelDuration;\n    this.celebrationTime = 0;\n    \n    // Reset bubble system\n    if (this.bubbleSystem) {\n      this.bubbleSystem.reset();\n      this.bubbleSystem.setDifficulty(this.currentDifficulty);\n    }\n    \n    // Reset UI\n    this.showingInstructions = true;\n    this.instructionAlpha = 1.0;\n    \n    // Set new target\n    this.setNewTarget();\n  }\n\n  cleanup() {\n    super.cleanup();\n    \n    if (this.bubbleSystem) {\n      this.bubbleSystem.cleanup();\n    }\n  }\n\n  // Getters for level status\n  get accuracy() {\n    return this.correctCount / Math.max(1, this.totalAttempts);\n  }\n\n  get progress() {\n    const targetCount = this.config.education.difficulty[this.currentDifficulty].targetCount;\n    return this.correctCount / targetCount;\n  }\n\n  get levelInfo() {\n    return {\n      name: 'Phonics Bubbles',\n      difficulty: this.currentDifficulty,\n      progress: this.progress,\n      accuracy: this.accuracy,\n      score: this.score,\n      streak: this.streak\n    };\n  }\n}","import { ProgressManager } from '../managers/progressManager.js';\n\n// Level selection menu UI\nexport class LevelMenu {\n  constructor(containerId, onSelect) {\n    this.container = document.getElementById(containerId);\n    this.onSelect = onSelect;\n    this.progressManager = new ProgressManager();\n    \n    // Define available levels with descriptions\n    this.levels = [\n      { \n        name: 'colors', \n        label: 'Colors Level', \n        description: 'Match the target color from memory',\n        difficulty: '‚òÖ‚òÜ‚òÜ'\n      },\n      { \n        name: 'shapes', \n        label: 'Shapes Level', \n        description: 'Target shapes in sequence',\n        difficulty: '‚òÖ‚òÖ‚òÜ'\n      },\n      { \n        name: 'alphabet', \n        label: 'Alphabet Level', \n        description: 'A through Z in order',\n        difficulty: '‚òÖ‚òÖ‚òÜ'\n      },\n      { \n        name: 'numbers', \n        label: 'Numbers Level', \n        description: '1 through 10 in order',\n        difficulty: '‚òÖ‚òÖ‚òÜ'\n      },\n      { \n        name: 'clcase', \n        label: 'Case Level', \n        description: 'a through z in order',\n        difficulty: '‚òÖ‚òÖ‚òÖ'\n      },\n      { \n        name: 'phonics', \n        label: 'Phonics Bubbles', \n        description: 'Pop bubbles and learn letter sounds! ü´ß',\n        difficulty: '‚òÖ‚òÜ‚òÜ'\n      }\n    ];\n  }\n\n  show() {\n    const progress = this.progressManager.getProgress();\n    \n    // Build menu markup with progress indicators\n    const html = [\n      `<div class=\"level-menu\">`,\n      `<h2>Select Level</h2>`,\n      `<div class=\"progress-summary\">`,\n      `<p>Completion: ${this.progressManager.getCompletionPercentage()}%</p>`,\n      `<p>Total Score: ${progress.totalScore}</p>`,\n      `</div>`,\n      `<div class=\"level-grid\">`,\n      this.levels.map(level => {\n        const isUnlocked = this.progressManager.isLevelUnlocked(level.name);\n        const isCompleted = this.progressManager.isLevelCompleted(level.name);\n        const score = this.progressManager.getLevelScore(level.name);\n        \n        const statusClass = isCompleted ? 'completed' : (isUnlocked ? 'unlocked' : 'locked');\n        const statusIcon = isCompleted ? '‚úì' : (isUnlocked ? '‚óè' : 'üîí');\n        \n        return `\n          <div class=\"level-card ${statusClass}\" ${isUnlocked ? `data-level=\"${level.name}\"` : ''}>\n            <div class=\"level-status\">${statusIcon}</div>\n            <h3>${level.label}</h3>\n            <p class=\"level-description\">${level.description}</p>\n            <p class=\"level-difficulty\">Difficulty: ${level.difficulty}</p>\n            ${isCompleted ? `<p class=\"level-score\">Best: ${score}</p>` : ''}\n            ${!isUnlocked ? '<p class=\"level-locked\">Complete previous level to unlock</p>' : ''}\n          </div>\n        `;\n      }).join(''),\n      `</div>`,\n      `<div class=\"menu-actions\">`,\n      `<button class=\"back-button\">Back</button>`,\n      `<button class=\"reset-button\">Reset Progress</button>`,\n      `</div>`,\n      `</div>`\n    ].join('');\n    \n    this.container.innerHTML = html;\n    this.container.style.display = 'flex';\n    \n    // Attach event listeners\n    this.levels.forEach(level => {\n      const card = this.container.querySelector(`[data-level=\"${level.name}\"]`);\n      if (card) {\n        card.addEventListener('click', () => this.selectLevel(level.name));\n        card.style.cursor = 'pointer';\n      }\n    });\n    \n    const backBtn = this.container.querySelector('.back-button');\n    if (backBtn) backBtn.addEventListener('click', () => this.back());\n    \n    const resetBtn = this.container.querySelector('.reset-button');\n    if (resetBtn) resetBtn.addEventListener('click', () => this.resetProgress());\n  }\n\n  selectLevel(name) {\n    if (this.progressManager.isLevelUnlocked(name) && typeof this.onSelect === 'function') {\n      this.container.style.display = 'none';\n      this.onSelect(name);\n    }\n  }\n\n  resetProgress() {\n    if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {\n      this.progressManager.resetProgress();\n      this.show(); // Refresh the menu\n    }\n  }\n\n  back() {\n    // Reload page or reset to welcome screen\n    window.location.reload();\n  }\n}\n","// InputHandler: unified pointer and keyboard input management\nexport class InputHandler {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.pointerDownListeners = [];\n    this.pointerUpListeners = [];\n    this.pointerMoveListeners = [];\n    this.keyDownListeners = [];\n\n    // Bind methods to preserve 'this' context\n    this._boundHandlePointerDown = (e) => this._handlePointerDown(e);\n    this._boundHandlePointerUp = (e) => this._handlePointerUp(e);\n    this._boundHandlePointerMove = (e) => this._handlePointerMove(e);\n    this._boundHandleKeyDown = (e) => this._handleKeyDown(e);\n\n    // Bind events\n    canvas.addEventListener('pointerdown', this._boundHandlePointerDown);\n    canvas.addEventListener('pointerup', this._boundHandlePointerUp);\n    canvas.addEventListener('pointermove', this._boundHandlePointerMove);\n    window.addEventListener('keydown', this._boundHandleKeyDown);\n  }\n\n  _handlePointerDown(event) {\n    const pos = this._getPointerPosition(event);\n    this.pointerDownListeners.forEach(cb => cb(pos, event));\n  }\n\n  _handlePointerUp(event) {\n    const pos = this._getPointerPosition(event);\n    this.pointerUpListeners.forEach(cb => cb(pos, event));\n  }\n\n  _handlePointerMove(event) {\n    const pos = this._getPointerPosition(event);\n    this.pointerMoveListeners.forEach(cb => cb(pos, event));\n  }\n\n  _handleKeyDown(event) {\n    this.keyDownListeners.forEach(cb => cb(event.code, event));\n  }\n\n  _getPointerPosition(event) {\n    if (!this.canvas) {\n      console.warn('Canvas not available for pointer position calculation');\n      return { x: 0, y: 0 };\n    }\n    \n    const rect = this.canvas.getBoundingClientRect();\n    if (!rect) {\n      console.warn('Could not get canvas bounding rect');\n      return { x: 0, y: 0 };\n    }\n    \n    // Prevent division by zero\n    const scaleX = rect.width > 0 ? this.canvas.width / rect.width : 1;\n    const scaleY = rect.height > 0 ? this.canvas.height / rect.height : 1;\n    \n    return {\n      x: (event.clientX - rect.left) * scaleX,\n      y: (event.clientY - rect.top) * scaleY\n    };\n  }\n\n  onPointerDown(callback) {\n    this.pointerDownListeners.push(callback);\n  }\n\n  onPointerUp(callback) {\n    this.pointerUpListeners.push(callback);\n  }\n\n  onPointerMove(callback) {\n    this.pointerMoveListeners.push(callback);\n  }\n\n  onKeyDown(callback) {\n    this.keyDownListeners.push(callback);\n  }\n\n  // Cleanup method to prevent memory leaks\n  destroy() {\n    if (this.canvas) {\n      this.canvas.removeEventListener('pointerdown', this._boundHandlePointerDown);\n      this.canvas.removeEventListener('pointerup', this._boundHandlePointerUp);\n      this.canvas.removeEventListener('pointermove', this._boundHandlePointerMove);\n    }\n    window.removeEventListener('keydown', this._boundHandleKeyDown);\n    \n    // Clear all listeners\n    this.pointerDownListeners = [];\n    this.pointerUpListeners = [];\n    this.pointerMoveListeners = [];\n    this.keyDownListeners = [];\n    \n    // Clear references\n    this.canvas = null;\n  }\n}\n","import { GAME_CONFIG } from './constants.js';\n\n/**\n * Detects whether to use DEFAULT or QBOARD mode based on screen resolution.\n * @returns {'DEFAULT'|'QBOARD'}\n */\nexport function detectDisplayMode() {\n  const width = window.innerWidth;\n  const height = window.innerHeight;\n  return (width > 2560 && height > 1440) ? 'QBOARD' : 'DEFAULT';\n}\n\n/**\n * Returns display-specific settings from GAME_CONFIG.\n */\nexport function getDisplaySettings() {\n  const mode = detectDisplayMode();\n  return {\n    fontSizes: GAME_CONFIG.FONT_SIZES[mode],\n    maxParticles: GAME_CONFIG.MAX_PARTICLES[mode],\n    maxExplosions: GAME_CONFIG.MAX_EXPLOSIONS[mode],\n    motherRadius: GAME_CONFIG.MOTHER_RADIUS[mode],\n    collisionFrequency: GAME_CONFIG.COLLISION_CHECK_FREQUENCY[mode]\n  };\n}\n","/**\n * Welcome Screen with Animated Background\n * As specified in SuperStudentHTML.md\n */\nexport class WelcomeScreen {\n  constructor(canvas, ctx, resourceManager) {\n    this.canvas = canvas;\n    this.bgCanvas = document.createElement('canvas');\n    this.bgCanvas.className = 'welcome-bg-canvas';\n    this.bgCtx = this.bgCanvas.getContext('2d');\n    this.syncCanvasSize();\n    this.resourceManager = resourceManager;\n    this.particles = [];\n    this.animationId = null;\n    this.isVisible = false;\n    \n    // Animation properties\n    this.time = 0;\n    this.maxParticles = 150;\n    this.particleSpeed = 0.5;\n    \n    // Callbacks\n    this.onStartGame = null;\n    this.onShowOptions = null;\n    \n    this.particleColors = ['#ff595e','#ffca3a','#8ac926','#1982c4','#6a4c93'];\n    \n    this.setupParticles();\n    this.setupUI();\n\n    // Keep background canvas in sync on resize\n    window.addEventListener('resize', () => this.onResize());\n  }\n  \n  setupParticles() {\n    // Create animated background particles (color confetti style)\n    for (let i = 0; i < this.maxParticles; i++) {\n      this.particles.push({\n        x: Math.random() * this.bgCanvas.width,\n        y: Math.random() * this.bgCanvas.height,\n        size: Math.random() * 6 + 2,\n        speed: Math.random() * this.particleSpeed + 0.3,\n        opacity: Math.random() * 0.9 + 0.1,\n        color: this.particleColors[Math.floor(Math.random()*this.particleColors.length)]\n      });\n    }\n  }\n  \n  setupUI() {\n    // Create DOM elements for welcome screen UI\n    this.createWelcomeScreenHTML();\n    this.attachEventListeners();\n  }\n  \n  createWelcomeScreenHTML() {\n    // Remove existing welcome screen if present\n    const existing = document.getElementById('welcome-screen');\n    if (existing) existing.remove();\n\n    const welcomeDiv = document.createElement('div');\n    welcomeDiv.id = 'welcome-screen';\n    welcomeDiv.className = 'welcome-screen-overlay';\n\n    // Insert background canvas first\n    welcomeDiv.appendChild(this.bgCanvas);\n\n    welcomeDiv.innerHTML += `\n      <div class=\"welcome-content\">\n        <h1 class=\"game-title\">Super Student</h1>\n        <div class=\"display-size-section\">\n          <p class=\"choose-text\">Choose Display Size</p>\n          <div class=\"display-btn-group\">\n            <button class=\"display-btn default\" data-mode=\"DEFAULT\">Default</button>\n            <button class=\"display-btn qboard\" data-mode=\"QBOARD\">QBoard</button>\n          </div>\n          <p class=\"mode-selected-text\" style=\"display:none;\"></p>\n        </div>\n        <footer class=\"collaboration-footer\">\n          <p>In collaboration with <span class=\"highlight\">SANGSOM Kindergarten</span></p>\n        </footer>\n      </div>`;\n\n    document.body.appendChild(welcomeDiv);\n    this.addWelcomeScreenCSS();\n  }\n  \n  addWelcomeScreenCSS() {\n    const style = document.createElement('style');\n    style.textContent = `\n      .welcome-screen-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        background: rgba(0,0,0,0.8);\n        backdrop-filter: blur(2px);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 1000;\n        opacity: 0;\n        transition: opacity 0.5s ease-in-out;\n      }\n      .welcome-screen-overlay.visible { opacity:1; }\n      .welcome-content { text-align:center; color:white; max-width:90vw; }\n      .game-title { font-size:10vw; margin:0 0 40px 0; color:#ffd700; font-weight:900; text-shadow:3px 3px 8px rgba(0,0,0,0.6); }\n      .choose-text { font-size:1.2rem; margin-bottom:16px; letter-spacing:1px; }\n      .display-btn-group { display:flex; gap:40px; justify-content:center; flex-wrap:wrap; margin-bottom:30px; }\n      .display-btn {\n        width:200px; height:60px; font-size:1.1rem; font-weight:600; background:transparent; border:3px solid currentColor; color:white; cursor:pointer; transition:transform 0.2s, opacity 0.3s;\n      }\n      .display-btn.default { color:#00bfff; }\n      .display-btn.qboard { color:#ff4080; }\n      .display-btn:hover { transform:translateY(-4px); }\n      .display-btn.selected { opacity:0.6; cursor:default; }\n      .collaboration-footer { position:absolute; bottom:40px; left:50%; transform:translateX(-50%); font-size:2vw; }\n      .highlight { color:#ffd700; }\n      @media(max-width:768px){ .game-title { font-size:12vw; } .display-btn { width:160px; height:50px; } .collaboration-footer{ font-size:4vw;} }\n      /* Background canvas */\n      .welcome-bg-canvas { position:absolute; top:0; left:0; width:100%; height:100%; z-index:-1; }\n    `;\n    document.head.appendChild(style);\n  }\n  \n  attachEventListeners() {\n    const updateSelection = (button) => {\n      document.querySelectorAll('.display-btn').forEach(btn => btn.classList.remove('selected'));\n      button.classList.add('selected');\n      const mode = button.dataset.mode;\n      this.resourceManager.setDisplayMode(mode);\n      const textEl = document.querySelector('.mode-selected-text');\n      if (textEl){\n        textEl.style.display='block';\n        textEl.textContent=`Display mode set to ${mode}. Loading...`;\n      }\n      setTimeout(()=>{ if(this.onStartGame){ this.hide(); this.onStartGame(); } }, 1200);\n    };\n\n    setTimeout(()=>{\n      document.querySelectorAll('.display-btn').forEach(btn => {\n        btn.addEventListener('click',()=> updateSelection(btn));\n      });\n    },100);\n  }\n  \n  show() {\n    this.isVisible = true;\n    this.startAnimation();\n    \n    setTimeout(() => {\n      const welcomeScreen = document.getElementById('welcome-screen');\n      if (welcomeScreen) {\n        welcomeScreen.classList.add('visible');\n      }\n    }, 100);\n  }\n  \n  hide() {\n    this.isVisible = false;\n    this.stopAnimation();\n    \n    const welcomeScreen = document.getElementById('welcome-screen');\n    if (welcomeScreen) {\n      welcomeScreen.classList.remove('visible');\n      setTimeout(() => {\n        welcomeScreen.remove();\n      }, 500);\n    }\n  }\n  \n  startAnimation() {\n    if (this.animationId) return;\n    \n    const animate = () => {\n      if (!this.isVisible) return;\n      \n      this.updateAnimatedBackground();\n      this.renderAnimatedBackground();\n      \n      this.animationId = requestAnimationFrame(animate);\n    };\n    \n    animate();\n  }\n  \n  stopAnimation() {\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n      this.animationId = null;\n    }\n  }\n  \n  updateAnimatedBackground() {\n    this.time += 0.01;\n    \n    this.particles.forEach(particle => {\n      particle.y -= particle.speed;\n      \n      if (particle.y < -10) {\n        particle.y = this.bgCanvas.height + 10;\n        particle.x = Math.random() * this.bgCanvas.width;\n      }\n      \n      particle.opacity = 0.5 + Math.sin(this.time * 0.1) * 0.3;\n    });\n  }\n  \n  renderAnimatedBackground() {\n    const ctx = this.bgCtx;\n    ctx.fillStyle = 'rgba(0,0,0,0.9)';\n    ctx.fillRect(0,0,this.bgCanvas.width,this.bgCanvas.height);\n    this.particles.forEach(p=>{\n      ctx.save();\n      ctx.globalAlpha = p.opacity;\n      ctx.fillStyle = p.color;\n      ctx.beginPath();\n      ctx.arc(p.x,p.y,p.size,0,Math.PI*2);\n      ctx.fill();\n      ctx.restore();\n    });\n  }\n  \n  onResize() {\n    this.syncCanvasSize();\n    // Re-position particles within new bounds\n    this.particles.forEach(particle => {\n      if (particle.x > this.bgCanvas.width) {\n        particle.x = Math.random() * this.bgCanvas.width;\n      }\n      if (particle.y > this.bgCanvas.height) {\n        particle.y = Math.random() * this.bgCanvas.height;\n      }\n    });\n  }\n  \n  syncCanvasSize() {\n    this.bgCanvas.width = window.innerWidth;\n    this.bgCanvas.height = window.innerHeight;\n  }\n  \n  setCallbacks(startGameCallback, showOptionsCallback) {\n    this.onStartGame = startGameCallback;\n    this.onShowOptions = showOptionsCallback;\n  }\n} ","// Error Tracker Utility\n// Lightweight helper to capture global JavaScript errors and unhandled promise\n// rejections at runtime.  It logs them to the console (or custom logger) and\n// can optionally display a small overlay at the top of the page so testers\n// immediately see when something went wrong without opening DevTools.\n\nexport function initializeErrorTracker(options = {}) {\n  const {\n    overlay = true,\n    logger = console.error\n  } = options;\n\n  const errorLog = [];\n  let overlayEl = null;\n\n  function appendOverlay(line) {\n    if (!overlay) return;\n    if (!overlayEl) {\n      overlayEl = document.createElement('div');\n      overlayEl.id = 'error-overlay';\n      overlayEl.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        z-index: 99999;\n        background: rgba(200, 0, 0, 0.9);\n        color: #fff;\n        font: 12px/1.4 monospace;\n        max-height: 200px;\n        overflow-y: auto;\n        padding: 6px 8px;\n        white-space: pre-wrap;`;\n      document.body.appendChild(overlayEl);\n    }\n    const div = document.createElement('div');\n    div.textContent = line;\n    overlayEl.appendChild(div);\n  }\n\n  function record(type, message, source, lineno, colno, error) {\n    const entry = {\n      type,\n      message,\n      source,\n      lineno,\n      colno,\n      stack: error && error.stack,\n      timestamp: Date.now()\n    };\n    errorLog.push(entry);\n\n    const time = new Date(entry.timestamp).toLocaleTimeString();\n    const line = `[${time}] ${type}: ${message}${source ? ` (${source}:${lineno}:${colno})` : ''}`;\n    logger(line);\n    if (error && error.stack) logger(error.stack);\n    appendOverlay(line);\n  }\n\n  window.addEventListener('error', (e) => {\n    record('Error', e.message, e.filename, e.lineno, e.colno, e.error);\n  });\n\n  window.addEventListener('unhandledrejection', (e) => {\n    record('Unhandled Promise', e.reason?.message || String(e.reason), '', 0, 0, e.reason);\n  });\n\n  return {\n    getErrors() {\n      return errorLog.slice();\n    },\n    clear() {\n      errorLog.length = 0;\n      if (overlayEl) overlayEl.innerHTML = '';\n    }\n  };\n} ","import ResourceManager from './resourceManager.js';\nimport ParticleManager from './particleSystem.js';\nimport SoundManager from './soundManager.js';\nimport { Renderer } from './renderer.js';\nimport { GameLoop } from '../gameLoop.js';\nimport HudManager from '../managers/hudManager.js';\nimport CheckpointManager from '../managers/checkpointManager.js';\nimport FlamethrowerManager from '../managers/flamethrowerManager.js';\nimport CenterPieceManager from '../managers/centerPieceManager.js';\nimport MultiTouchManager from '../managers/multiTouchManager.js';\nimport GlassShatterManager from '../managers/glassShatterManager.js';\nimport { ProgressManager } from '../managers/progressManager.js';\nimport ColorsLevel from '../levels/colorsLevel.js';\nimport ShapesLevel from '../levels/shapesLevel.js';\nimport AlphabetLevel from '../levels/alphabetLevel.js';\nimport NumbersLevel from '../levels/numbersLevel.js';\nimport ClCaseLevel from '../levels/clCaseLevel.js';\nimport { PhonicsLevel } from '../levels/phonics/PhonicsLevel.js';\nimport { LevelMenu } from '../ui/levelMenu.js';\nimport { InputHandler } from '../inputHandler.js';\nimport { getDisplaySettings } from '../config/displayModes.js';\nimport { getAudioConfig } from '../config/audioConfig.js';\nimport { GAME_CONFIG } from '../config/constants.js';\nimport { WelcomeScreen } from '../ui/welcomeScreen.js';\nimport { initializeErrorTracker } from '../utils/errorTracker.js';\n\nlet canvas;\nlet renderer;\nlet ctx;\n\n// Current display-specific settings\nlet displaySettings;\nlet resourceManager;\nlet particleManager;\nlet soundManager;\nlet progressManager;\nlet managers = {};\nlet currentLevel = null;\nlet currentLevelName = '';\nlet gameState = 'menu'; // menu, playing, paused, gameOver\nlet lastTime = 0;\nlet gameLoop;\nlet welcomeScreen;\n\nfunction resizeCanvas() {\n  renderer.setupCanvas();\n  // Update managers and level with new canvas size\n  if (managers.hud) managers.hud.resize(renderer.canvas);\n  if (managers.centerPiece) managers.centerPiece.resize(renderer.canvas);\n  if (currentLevel && typeof currentLevel.resize === 'function') {\n    currentLevel.resize(renderer.canvas);\n  }\n}\n\n// Initialize and show welcome screen with animated background\nfunction initializeWelcomeScreen() {\n  console.log('üè† Initializing WelcomeScreen class with animated background...');\n  \n  // Create WelcomeScreen instance as specified in SuperStudentHTML.md\n  welcomeScreen = new WelcomeScreen(canvas, ctx, resourceManager);\n  welcomeScreen.setCallbacks(showLevelMenu, showOptions);\n  welcomeScreen.show();\n  \n  console.log('‚úÖ WelcomeScreen initialized with animated background!');\n}\n\n// Show level selection menu\nfunction showLevelMenu() {\n  console.log('üéÆ Showing level menu...');\n  \n  // Hide the welcome screen first\n  if (welcomeScreen) {\n    welcomeScreen.hide();\n  }\n  \n  // Create a temporary container for level menu\n  const menuContainer = document.createElement('div');\n  menuContainer.id = 'level-menu-container';\n  menuContainer.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background: rgba(0, 0, 0, 0.9);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n    color: white;\n  `;\n  document.body.appendChild(menuContainer);\n  \n  const menu = new LevelMenu('level-menu-container', startLevel);\n  menu.show();\n  gameState = 'menu';\n}\n\n// Start the selected level\nfunction startLevel(levelName) {\n  console.log(`üéØ Starting level: ${levelName}`);\n  \n  // Remove level menu container\n  const menuContainer = document.getElementById('level-menu-container');\n  if (menuContainer) {\n    menuContainer.remove();\n  }\n  \n  gameState = 'playing';\n  currentLevelName = levelName;\n  initializeManagers();\n  \n  // Define common helpers for levels\n  const helpers = {\n    createExplosion: (x, y, color, intensity) => {\n      const count = Math.floor(20 * intensity);\n      for (let i = 0; i < count; i++) {\n        const angle = Math.random() * Math.PI * 2;\n        const speed = 2 + Math.random() * 4;\n        const dx = Math.cos(angle) * speed;\n        const dy = Math.sin(angle) * speed;\n        const size = 2 + Math.random() * 3;\n        const duration = 500 + Math.random() * 1000;\n        particleManager.createParticle(x, y, color, size, dx, dy, duration);\n      }\n    },\n    applyExplosionEffect: (x, y, radius, force) => {\n      managers.glassShatter.triggerShatter(x, y, force * 0.5);\n    },\n    onLevelComplete: (score) => {\n      handleLevelComplete(levelName, score);\n    }\n  };\n  \n  lastTime = performance.now();\n  \n  // Choose level class based on name\n  switch (levelName) {\n    case 'colors':\n      currentLevel = new ColorsLevel(canvas, ctx, managers, helpers);\n      break;\n    case 'shapes':\n      currentLevel = new ShapesLevel(canvas, ctx, managers, helpers);\n      break;\n    case 'alphabet':\n      currentLevel = new AlphabetLevel(canvas, ctx, managers, helpers);\n      break;\n    case 'numbers':\n      currentLevel = new NumbersLevel(canvas, ctx, managers, helpers);\n      break;\n    case 'clcase':\n      currentLevel = new ClCaseLevel(canvas, ctx, managers, helpers);\n      break;\n    case 'phonics':\n      currentLevel = new PhonicsLevel(canvas, ctx, managers, helpers);\n      break;\n    default:\n      currentLevel = new ColorsLevel(canvas, ctx, managers, helpers);\n  }\n  \n  currentLevel.start();\n  // GameLoop is already running, no need to call loop()\n}\n\n// Show options menu\nfunction showOptions() {\n  const modal = document.getElementById('settings-modal');\n  modal.innerHTML = `\n    <div class=\"modal-background\"></div>\n    <div class=\"modal-content\">\n      <h2>Options</h2>\n      <label>Display Mode:</label>\n      <select id=\"display-mode-select\">\n        <option value=\"DEFAULT\">Default</option>\n        <option value=\"QBOARD\">QBoard</option>\n      </select>\n      <label>Volume:</label>\n      <input type=\"range\" id=\"volume-range\" min=\"0\" max=\"1\" step=\"0.01\">\n      <button id=\"save-options\">Save</button>\n      <button id=\"close-options\">Close</button>\n    </div>\n  `;\n  modal.style.display = 'block';\n\n  const select = document.getElementById('display-mode-select');\n  select.value = resourceManager.getDisplayMode();\n  document.getElementById('volume-range').value = soundManager.volume;\n\n  document.getElementById('save-options').addEventListener('click', () => {\n    resourceManager.setDisplayMode(select.value);\n    soundManager.setGlobalVolume(parseFloat(document.getElementById('volume-range').value));\n    modal.style.display = 'none';\n  });\n  document.getElementById('close-options').addEventListener('click', () => {\n    modal.style.display = 'none';\n  });\n}\n\nfunction initializeManagers() {\n  managers.hud = new HudManager(canvas, ctx);\n  managers.checkpoint = new CheckpointManager(canvas, ctx);\n  managers.flamethrower = new FlamethrowerManager(canvas, ctx, particleManager);\n  managers.centerPiece = new CenterPieceManager(canvas, ctx, particleManager);\n  managers.multiTouch = new MultiTouchManager(canvas);\n  managers.glassShatter = new GlassShatterManager(canvas, ctx, particleManager);\n  managers.particleManager = particleManager;\n  managers.sound = soundManager;\n}\n\nfunction setupGlobalEventListeners() {\n  // Keyboard controls\n  window.addEventListener('keydown', (e) => {\n    switch (e.code) {\n      case 'Space':\n        e.preventDefault();\n        if (gameState === 'playing') {\n          togglePause();\n        }\n        break;\n      case 'KeyR':\n        if (gameState === 'gameOver' || gameState === 'paused') {\n          restartGame();\n        }\n        break;\n      case 'Escape':\n        if (gameState === 'playing') {\n          pauseGame();\n        } else if (gameState === 'paused') {\n          resumeGame();\n        }\n        break;\n    }\n  });\n  \n  // Prevent right-click context menu\n  canvas.addEventListener('contextmenu', (e) => e.preventDefault());\n}\n\nfunction togglePause() {\n  if (gameState === 'playing') {\n    pauseGame();\n  } else if (gameState === 'paused') {\n    resumeGame();\n  }\n}\n\nfunction pauseGame() {\n  if (gameState === 'playing') {\n    gameState = 'paused';\n    if (currentLevel) {\n      currentLevel.pause();\n    }\n    managers.checkpoint.showCheckpoint('Game Paused');\n  }\n}\n\nfunction resumeGame() {\n  if (gameState === 'paused') {\n    gameState = 'playing';\n    if (currentLevel) {\n      currentLevel.resume();\n    }\n  }\n}\n\nfunction restartGame() {\n  gameState = 'playing';\n  if (currentLevel) {\n    currentLevel.reset();\n    currentLevel.start();\n  }\n}\n\nfunction cleanupGame() {\n  // Cleanup current level\n  if (currentLevel && typeof currentLevel.destroy === 'function') {\n    currentLevel.destroy();\n  }\n  \n  // Cleanup managers\n  if (managers.input && typeof managers.input.destroy === 'function') {\n    managers.input.destroy();\n  }\n  if (managers.multiTouch && typeof managers.multiTouch.destroy === 'function') {\n    managers.multiTouch.destroy();\n  }\n}\n\nfunction handleLevelComplete(levelName, score) {\n  progressManager.completeLevel(levelName, score);\n  gameState = 'completed';\n  \n  // Show completion celebration\n  managers.checkpoint.showCheckpoint(`Level Complete!<br>Score: ${score}<br>Next level unlocked!`);\n  \n  setTimeout(() => {\n    showLevelMenu();\n  }, 3000);\n}\n\nwindow.addEventListener('resize', resizeCanvas);\n\n// Game loop functions\nfunction update(deltaTime) {\n  if (gameState === 'playing' && currentLevel) {\n    currentLevel.update(deltaTime);\n  }\n  \n  // Update managers\n  if (managers.centerPiece) managers.centerPiece.update(deltaTime);\n  if (managers.flamethrower) managers.flamethrower.update(deltaTime);\n  if (managers.glassShatter) managers.glassShatter.update(deltaTime);\n  if (managers.hud) managers.hud.update(deltaTime);\n  if (managers.checkpoint) managers.checkpoint.update(deltaTime);\n}\n\nfunction render() {\n  renderer.clear();\n  \n  if (gameState === 'playing' && currentLevel) {\n    currentLevel.render();\n  }\n  \n  // Render managers\n  if (managers.centerPiece) managers.centerPiece.draw(ctx);\n  if (managers.particleManager) managers.particleManager.updateAndDraw(ctx, gameLoop ? gameLoop.lastDeltaTime : 16);\n  if (managers.flamethrower) managers.flamethrower.draw(ctx);\n  if (managers.glassShatter) managers.glassShatter.draw(ctx);\n  if (managers.hud) managers.hud.draw(ctx);\n  if (managers.checkpoint) managers.checkpoint.draw(ctx);\n}\n\nwindow.onload = async () => {\n  console.log('üéÆ Super Student: Starting initialization...');\n  \n  try {\n    // Initialize canvas and renderer first\n    canvas = document.getElementById('game-canvas');\n    if (!canvas) {\n      throw new Error('Canvas element with id \"game-canvas\" not found!');\n    }\n    renderer = new Renderer(canvas);\n    ctx = renderer.ctx;\n    console.log('‚úÖ Canvas and renderer initialized');\n    \n    resizeCanvas();\n    console.log('‚úÖ Canvas resized');\n    \n    // Determine display settings\n    displaySettings = getDisplaySettings();\n    console.log('‚úÖ Display settings loaded');\n    \n    // Initialize core managers\n    resourceManager = new ResourceManager();\n    particleManager = new ParticleManager(displaySettings.maxParticles);\n    soundManager = new SoundManager();\n    progressManager = new ProgressManager();\n    console.log('‚úÖ Core managers initialized');\n    \n    // Setup input handler\n    managers.input = new InputHandler(canvas);\n    console.log('‚úÖ Input handler setup');\n\n     let resources = {};\n     try {\n       resources = await resourceManager.initializeGameResources();\n       console.log('‚úÖ Resources loaded successfully');\n       // Register preloaded audio with SoundManager\n       if (resources.audio) {\n         soundManager.sounds = resources.audio;\n         // Set initial global volume\n         soundManager.setGlobalVolume(soundManager.volume);\n       }\n     } catch (error) {\n       console.error('‚ö†Ô∏è Failed to load resources:', error);\n     }\n     \n     // Configure audio settings\n     const audioConf = getAudioConfig();\n     soundManager.setGlobalVolume(audioConf.masterVolume);\n     console.log('‚úÖ Audio configured');\n     \n     // Add display settings to managers\n     managers.displaySettings = displaySettings;\n     \n     // Initialize and start game loop\n     gameLoop = new GameLoop(update, render);\n     gameLoop.start();\n     console.log('‚úÖ Game loop started');\n     \n     console.log('üéØ Showing welcome screen...');\n     welcomeScreen = new WelcomeScreen(canvas, ctx, resourceManager);\n     welcomeScreen.setCallbacks(showLevelMenu, showOptions);\n     welcomeScreen.show();\n     setupGlobalEventListeners();\n     console.log('‚úÖ Welcome screen should be visible now!');\n     \n     // Initialize global error tracker immediately so early errors are captured\n     initializeErrorTracker();\n     \n  } catch (error) {\n    console.error('‚ùå CRITICAL ERROR during initialization:', error);\n    console.error('Stack trace:', error.stack);\n  }\n};\n"],"names":["ResourceManager","constructor","this","fonts","images","audio","loadFont","name","url","font","FontFace","load","document","add","loadImage","Promise","resolve","reject","img","Image","onload","onerror","src","loadAudio","Audio","oncanplaythrough","initializeGameResources","e","console","warn","setDisplayMode","mode","localStorage","setItem","getDisplayMode","getItem","testResourceLoading","log","Object","keys","placeholder","width","height","fontsCount","length","imagesCount","audioCount","ParticleManager","maxParticles","particles","lastUpdateTime","performance","now","particlePool","activeParticles","lastCleanupTime","cleanupInterval","renderBatch","colorCache","Map","globalEffects","wind","x","y","gravity","turbulence","performanceMode","frameTimeHistory","avgFrameTime","initializePool","i","push","createParticleObject","vx","vy","size","color","opacity","life","maxLife","age","rotation","rotationSpeed","scale","scaleVelocity","active","type","trail","trailPositions","physics","bounce","friction","setPerformanceMode","Math","min","createParticle","dx","dy","duration","options","removeOldestParticle","particle","find","p","includes","createExplosion","intensity","count","angle","PI","speed","random","cos","sin","createTrail","createSparkle","floor","createBubbleParticles","oldestIndex","oldestAge","deactivateParticle","updateAndDraw","ctx","deltaTime","actualDeltaTime","updateParticles","cleanupInactiveParticles","drawParticles","monitorPerformance","dt","shift","updateParticlePhysics","updateParticleVisuals","max","batches","circle","star","bubble","save","drawTrailParticles","drawCircleParticles","drawStarParticles","drawBubbleParticles","restore","forEach","globalAlpha","translate","rotate","fillStyle","beginPath","arc","fill","moveTo","lineTo","closePath","gradient","createRadialGradient","addColorStop","strokeStyle","lineWidth","lineCap","lineJoin","stroke","filter","frameTime","lastFrameTime","sum","reduce","a","b","setWind","setGravity","setTurbulence","clear","getActiveParticleCount","getPerformanceInfo","fps","round","GAME_CONFIG","freeze","DISPLAY_MODES","DEFAULT_MODE","FONT_SIZES","DEFAULT","regular","large","QBOARD","MAX_PARTICLES","MAX_EXPLOSIONS","MAX_SWIRL_PARTICLES","MOTHER_RADIUS","COLORS","WHITE","BLACK","FLAME_COLORS","COLORS_LIST","SEQUENCES","alphabet","split","numbers","clcase","shapes","colors","LETTER_SPAWN_INTERVAL","GROUP_SIZE","COLORS_COLLISION_DELAY","TOUCH_COOLDOWN","DOT_RADIUS","DOT_SPEED_RANGE","EXPLOSION_EXPANSION_RATE","SCREEN_SHAKE_DURATION","SPATIAL_GRID_SIZE","COLLISION_CHECK_FREQUENCY","CULLING_DISTANCE_MULTIPLIER","COLORS_LEVEL_CONFIG","TOTAL_DOTS","TARGET_DOTS","DISTRACTOR_DOTS","DISPERSION_FRAMES","DOT_BOUNCE_DAMPENING","SHIMMER_FREQUENCY","GLOW_FREQUENCY","MEMORY_DISPLAY_TIME","COLLISION_ENABLED_DELAY","GRID_OPTIMIZATION","TEXT_LEVEL_CONFIG","CENTER_FONT_SIZE","FALLING_FONT_SIZE","SPAWN_EDGE_BUFFER","TARGET_ADVANCE_COUNT","CHECKPOINT_INTERVAL","ABILITIES","AOE_RADIUS","CHARGE_UP_DURATION","LASER_WIDTH","SWIRL_PARTICLE_COUNT","CENTER_PIECE_ORBIT_RADIUS","AUDIO_CONFIG","MASTER_VOLUME","SFX_VOLUME","MUSIC_VOLUME","SOUNDS","laser","file","volume","completion","AMBIENT","space","loop","WEB_AUDIO_CONTEXT","BUFFER_PRELOAD","getAudioConfig","masterVolume","sfxVolume","musicVolume","sounds","ambient","webAudioContext","bufferPreload","SoundManager","audioConfig","audioContext","window","AudioContext","webkitAudioContext","_volume","masterGain","createGain","gain","value","connect","destination","gains","sfx","music","phonics","values","buffers","activeSources","phonicsCache","soundQueue","isProcessingQueue","maxConcurrentSounds","activeSoundsCount","initializeDefaultSounds","createSyntheticSounds","sampleRate","popBuffer","createBuffer","popData","getChannelData","t","exp","buffer","successBuffer","successData","envelope","wrongBuffer","wrongData","explosionBuffer","explosionData","noise","loadSound","response","fetch","arrayBuffer","decodeAudioData","error","playSound","pitch","entry","source","createBufferSource","gainNode","playbackRate","start","onended","playPhonicsSound","letter","soundName","toLowerCase","has","generateSyntheticPhonicsSound","data","freqs","c","d","f","g","h","j","k","l","m","n","o","q","r","s","u","v","w","z","set","playMusic","stop","playAmbient","playExplosion","playPop","playSuccess","playWrong","playSequence","delay","processQueue","sound","setTimeout","stopAll","setMasterVolume","setCategoryVolume","category","setGlobalVolume","resumeContext","state","resume","fadeCategoryVolume","target","currentTime","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","mute","unmute","toggleMute","createDynamicSound","frequency","oscillator","createOscillator","exponentialRampToValueAtTime","getAudioContext","hasSounds","getAvailableSounds","Renderer","canvas","getContext","setupCanvas","getBoundingClientRect","devicePixelRatio","style","clearRect","GameLoop","updateFn","renderFn","lastTime","running","_loop","lastDeltaTime","requestAnimationFrame","HudManager","score","level","lives","abilities","flamethrower","cooldown","maxCooldown","explosion","fontSize","updateScore","points","updateLevel","newLevel","updateLives","newLives","updateAbilityCooldown","abilityName","isAbilityReady","draw","textAlign","fillText","yOffset","entries","ability","cooldownPercent","toFixed","update","resize","CheckpointManager","isActive","currentMessage","fadeAlpha","fadeDirection","displayTime","maxDisplayTime","showCheckpoint","message","fillRect","textBaseline","centerX","centerY","shadowColor","shadowBlur","subtitleFontSize","isDisplaying","skipCheckpoint","FlamethrowerManager","particleManager","activeFlames","maxFlames","createFlamethrower","startX","startY","endX","endY","flame","generateFlameParticles","distance","sqrt","pow","particleCount","progress","offsetX","offsetY","checkCollision","targetX","targetY","targetRadius","some","A","B","C","abs","CenterPieceManager","radius","pulsePhase","swirlParticles","lastParticleTime","generateSwirlParticle","radiusSpeed","getRandomColor","pulseSize","startRadius","endRadius","alpha","reset","MultiTouchManager","pointers","callbacks","pointerdown","pointermove","pointerup","_boundPointerDown","handlePointerDown","bind","_boundPointerMove","handlePointerMove","_boundPointerUp","handlePointerUp","_boundPreventDefault","preventDefault","setupEventListeners","addEventListener","rect","pointer","id","pointerId","clientX","left","clientY","top","pointerType","pressure","startTime","triggerCallbacks","get","endTime","delete","eventType","originalEvent","callback","removeEventListener","index","indexOf","splice","getActivePointers","Array","from","getPointerCount","getPointer","isMultiTouch","getPinchDistance","p1","p2","getPinchCenter","destroy","GlassShatterManager","isShattered","shatterTime","maxShatterTime","cracks","fragments","stressPoints","elasticity","fragmentCount","crackPropagationSpeed","stressFieldRadius","effects","refractionIntensity","reflectionIntensity","glowIntensity","shimmerPhase","performanceLevel","detectPerformanceLevel","adjustSettingsForPerformance","pixelCount","test","navigator","userAgent","createShatterEffect","impactX","impactY","impactPoint","generateRealisticCracks","generateGlassFragments","createStressField","createAdvancedParticles","numPrimary","crack","createCrackLine","numSecondary","numCircular","createCircularCrack","propagationSpeed","currentLength","targetLength","segments","currentX","currentY","currentAngle","segmentLength","branchAngle","branchLength","branchX","branchY","isBranch","deviation","fragment","getGlassColor","decay","stressCount","phase","getGlassParticleColor","fadeProgress","updateCrackPropagation","updateFragments","updateStressField","point","drawStressField","drawCracks","drawFragments","drawRefractionEffect","drawLength","pointsCount","triggerShatter","ProgressManager","storageKey","levels","loadProgress","saved","JSON","parse","unlockedLevels","completedLevels","scores","totalScore","saveProgress","stringify","isLevelUnlocked","levelName","isLevelCompleted","completeLevel","currentIndex","nextLevel","getLevelScore","getProgress","resetProgress","getCompletionPercentage","BaseLevel","managers","helpers","init","Error","render","cleanup","end","onLevelComplete","pause","hud","LevelSettings","totalDots","targetDots","distractorDots","dispersionFrames","bounceDampening","shimmerFreq","glowFreq","memoryTime","collisionDelay","text","centerFontSize","fallingFontSize","spawnEdgeBuffer","advanceCount","checkpointInterval","aoeRadius","chargeDuration","laserWidth","swirlCount","orbitRadius","ColorsLevel","super","dots","targetDotsRemaining","onPointerDown","correctStreak","lastCorrectTime","levelStartTime","colorsList","targetColor","rgb","join","mother","displaySettings","motherRadius","disperse","cfg","total","targetCount","others","addDot","colArray","isTarget","dot","shimmer","drawEnhancedDot","drawUI","isMemory","shimmerOffset","elapsed","seconds","event","handleCorrectHit","handleWrongHit","applyExplosionEffect","centerPiece","timeBonus","accuracyBonus","ShapesLevel","sequence","objects","groupCount","spawnTimer","spawnInterval","currentTarget","spawnObject","obj","drawShape","shape","side","hit","half","px","py","AlphabetLevel","char","NumbersLevel","chars","ClCaseLevel","PhonicsConfig","maxBubbles","targetFPS","bubblePoolSize","particlePoolSize","buoyancy","drag","pop","minForce","maxForce","damping","visuals","bubbleSize","bubbleBase","bubbleHighlight","bubbleShadow","letterColor","correctGlow","wrongGlow","background","enabled","floating","amplitude","glow","education","phonicsMap","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","difficulty","easy","letters","spawnRate","bubbleSpeed","medium","hard","progression","levelDuration","correctScorePoints","wrongScorePenalty","streakMultiplier","maxStreak","gameplay","spawnZone","targetZone","bubbleLifetime","comboWindow","pauseOnWrong","celebrationDuration","playOnSpawn","playOnPop","repeatDelay","bubblePop","correct","wrong","levelComplete","combo","BubbleSystem","soundManager","__publicField","config","bubbles","bubblePool","activeBubbles","lastSpawnTime","time","initializeBubblePool","targetLetter","targetLetterIndex","currentDifficulty","streak","createBubbleObject","lifetime","maxLifetime","popAnimation","isPopping","bounceCount","lastSoundTime","removeEventListeners","setDifficulty","setTargetLetter","getNextTargetLetter","spawnBubble","getRandomLetter","updateSpawning","updateBubbles","cleanupBubbles","updateCombo","deactivateBubble","updateBubblePhysics","updateBubbleEffects","checkBoundaries","popBubble","floatOffset","clickedBubble","findBubbleAtPoint","handleBubbleClick","isCorrect","handleCorrectAnswer","handleWrongAnswer","baseScore","comboMultiplier","createSuccessEffect","onCorrectAnswer","createWrongEffect","onWrongAnswer","createPopParticles","drawPoppingBubble","drawBubble","PhonicsLevel","bubbleSystem","correctCount","totalAttempts","timeRemaining","gameStartTime","showingInstructions","celebrationTime","instructionAlpha","backgroundGradient","frameCount","avgFPS","backgroundPhase","targetLetterPulse","setNewTarget","createBackgroundGradient","showInstructions","createLinearGradient","hideInstructions","advanceDifficulty","showCelebration","updateStats","penalty","difficulties","showAdvancementMessage","createCelebrationParticles","checkpoint","toUpperCase","accuracy","updatePerformanceStats","updateVisualEffects","updateGameTimer","updateInstructions","checkLevelCompletion","reducedQuality","drawBackground","drawInstructions","drawCelebration","showDebugInfo","drawDebugInfo","drawTargetLetter","drawProgress","drawTimer","drawScoreInfo","strokeRect","pulseScale","barWidth","timeString","toString","padStart","handleInput","levelInfo","LevelMenu","containerId","onSelect","container","getElementById","progressManager","label","description","show","html","map","isUnlocked","isCompleted","statusIcon","innerHTML","display","card","querySelector","selectLevel","cursor","backBtn","back","resetBtn","confirm","location","reload","InputHandler","pointerDownListeners","pointerUpListeners","pointerMoveListeners","keyDownListeners","_boundHandlePointerDown","_handlePointerDown","_boundHandlePointerUp","_handlePointerUp","_boundHandlePointerMove","_handlePointerMove","_boundHandleKeyDown","_handleKeyDown","pos","_getPointerPosition","cb","code","scaleX","scaleY","onPointerUp","onPointerMove","onKeyDown","getDisplaySettings","innerWidth","innerHeight","detectDisplayMode","fontSizes","maxExplosions","collisionFrequency","WelcomeScreen","resourceManager","bgCanvas","createElement","className","bgCtx","syncCanvasSize","animationId","isVisible","particleSpeed","onStartGame","onShowOptions","particleColors","setupParticles","setupUI","onResize","createWelcomeScreenHTML","attachEventListeners","existing","remove","welcomeDiv","appendChild","body","addWelcomeScreenCSS","textContent","head","updateSelection","button","querySelectorAll","btn","classList","dataset","textEl","hide","startAnimation","welcomeScreen","stopAnimation","animate","updateAnimatedBackground","renderAnimatedBackground","cancelAnimationFrame","setCallbacks","startGameCallback","showOptionsCallback","initializeErrorTracker","overlay","logger","errorLog","overlayEl","record","lineno","colno","stack","timestamp","Date","line","toLocaleTimeString","cssText","div","appendOverlay","filename","reason","String","getErrors","slice","renderer","gameLoop","currentLevel","gameState","resizeCanvas","showLevelMenu","menuContainer","startLevel","multiTouch","glassShatter","force","handleLevelComplete","showOptions","modal","select","parseFloat","setupGlobalEventListeners","pauseGame","resumeGame","async","input","resources","audioConf"],"mappings":"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"}