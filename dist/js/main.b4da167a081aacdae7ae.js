/*! For license information please see main.b4da167a081aacdae7ae.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.currentScreen=null,this.lastTime=0,this.isRunning=!1},(n=[{key:"start",value:function(){this.isRunning=!0,this.loop(0)}},{key:"stop",value:function(){this.isRunning=!1}},{key:"setCurrentScreen",value:function(t){this.currentScreen=t}},{key:"loop",value:function(t){if(this.isRunning){var e=t-this.lastTime;this.lastTime=t,this.currentScreen&&(this.currentScreen.update(e),this.currentScreen.render(this.ctx)),requestAnimationFrame(this.loop.bind(this))}}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function s(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return a(l,"_invoke",function(n,r,o){var i,a,s,c=0,l=o||[],f=!1,v={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,a=0,s=t,v.n=n,u}};function h(n,r){for(a=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=v.p,p=i[2];n>3?(o=p===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(a=0,v.v=r,v.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,v.n=p,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),a=l,s=p;(e=a<2?t:s)||!f;){i||(a?a<3?(a>1&&(v.n=-1),h(a,s)):v.n=s:v.v=s);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=v.n<0)?s:n.call(r,v))!==u)break}catch(e){i=t,a=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),l}var u={};function c(){}function l(){}function f(){}e=Object.getPrototypeOf;var v=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),h=f.prototype=c.prototype=Object.create(v);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,o,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=f,a(h,"constructor",f),a(f,"constructor",l),l.displayName="GeneratorFunction",a(f,o,"GeneratorFunction"),a(h),a(h,o,"Generator"),a(h,r,function(){return this}),a(h,"toString",function(){return"[object Generator]"}),(i=function(){return{w:s,m:p}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){a(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,e,n,r)}function s(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){s(i,r,o,a,u,"next",t)}function u(t){s(i,r,o,a,u,"throw",t)}a(void 0)})}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var f=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.assets=new Map,this.loadingProgress=0,this.totalAssets=0,this.loadedAssets=0},e=[{key:"loadAssets",value:(r=u(i().m(function t(){return i().w(function(t){for(;;)if(0===t.n)return t.a(2,Promise.resolve())},t)})),function(){return r.apply(this,arguments)})},{key:"loadAsset",value:(n=u(i().m(function t(e){var n,r,o;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:t.p=0,r=e.type,t.n="font"===r?1:"audio"===r?3:"image"===r?5:7;break;case 1:return t.n=2,this.loadFont(e);case 2:return n=t.v,t.a(3,7);case 3:return t.n=4,this.loadAudio(e);case 4:return n=t.v,t.a(3,7);case 5:return t.n=6,this.loadImage(e);case 6:return n=t.v,t.a(3,7);case 7:this.assets.set(e.id,n),this.updateProgress(),t.n=9;break;case 8:t.p=8,o=t.v,console.error("Failed to load asset: ".concat(e.id),o);case 9:return t.a(2)}},t,this,[[0,8]])})),function(t){return n.apply(this,arguments)})},{key:"updateProgress",value:function(){var t;this.loadedAssets++,this.loadingProgress=this.loadedAssets/this.totalAssets,null===(t=this.onProgressUpdate)||void 0===t||t.call(this,this.loadingProgress)}},{key:"getAsset",value:function(t){return this.assets.get(t)}}],e&&c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}var y=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.activeTouches=new Map,this.touchCooldown=new Map,this.eventListeners=new Map,this.longPressTimeout=new Map,this.tapTimeout=null,this.lastTapTime=0,this.setupEventListeners()},e=[{key:"setupEventListeners",value:function(){this.canvas.addEventListener("pointerdown",this.handlePointerDown.bind(this)),this.canvas.addEventListener("pointerup",this.handlePointerUp.bind(this)),this.canvas.addEventListener("pointermove",this.handlePointerMove.bind(this)),this.canvas.addEventListener("pointercancel",this.handlePointerCancel.bind(this)),this.canvas.addEventListener("touchstart",function(t){return t.preventDefault()},{passive:!1}),this.canvas.addEventListener("touchmove",function(t){return t.preventDefault()},{passive:!1}),this.canvas.addEventListener("touchend",function(t){return t.preventDefault()},{passive:!1}),this.canvas.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.canvas.addEventListener("selectstart",function(t){return t.preventDefault()})}},{key:"handlePointerDown",value:function(t){var e=this,n=t.pointerId,r=this.getEventCoordinates(t);if(!this.isInCooldown(n)){var o={x:r.x,y:r.y,startTime:Date.now(),startX:r.x,startY:r.y,moved:!1};this.activeTouches.set(n,o),this.setCooldown(n),this.longPressTimeout.set(n,setTimeout(function(){e.activeTouches.has(n)&&!o.moved&&e.dispatchEvent("longpress",{pointerId:n,x:r.x,y:r.y,event:t})},500)),this.dispatchEvent("pointerdown",{pointerId:n,x:r.x,y:r.y,event:t})}}},{key:"handlePointerUp",value:function(t){var e=t.pointerId,n=this.getEventCoordinates(t),r=this.activeTouches.get(e);if(r){var o=Date.now()-r.startTime,i=this.getDistance(r.startX,r.startY,n.x,n.y);this.longPressTimeout.has(e)&&(clearTimeout(this.longPressTimeout.get(e)),this.longPressTimeout.delete(e)),o<300&&i<10&&!r.moved&&this.handleTap(n,t),this.activeTouches.delete(e)}this.dispatchEvent("pointerup",{pointerId:e,x:n.x,y:n.y,event:t})}},{key:"handlePointerMove",value:function(t){var e=t.pointerId,n=this.activeTouches.get(e);if(n){var r=this.getEventCoordinates(t);this.getDistance(n.startX,n.startY,r.x,r.y)>5&&(n.moved=!0),n.x=r.x,n.y=r.y,this.dispatchEvent("pointermove",{pointerId:e,x:r.x,y:r.y,event:t})}}},{key:"handlePointerCancel",value:function(t){var e=t.pointerId;this.longPressTimeout.has(e)&&(clearTimeout(this.longPressTimeout.get(e)),this.longPressTimeout.delete(e)),this.activeTouches.delete(e),this.dispatchEvent("pointercancel",{pointerId:e,event:t})}},{key:"handleTap",value:function(t,e){var n=this,r=Date.now();r-this.lastTapTime<300?(clearTimeout(this.tapTimeout),this.dispatchEvent("doubletap",{x:t.x,y:t.y,event:e})):this.tapTimeout=setTimeout(function(){n.dispatchEvent("tap",{x:t.x,y:t.y,event:e})},200),this.lastTapTime=r}},{key:"getEventCoordinates",value:function(t){var e=this.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}},{key:"getDistance",value:function(t,e,n,r){var o=n-t,i=r-e;return Math.sqrt(o*o+i*i)}},{key:"isInCooldown",value:function(t){return this.touchCooldown.has(t)&&Date.now()-this.touchCooldown.get(t)<50}},{key:"setCooldown",value:function(t){this.touchCooldown.set(t,Date.now())}},{key:"registerHandler",value:function(t,e){this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(e)}},{key:"dispatchEvent",value:function(t,e){(this.eventListeners.get(t)||[]).forEach(function(t){return t(e)})}},{key:"getActiveTouches",value:function(){return Array.from(this.activeTouches.values())}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0}},{key:"destroy",value:function(){this.longPressTimeout.forEach(function(t){return clearTimeout(t)}),this.longPressTimeout.clear(),this.tapTimeout&&clearTimeout(this.tapTimeout),this.activeTouches.clear(),this.touchCooldown.clear(),this.eventListeners.clear()}}],e&&h(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function b(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}var g=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"update",value:function(t){}},{key:"render",value:function(t){t.fillStyle="black",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="white",t.font="48px sans-serif",t.textAlign="center",t.fillText("Super Student",t.canvas.width/2,t.canvas.height/2)}}])&&m(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function T(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return P(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],f=!1,v={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,s=0,u=t,v.n=n,a}};function h(n,r){for(s=n,u=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],h=v.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,v.v=r,v.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,v.n=p,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,p),s=l,u=p;(e=s<2?t:u)||!f;){i||(s?s<3?(s>1&&(v.n=-1),h(s,u)):v.n=u:v.v=u);try{if(c=2,i){if(s||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((e=(f=v.n<0)?u:n.call(r,v))!==a)break}catch(e){i=t,s=1,u=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(P(e={},r,function(){return this}),e),f=c.prototype=s.prototype=Object.create(l);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,P(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=c,P(f,"constructor",c),P(c,"constructor",u),u.displayName="GeneratorFunction",P(c,o,"GeneratorFunction"),P(f),P(f,o,"Generator"),P(f,r,function(){return this}),P(f,"toString",function(){return"[object Generator]"}),(T=function(){return{w:i,m:v}})()}function P(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}P=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){P(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},P(t,e,n,r)}function S(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function k(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}var x=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.getElementById("game-canvas"),this.ctx=this.canvas.getContext("2d"),this.resourceManager=new f,this.inputHandler=new y(this.canvas),this.gameLoop=new r(this.ctx)},e=[{key:"init",value:(n=T().m(function t(){return T().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.resourceManager.loadAssets();case 1:this.setupCanvas(),this.setupMobileOptimizations(),this.startWelcomeScreen(),this.gameLoop.start();case 2:return t.a(2)}},t,this)}),o=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){S(i,r,o,a,s,"next",t)}function s(t){S(i,r,o,a,s,"throw",t)}a(void 0)})},function(){return o.apply(this,arguments)})},{key:"setupCanvas",value:function(){var t=this;this.resizeCanvas(),window.addEventListener("resize",function(){clearTimeout(t.resizeTimeout),t.resizeTimeout=setTimeout(function(){return t.resizeCanvas()},100)}),window.addEventListener("orientationchange",function(){setTimeout(function(){return t.resizeCanvas()},200)})}},{key:"resizeCanvas",value:function(){var t=window.devicePixelRatio||1,e=window.innerWidth,n=window.innerHeight;this.canvas.width=e*t,this.canvas.height=n*t,this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px"),this.ctx.scale(t,t),this.viewportWidth=e,this.viewportHeight=n,this.devicePixelRatio=t}},{key:"setupMobileOptimizations",value:function(){document.addEventListener("gesturestart",function(t){return t.preventDefault()}),document.addEventListener("gesturechange",function(t){return t.preventDefault()}),document.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.isMobileDevice()&&setTimeout(function(){window.scrollTo(0,1)},100),this.isMobileDevice()&&document.body.classList.add("mobile-device"),this.isTouchDevice()&&document.body.classList.add("touch-device")}},{key:"isMobileDevice",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0}},{key:"startWelcomeScreen",value:function(){var t=new g;this.gameLoop.setCurrentScreen(t)}}],e&&E(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,o}();window.addEventListener("load",function(){(new x).init()})})();